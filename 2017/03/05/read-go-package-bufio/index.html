<!DOCTYPE html><html lang="zh-Hans"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><meta property="wb:webmaster" content="70a2abf24d0ab33f"><title>Go Package —— bufio包 · 一刻笔记</title><meta name="description" content="Go Package —— bufio包 - ityike"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="icon" href="/favicon.png"><link rel="stylesheet" href="/css/apollo.css"><link rel="search" type="application/opensearchdescription+xml" href="http://www.dyike.com/atom.xml" title="一刻笔记"></head><body><div class="wrap"><header><a href="/" class="logo-link"><img src="/favicon.png" alt="logo"></a><ul class="nav nav-list"><li class="nav-list-item"><a href="/" target="_self" class="nav-list-link">首页</a></li><li class="nav-list-item"><a href="/learn" target="_self" class="nav-list-link">充电</a></li><li class="nav-list-item"><a href="/life" target="_self" class="nav-list-link">生活</a></li><li class="nav-list-item"><a href="/archives/" target="_self" class="nav-list-link">归档</a></li><li class="nav-list-item"><a href="/about" target="_self" class="nav-list-link">关于</a></li><li class="nav-list-item"><a href="http://weibo.com/yuanfengyff" target="_blank" class="nav-list-link">微博</a></li><li class="nav-list-item"><a href="https://github.com/dyike" target="_blank" class="nav-list-link">GITHUB</a></li><li class="nav-list-item"><a href="/atom.xml" target="_self" class="nav-list-link">订阅</a></li></ul></header><main class="container"><div class="post"><article class="post-block"><h1 class="post-title">Go Package —— bufio包</h1><div class="post-info">Mar 5, 2017</div><div class="post-content"><p>本文阅读golang的bufio包，常用的函数，结构体以及方法</p>
<h2 id="scan-go"><a href="#scan-go" class="headerlink" title="scan.go"></a><em>scan.go</em></h2><h3 id="func-NewScanner-r-io-Reader-Scanner"><a href="#func-NewScanner-r-io-Reader-Scanner" class="headerlink" title="func NewScanner(r io.Reader) *Scanner"></a><code>func NewScanner(r io.Reader) *Scanner</code></h3><blockquote>
<p>返回一个新的Scanner从r读取。split函数默认为ScanLines。</p>
</blockquote>
<h3 id="func-ScanBytes-data-byte-atEOF-bool-advance-int-token-byte-err-error"><a href="#func-ScanBytes-data-byte-atEOF-bool-advance-int-token-byte-err-error" class="headerlink" title="func ScanBytes(data []byte, atEOF bool) (advance int, token []byte, err error)"></a><code>func ScanBytes(data []byte, atEOF bool) (advance int, token []byte, err error)</code></h3><blockquote>
<p>是scaner的一个分割函数，将每一个字节作为一个字符返回。</p>
</blockquote>
<h3 id="func-ScanLines-data-byte-atEOF-bool-advance-int-token-byte-err-error"><a href="#func-ScanLines-data-byte-atEOF-bool-advance-int-token-byte-err-error" class="headerlink" title="func ScanLines(data []byte, atEOF bool) (advance int, token []byte, err error)"></a><code>func ScanLines(data []byte, atEOF bool) (advance int, token []byte, err error)</code></h3><blockquote>
<p>ScanLines是一个Scanner的拆分函数，它返回每行文本，删除任何尾随的行尾标记。<br>返回的行可能为空。行结束标记是一个可选的回车，后跟一个强制换行。在正则表达式符号中，它是<code>\ r？\ n</code>。<br>最后一个非空行的输入将被返回，即使它没有换行符。</p>
</blockquote>
<h3 id="func-ScanRunes-data-byte-atEOF-bool-advance-int-token-byte-err-error"><a href="#func-ScanRunes-data-byte-atEOF-bool-advance-int-token-byte-err-error" class="headerlink" title="func ScanRunes(data []byte, atEOF bool) (advance int, token []byte, err error)"></a><code>func ScanRunes(data []byte, atEOF bool) (advance int, token []byte, err error)</code></h3><h3 id="func-ScanWords-data-byte-atEOF-bool-advance-int-token-byte-err-error"><a href="#func-ScanWords-data-byte-atEOF-bool-advance-int-token-byte-err-error" class="headerlink" title="func ScanWords(data []byte, atEOF bool) (advance int, token []byte, err error)"></a><code>func ScanWords(data []byte, atEOF bool) (advance int, token []byte, err error)</code></h3><blockquote>
<p>拆分函数，删除空格，返回空格分割的文字，永远不会返回一个空字符串。<br>空间定义由<code>unicode.IsSpace</code>设定。</p>
</blockquote>
<h3 id="func-s-Scanner-Err-error"><a href="#func-s-Scanner-Err-error" class="headerlink" title="func (s *Scanner) Err() error"></a><code>func (s *Scanner) Err() error</code></h3><h3 id="func-s-Scanner-Bytes-byte"><a href="#func-s-Scanner-Bytes-byte" class="headerlink" title="func (s *Scanner) Bytes() []byte"></a><code>func (s *Scanner) Bytes() []byte</code></h3><h3 id="func-s-Scanner-Text-string"><a href="#func-s-Scanner-Text-string" class="headerlink" title="func (s *Scanner) Text() string"></a><code>func (s *Scanner) Text() string</code></h3><h3 id="func-s-Scanner-Scan-bool"><a href="#func-s-Scanner-Scan-bool" class="headerlink" title="func (s *Scanner) Scan() bool"></a><code>func (s *Scanner) Scan() bool</code></h3><h3 id="func-s-Scanner-Buffer-buf-byte-max-int"><a href="#func-s-Scanner-Buffer-buf-byte-max-int" class="headerlink" title="func (s *Scanner) Buffer(buf []byte, max int)"></a><code>func (s *Scanner) Buffer(buf []byte, max int)</code></h3><h3 id="func-s-Scanner-Split-split-SplitFunc"><a href="#func-s-Scanner-Split-split-SplitFunc" class="headerlink" title="func (s *Scanner) Split(split SplitFunc)"></a><code>func (s *Scanner) Split(split SplitFunc)</code></h3><blockquote>
<p>SplitFunc 有四个：ScanBytes、ScanLines、ScanRunes、ScanWords。</p>
</blockquote>
<h2 id="bufio-go"><a href="#bufio-go" class="headerlink" title="bufio.go"></a><em>bufio.go</em></h2><h2 id="Reader"><a href="#Reader" class="headerlink" title="Reader"></a>Reader</h2><h3 id="func-NewReader-rd-io-Reader-Reader"><a href="#func-NewReader-rd-io-Reader-Reader" class="headerlink" title="func NewReader(rd io.Reader) *Reader"></a><code>func NewReader(rd io.Reader) *Reader</code></h3><blockquote>
<p>创建一个reader，其中buffer的Size是默认大小。<br>其实就是调用<code>func NewReaderSize(rd io.Reader, size int) *Reader</code></p>
</blockquote>
<h3 id="func-b-Reader-Reset-r-io-Reader"><a href="#func-b-Reader-Reset-r-io-Reader" class="headerlink" title="func (b *Reader) Reset(r io.Reader)"></a><code>func (b *Reader) Reset(r io.Reader)</code></h3><blockquote>
<p>Reset放弃所有缓冲数据，重置所有状态和切换从r读取的缓冲读取器。</p>
</blockquote>
<h3 id="func-b-Reader-Peek-n-int-byte-error"><a href="#func-b-Reader-Peek-n-int-byte-error" class="headerlink" title="func (b *Reader) Peek(n int) ([]byte, error)"></a><code>func (b *Reader) Peek(n int) ([]byte, error)</code></h3><blockquote>
<p>Peek返回下一个n字节，而不推进读取器。<br>如果Peek返回少于n个字节，它也返回一个错误，解释为什么读取短。<br>如果n大于b的缓冲区大小,错误是ErrBufferFull。</p>
</blockquote>
<h3 id="func-b-Reader-Discard-n-int-discarded-int-err-error"><a href="#func-b-Reader-Discard-n-int-discarded-int-err-error" class="headerlink" title="func (b *Reader) Discard(n int) (discarded int, err error)"></a><code>func (b *Reader) Discard(n int) (discarded int, err error)</code></h3><blockquote>
<p>Discard跳过接下来的n个字节，返回丢弃的字节数。<br>如果Discard跳过少于n个字节，它也返回一个错误。<br>如果0 &lt;= n &lt;= b.Buffered()，Discarding能够从底层的io.Reader读取。</p>
</blockquote>
<h3 id="func-b-Reader-Read-p-byte-n-int-err-error"><a href="#func-b-Reader-Read-p-byte-n-int-err-error" class="headerlink" title="func (b *Reader) Read(p []byte) (n int, err error)"></a><code>func (b *Reader) Read(p []byte) (n int, err error)</code></h3><h3 id="func-b-Reader-ReadByte-byte-error"><a href="#func-b-Reader-ReadByte-byte-error" class="headerlink" title="func (b *Reader) ReadByte() (byte, error)"></a><code>func (b *Reader) ReadByte() (byte, error)</code></h3><h3 id="func-b-Reader-UnreadByte-error"><a href="#func-b-Reader-UnreadByte-error" class="headerlink" title="func (b *Reader) UnreadByte() error"></a><code>func (b *Reader) UnreadByte() error</code></h3><h3 id="func-b-Reader-ReadRune-r-rune-size-int-err-error"><a href="#func-b-Reader-ReadRune-r-rune-size-int-err-error" class="headerlink" title="func (b *Reader) ReadRune() (r rune, size int, err error)"></a><code>func (b *Reader) ReadRune() (r rune, size int, err error)</code></h3><h3 id="func-b-Reader-UnreadRune-error"><a href="#func-b-Reader-UnreadRune-error" class="headerlink" title="func (b *Reader) UnreadRune() error"></a><code>func (b *Reader) UnreadRune() error</code></h3><h3 id="func-b-Reader-Buffered-int"><a href="#func-b-Reader-Buffered-int" class="headerlink" title="func (b *Reader) Buffered() int"></a><code>func (b *Reader) Buffered() int</code></h3><h3 id="func-b-Reader-ReadSlice-delim-byte-line-byte-err-error"><a href="#func-b-Reader-ReadSlice-delim-byte-line-byte-err-error" class="headerlink" title="func (b *Reader) ReadSlice(delim byte) (line []byte, err error)"></a><code>func (b *Reader) ReadSlice(delim byte) (line []byte, err error)</code></h3><h3 id="func-b-Reader-ReadLine-line-byte-isPrefix-bool-err-error"><a href="#func-b-Reader-ReadLine-line-byte-isPrefix-bool-err-error" class="headerlink" title="func (b *Reader) ReadLine() (line []byte, isPrefix bool, err error)"></a><code>func (b *Reader) ReadLine() (line []byte, isPrefix bool, err error)</code></h3><h3 id="func-b-Reader-ReadBytes-delim-byte-byte-error"><a href="#func-b-Reader-ReadBytes-delim-byte-byte-error" class="headerlink" title="func (b *Reader) ReadBytes(delim byte) ([]byte, error)"></a><code>func (b *Reader) ReadBytes(delim byte) ([]byte, error)</code></h3><h3 id="func-b-Reader-ReadString-delim-byte-string-error"><a href="#func-b-Reader-ReadString-delim-byte-string-error" class="headerlink" title="func (b *Reader) ReadString(delim byte) (string, error)"></a><code>func (b *Reader) ReadString(delim byte) (string, error)</code></h3><h3 id="func-b-Reader-WriteTo-w-io-Writer-n-int64-err-error"><a href="#func-b-Reader-WriteTo-w-io-Writer-n-int64-err-error" class="headerlink" title="func (b *Reader) WriteTo(w io.Writer) (n int64, err error)"></a><code>func (b *Reader) WriteTo(w io.Writer) (n int64, err error)</code></h3><h2 id="Writer"><a href="#Writer" class="headerlink" title="Writer"></a>Writer</h2><h3 id="func-NewWriterSize-w-io-Writer-size-int-Writer"><a href="#func-NewWriterSize-w-io-Writer-size-int-Writer" class="headerlink" title="func NewWriterSize(w io.Writer, size int) *Writer"></a><code>func NewWriterSize(w io.Writer, size int) *Writer</code></h3><h3 id="func-NewWriter-w-io-Writer-Writer"><a href="#func-NewWriter-w-io-Writer-Writer" class="headerlink" title="func NewWriter(w io.Writer) *Writer"></a><code>func NewWriter(w io.Writer) *Writer</code></h3><h3 id="func-b-Writer-Reset-w-io-Writer"><a href="#func-b-Writer-Reset-w-io-Writer" class="headerlink" title="func (b *Writer) Reset(w io.Writer)"></a><code>func (b *Writer) Reset(w io.Writer)</code></h3><h3 id="func-b-Writer-Flush-error"><a href="#func-b-Writer-Flush-error" class="headerlink" title="func (b *Writer) Flush() error"></a><code>func (b *Writer) Flush() error</code></h3><h3 id="func-b-Writer-Available-int"><a href="#func-b-Writer-Available-int" class="headerlink" title="func (b *Writer) Available() int"></a><code>func (b *Writer) Available() int</code></h3><h3 id="func-b-Writer-Buffered-int"><a href="#func-b-Writer-Buffered-int" class="headerlink" title="func (b *Writer) Buffered() int"></a><code>func (b *Writer) Buffered() int</code></h3><h3 id="func-b-Writer-Write-p-byte-nn-int-err-error"><a href="#func-b-Writer-Write-p-byte-nn-int-err-error" class="headerlink" title="func (b *Writer) Write(p []byte) (nn int, err error)"></a><code>func (b *Writer) Write(p []byte) (nn int, err error)</code></h3><h3 id="func-b-Writer-WriteByte-c-byte-error"><a href="#func-b-Writer-WriteByte-c-byte-error" class="headerlink" title="func (b *Writer) WriteByte(c byte) error"></a><code>func (b *Writer) WriteByte(c byte) error</code></h3><h3 id="func-b-Writer-WriteRune-r-rune-size-int-err-error"><a href="#func-b-Writer-WriteRune-r-rune-size-int-err-error" class="headerlink" title="func (b *Writer) WriteRune(r rune) (size int, err error)"></a><code>func (b *Writer) WriteRune(r rune) (size int, err error)</code></h3><h3 id="func-b-Writer-WriteString-s-string-int-error"><a href="#func-b-Writer-WriteString-s-string-int-error" class="headerlink" title="func (b *Writer) WriteString(s string) (int, error)"></a><code>func (b *Writer) WriteString(s string) (int, error)</code></h3><h3 id="func-b-Writer-ReadFrom-r-io-Reader-n-int64-err-error"><a href="#func-b-Writer-ReadFrom-r-io-Reader-n-int64-err-error" class="headerlink" title="func (b *Writer) ReadFrom(r io.Reader) (n int64, err error)"></a><code>func (b *Writer) ReadFrom(r io.Reader) (n int64, err error)</code></h3></div></article></div></main><footer><div class="paginator"><a href="/2017/03/27/design-pattern-strategy/" class="prev">上一篇</a><a href="/2017/02/26/how-make-an-effective-plan/" class="next">下一篇</a></div><script type="text/javascript">(function(){
    var url = "http://widget.weibo.com/distribution/comments.php?width=0&url=auto&border=1&brandline=y&appkey=2308493083&dpc=1";
    url = url.replace("url=auto", "url=" + encodeURIComponent(document.URL));
    document.write('<iframe id="WBCommentFrame" src="' + url + '" scrolling="no" frameborder="0" style="width:100%"></iframe>');
})();</script><script src="http://tjs.sjs.sinajs.cn/open/widget/js/widget/comment.js" type="text/javascript" charset="utf-8"></script><script type="text/javascript">window.WBComment.init({
    "id": "WBCommentFrame"
});</script><div class="copyright"><p>© 2013 - 2017 <a href="http://www.dyike.com">ityike</a>.</p></div></footer></div><script async src="//cdn.bootcss.com/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML" integrity="sha384-crwIf/BuaWM9rM65iM+dWFldgQ1Un8jWZMuh3puxb8TOY9+linwLoI7ZHZT+aekW" crossorigin="anonymous"></script><script>(function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=function(){(b[l].q=b[l].q||[]).push(arguments)});b[l].l=+new Date;e=o.createElement(i);r=o.getElementsByTagName(i)[0];e.src='//www.google-analytics.com/analytics.js';r.parentNode.insertBefore(e,r)}(window,document,'script','ga'));ga('create',"UA-65933410-1",'auto');ga('send','pageview');</script></body></html>