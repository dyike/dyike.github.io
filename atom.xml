<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>一刻笔记</title>
  <subtitle>带着一颗变态的、积极的心走向未来</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://www.dyike.com/"/>
  <updated>2016-09-19T15:51:49.000Z</updated>
  <id>http://www.dyike.com/</id>
  
  <author>
    <name>ityike</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>GDB高效调试的一些小tips</title>
    <link href="http://www.dyike.com/2016/09/19/tips-for-productive-debug-with-gdb/"/>
    <id>http://www.dyike.com/2016/09/19/tips-for-productive-debug-with-gdb/</id>
    <published>2016-09-19T14:23:49.000Z</published>
    <updated>2016-09-19T15:51:49.000Z</updated>
    
    <content type="html">&lt;p&gt;今天来翻译一篇文章，是关于高效使用GDB调试的。&lt;/p&gt;
&lt;h2 id=&quot;建议一：Try-GDB-Dashboard&quot;&gt;&lt;a href=&quot;#建议一：Try-GDB-Dashboard&quot; class=&quot;headerlink&quot; title=&quot;建议一：Try GDB Dashboard&quot;&gt;&lt;/a&gt;建议一：Try GDB Dashboard&lt;/h2&gt;&lt;p&gt;这可能不是你喜欢的“菜”，但像我这样的，喜欢在每一个断点处获得更多的程序信息，所以就尝试GDB仪表板。&lt;/p&gt;
&lt;p&gt;它是一款非常棒的组合式的界面，看起来是这样的：&lt;br&gt;&lt;img src=&quot;https://raw.githubusercontent.com/yf92/yf92.github.io/master/images/gdb/gdb-dashboard.png&quot; alt=&quot;界面&quot;&gt;&lt;/p&gt;
&lt;p&gt;从Github仓库(&lt;a href=&quot;https://github.com/cyrus-and/gdb-dashboard)，能够获取该项目的更多信息,根据你的需求定制你自己的样式。&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;https://github.com/cyrus-and/gdb-dashboard)，能够获取该项目的更多信息,根据你的需求定制你自己的样式。&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&quot;建议二：Use-a-global-gdbinit-and-a-project-gdbinit&quot;&gt;&lt;a href=&quot;#建议二：Use-a-global-gdbinit-and-a-project-gdbinit&quot; class=&quot;headerlink&quot; title=&quot;建议二：Use a global .gdbinit and a project .gdbinit&quot;&gt;&lt;/a&gt;建议二：Use a global .gdbinit and a project .gdbinit&lt;/h2&gt;&lt;p&gt;&lt;code&gt;.gdbinit&lt;/code&gt;是一个配置文件，在gdb启动的时候生效。在你的home目录(~/.gdbinit)可以有一个配置文件做全局设置，或者在当前项目目录 (./.gdbinit)下特定配置。&lt;/p&gt;
&lt;p&gt;正如你从下面的提示可以看到，项目中配置&lt;code&gt;.gdbinit&lt;/code&gt;对gdb设定自定格式或者别名是非常有效的。&lt;/p&gt;
&lt;p&gt;提示：必须用&lt;code&gt;set auto-load local-gdbinit&lt;/code&gt;让项目生成&lt;code&gt;.gdbinit&lt;/code&gt;文件！&lt;/p&gt;
&lt;h2 id=&quot;建议三：Use-custom-formatters&quot;&gt;&lt;a href=&quot;#建议三：Use-custom-formatters&quot; class=&quot;headerlink&quot; title=&quot;建议三：Use custom formatters&quot;&gt;&lt;/a&gt;建议三：Use custom formatters&lt;/h2&gt;&lt;p&gt;通常C/C++如果使用了联合体(unions),在调试器中很难检查的。&lt;/p&gt;
&lt;p&gt;为了让他们更加可读，你可以为你的数据类型设定自定义的格式。参见GDB的Pretty Prining(&lt;a href=&quot;https://sourceware.org/gdb/onlinedocs/gdb/Pretty-Printing.html#Pretty-Printing&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;https://sourceware.org/gdb/onlinedocs/gdb/Pretty-Printing.html#Pretty-Printing&lt;/a&gt;)&lt;/p&gt;
&lt;p&gt;举个例子，在&lt;a href=&quot;https://metricpanda.com/rival-fortress&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Rival Fortress&lt;/a&gt;中有一个矩阵的数据类型(MPEMatrix4),那是许多匿名结构(&lt;a href=&quot;https://gcc.gnu.org/onlinedocs/gcc/Unnamed-Fields.html`&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;anonymous structs&lt;/a&gt;)的一个联合体(union)。这样使用就是为了方便。&lt;/p&gt;
&lt;p&gt;使用了自定义打印格式，前后对比效果如下：&lt;br&gt;&lt;img src=&quot;https://raw.githubusercontent.com/yf92/yf92.github.io/master/images/gdb/gdb-pretty-printing.png&quot; alt=&quot;前后对比&quot;&gt;&lt;/p&gt;
&lt;p&gt;自定义的格式的源码如下：&lt;/p&gt;
&lt;figure class=&quot;highlight c&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;class&lt;/span&gt; MPEMatrixPrinter:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;string&quot;&gt;&quot;&quot;&lt;/span&gt;&lt;span class=&quot;string&quot;&gt;&quot;Print a 4x4 matrix.&quot;&lt;/span&gt;&lt;span class=&quot;string&quot;&gt;&quot;&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  def __init__(self, val, size):&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    self.val = val&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    self.size = &lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt;(size)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  def to_string(self):&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; (&lt;span class=&quot;string&quot;&gt;&quot;\n\t[ %3g %3g %3g %3g ]&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;string&quot;&gt;&quot;\n\t[ %3g %3g %3g %3g ]&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;string&quot;&gt;&quot;\n\t[ %3g %3g %3g %3g ]&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;string&quot;&gt;&quot;\n\t[ %3g %3g %3g %3g ]&quot;&lt;/span&gt;) % \&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                (&lt;span class=&quot;keyword&quot;&gt;float&lt;/span&gt;(self.val[&lt;span class=&quot;string&quot;&gt;&quot;flat&quot;&lt;/span&gt;][&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;]), &lt;span class=&quot;keyword&quot;&gt;float&lt;/span&gt;(self.val[&lt;span class=&quot;string&quot;&gt;&quot;flat&quot;&lt;/span&gt;][&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;]), &lt;span class=&quot;keyword&quot;&gt;float&lt;/span&gt;(self.val[&lt;span class=&quot;string&quot;&gt;&quot;flat&quot;&lt;/span&gt;][&lt;span class=&quot;number&quot;&gt;2&lt;/span&gt;]), &lt;span class=&quot;keyword&quot;&gt;float&lt;/span&gt;(self.val[&lt;span class=&quot;string&quot;&gt;&quot;flat&quot;&lt;/span&gt;][&lt;span class=&quot;number&quot;&gt;3&lt;/span&gt;]),&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                &lt;span class=&quot;keyword&quot;&gt;float&lt;/span&gt;(self.val[&lt;span class=&quot;string&quot;&gt;&quot;flat&quot;&lt;/span&gt;][&lt;span class=&quot;number&quot;&gt;4&lt;/span&gt;]), &lt;span class=&quot;keyword&quot;&gt;float&lt;/span&gt;(self.val[&lt;span class=&quot;string&quot;&gt;&quot;flat&quot;&lt;/span&gt;][&lt;span class=&quot;number&quot;&gt;5&lt;/span&gt;]), &lt;span class=&quot;keyword&quot;&gt;float&lt;/span&gt;(self.val[&lt;span class=&quot;string&quot;&gt;&quot;flat&quot;&lt;/span&gt;][&lt;span class=&quot;number&quot;&gt;6&lt;/span&gt;]), &lt;span class=&quot;keyword&quot;&gt;float&lt;/span&gt;(self.val[&lt;span class=&quot;string&quot;&gt;&quot;flat&quot;&lt;/span&gt;][&lt;span class=&quot;number&quot;&gt;7&lt;/span&gt;]),&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                &lt;span class=&quot;keyword&quot;&gt;float&lt;/span&gt;(self.val[&lt;span class=&quot;string&quot;&gt;&quot;flat&quot;&lt;/span&gt;][&lt;span class=&quot;number&quot;&gt;8&lt;/span&gt;]), &lt;span class=&quot;keyword&quot;&gt;float&lt;/span&gt;(self.val[&lt;span class=&quot;string&quot;&gt;&quot;flat&quot;&lt;/span&gt;][&lt;span class=&quot;number&quot;&gt;9&lt;/span&gt;]), &lt;span class=&quot;keyword&quot;&gt;float&lt;/span&gt;(self.val[&lt;span class=&quot;string&quot;&gt;&quot;flat&quot;&lt;/span&gt;][&lt;span class=&quot;number&quot;&gt;10&lt;/span&gt;]), &lt;span class=&quot;keyword&quot;&gt;float&lt;/span&gt;(self.val[&lt;span class=&quot;string&quot;&gt;&quot;flat&quot;&lt;/span&gt;][&lt;span class=&quot;number&quot;&gt;11&lt;/span&gt;]),&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                &lt;span class=&quot;keyword&quot;&gt;float&lt;/span&gt;(self.val[&lt;span class=&quot;string&quot;&gt;&quot;flat&quot;&lt;/span&gt;][&lt;span class=&quot;number&quot;&gt;12&lt;/span&gt;]), &lt;span class=&quot;keyword&quot;&gt;float&lt;/span&gt;(self.val[&lt;span class=&quot;string&quot;&gt;&quot;flat&quot;&lt;/span&gt;][&lt;span class=&quot;number&quot;&gt;13&lt;/span&gt;]), &lt;span class=&quot;keyword&quot;&gt;float&lt;/span&gt;(self.val[&lt;span class=&quot;string&quot;&gt;&quot;flat&quot;&lt;/span&gt;][&lt;span class=&quot;number&quot;&gt;14&lt;/span&gt;]), &lt;span class=&quot;keyword&quot;&gt;float&lt;/span&gt;(self.val[&lt;span class=&quot;string&quot;&gt;&quot;flat&quot;&lt;/span&gt;][&lt;span class=&quot;number&quot;&gt;15&lt;/span&gt;]))&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;def project_type_lookups(val):&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  lookup_tag = val.type.tag&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; lookup_tag == None:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; None&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  match = re.match(r&lt;span class=&quot;string&quot;&gt;&quot;^MPEMatrix(\d)$&quot;&lt;/span&gt;, lookup_tag)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; match:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; MPEMatrixPrinter(val, match.group(&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;))&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;gdb.pretty_printers.append(project_type_lookups)&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h2 id=&quot;建议四：Use-aliases&quot;&gt;&lt;a href=&quot;#建议四：Use-aliases&quot; class=&quot;headerlink&quot; title=&quot;建议四：Use aliases&quot;&gt;&lt;/a&gt;建议四：Use aliases&lt;/h2&gt;&lt;p&gt;别名能够非常有效地提高调试的效率，在&lt;code&gt;.gdbinit&lt;/code&gt;文件这样设置：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;alias -a w = dashboard expression watch&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h2 id=&quot;建议五：Use-automatic-variables&quot;&gt;&lt;a href=&quot;#建议五：Use-automatic-variables&quot; class=&quot;headerlink&quot; title=&quot;建议五：Use automatic $ variables&quot;&gt;&lt;/a&gt;建议五：Use automatic &lt;code&gt;$&lt;/code&gt; variables&lt;/h2&gt;&lt;p&gt;不管什么时候，使用&lt;code&gt;print&lt;/code&gt;命令检查某些东西，gdb会像这样在一个变量里自动存储结果：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&amp;gt;&amp;gt;&amp;gt; print Identity&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$1 = &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        [   1   0   0   0 ]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        [   0   1   0   0 ]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        [   0   0   1   0 ]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        [   0   0   0   1 ]&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&lt;code&gt;$1&lt;/code&gt;是自动生成的变量，在后面也可这样提取他：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&amp;gt;&amp;gt;&amp;gt; print $1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$2 = &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        [   1   0   0   0 ]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        [   0   1   0   0 ]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        [   0   0   1   0 ]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        [   0   0   0   1 ]&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h2 id=&quot;建议六：Inspect-array-pointers&quot;&gt;&lt;a href=&quot;#建议六：Inspect-array-pointers&quot; class=&quot;headerlink&quot; title=&quot;建议六：Inspect array pointers&quot;&gt;&lt;/a&gt;建议六：Inspect array pointers&lt;/h2&gt;&lt;p&gt;在一个数组里面使用C-style的指针，可以使用下面的命令：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&amp;gt;&amp;gt;&amp;gt; print *Array@10&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;将会打印Array中的10个元素。&lt;/p&gt;
&lt;h2 id=&quot;建议七：Enable-command-history&quot;&gt;&lt;a href=&quot;#建议七：Enable-command-history&quot; class=&quot;headerlink&quot; title=&quot;建议七：Enable command history&quot;&gt;&lt;/a&gt;建议七：Enable command history&lt;/h2&gt;&lt;p&gt;设置命令历史记录，在&lt;code&gt;.gdbinit&lt;/code&gt;文件中设置：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;set history save on&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;在当前目录下默认保存的历史文件(&lt;code&gt;.gdb_history&lt;/code&gt;)，但是可以设定输出文件名：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;set history filename &amp;lt;fname&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h2 id=&quot;建议八：Detect-if-the-debugger-is-running&quot;&gt;&lt;a href=&quot;#建议八：Detect-if-the-debugger-is-running&quot; class=&quot;headerlink&quot; title=&quot;建议八：Detect if the debugger is running&quot;&gt;&lt;/a&gt;建议八：Detect if the debugger is running&lt;/h2&gt;&lt;p&gt;这个其实不是关于gdb调试，但是非常的有用。&lt;/p&gt;
&lt;p&gt;在windows系统里可以使用&lt;code&gt;IsDebuggerPresent&lt;/code&gt;(&lt;a href=&quot;https://msdn.microsoft.com/en-us/library/windows/desktop/ms680345(v=vs.85).aspx)函数来判断debugger是否在运行。&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;https://msdn.microsoft.com/en-us/library/windows/desktop/ms680345(v=vs.85).aspx)函数来判断debugger是否在运行。&lt;/a&gt;&lt;br&gt;在Unix系统也是可以这样使用的：&lt;/p&gt;
&lt;figure class=&quot;highlight c&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;meta&quot;&gt;#&lt;span class=&quot;meta-keyword&quot;&gt;ifndef&lt;/span&gt; _WIN32&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;meta&quot;&gt;#&lt;span class=&quot;meta-keyword&quot;&gt;include&lt;/span&gt; &lt;span class=&quot;meta-string&quot;&gt;&amp;lt;sys/ptrace.h&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;IsDebuggerPresent&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;()&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt; Detected;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt; RunningUnderDebugger;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (!Detected)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    Detected = &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    RunningUnderDebugger = ptrace(PTRACE_TRACEME, &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;) == &lt;span class=&quot;number&quot;&gt;-1&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; RunningUnderDebugger;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;meta&quot;&gt;#&lt;span class=&quot;meta-keyword&quot;&gt;endif&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;今天来翻译一篇文章，是关于高效使用GDB调试的。&lt;/p&gt;
&lt;h2 id=&quot;建议一：Try-GDB-Dashboard&quot;&gt;&lt;a href=&quot;#建议一：Try-GDB-Dashboard&quot; class=&quot;headerlink&quot; title=&quot;建议一：Try GDB Dashbo
    
    </summary>
    
    
      <category term="GDB" scheme="http://www.dyike.com/tags/GDB/"/>
    
  </entry>
  
  <entry>
    <title>GDB高效调试的一些小tips</title>
    <link href="http://www.dyike.com/2016/09/19/tips-for-productive-debugging-with-gdb/"/>
    <id>http://www.dyike.com/2016/09/19/tips-for-productive-debugging-with-gdb/</id>
    <published>2016-09-19T14:23:49.000Z</published>
    <updated>2016-09-19T15:49:57.000Z</updated>
    
    <content type="html">&lt;p&gt;今天来翻译一篇文章，是关于高效使用GDB调试的。&lt;/p&gt;
&lt;h2 id=&quot;建议一：Try-GDB-Dashboard&quot;&gt;&lt;a href=&quot;#建议一：Try-GDB-Dashboard&quot; class=&quot;headerlink&quot; title=&quot;建议一：Try GDB Dashboard&quot;&gt;&lt;/a&gt;建议一：Try GDB Dashboard&lt;/h2&gt;&lt;p&gt;这可能不是你喜欢的“菜”，但像我这样的，喜欢在每一个断点处获得更多的程序信息，所以就尝试GDB仪表板。&lt;/p&gt;
&lt;p&gt;它是一款非常棒的组合式的界面，看起来是这样的：&lt;br&gt;&lt;img src=&quot;https://raw.githubusercontent.com/yf92/yf92.github.io/master/images/gdb/gdb-dashboard.png&quot; alt=&quot;界面&quot;&gt;&lt;/p&gt;
&lt;p&gt;从Github仓库(&lt;a href=&quot;https://github.com/cyrus-and/gdb-dashboard)，能够获取该项目的更多信息,根据你的需求定制你自己的样式。&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;https://github.com/cyrus-and/gdb-dashboard)，能够获取该项目的更多信息,根据你的需求定制你自己的样式。&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&quot;建议二：Use-a-global-gdbinit-and-a-project-gdbinit&quot;&gt;&lt;a href=&quot;#建议二：Use-a-global-gdbinit-and-a-project-gdbinit&quot; class=&quot;headerlink&quot; title=&quot;建议二：Use a global .gdbinit and a project .gdbinit&quot;&gt;&lt;/a&gt;建议二：Use a global .gdbinit and a project .gdbinit&lt;/h2&gt;&lt;p&gt;&lt;code&gt;.gdbinit&lt;/code&gt;是一个配置文件，在gdb启动的时候生效。在你的home目录(~/.gdbinit)可以有一个配置文件做全局设置，或者在当前项目目录 (./.gdbinit)下特定配置。&lt;/p&gt;
&lt;p&gt;正如你从下面的提示可以看到，项目中配置&lt;code&gt;.gdbinit&lt;/code&gt;对gdb设定自定格式或者别名是非常有效的。&lt;/p&gt;
&lt;p&gt;提示：必须用&lt;code&gt;set auto-load local-gdbinit&lt;/code&gt;让项目生成&lt;code&gt;.gdbinit&lt;/code&gt;文件！&lt;/p&gt;
&lt;h2 id=&quot;建议三：Use-custom-formatters&quot;&gt;&lt;a href=&quot;#建议三：Use-custom-formatters&quot; class=&quot;headerlink&quot; title=&quot;建议三：Use custom formatters&quot;&gt;&lt;/a&gt;建议三：Use custom formatters&lt;/h2&gt;&lt;p&gt;通常C/C++如果使用了联合体(unions),在调试器中很难检查的。&lt;/p&gt;
&lt;p&gt;为了让他们更加可读，你可以为你的数据类型设定自定义的格式。参见GDB的Pretty Prining(&lt;a href=&quot;https://sourceware.org/gdb/onlinedocs/gdb/Pretty-Printing.html#Pretty-Printing&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;https://sourceware.org/gdb/onlinedocs/gdb/Pretty-Printing.html#Pretty-Printing&lt;/a&gt;)&lt;/p&gt;
&lt;p&gt;举个例子，在&lt;a href=&quot;https://metricpanda.com/rival-fortress&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Rival Fortress&lt;/a&gt;中有一个矩阵的数据类型(MPEMatrix4),那是许多匿名结构(&lt;a href=&quot;https://gcc.gnu.org/onlinedocs/gcc/Unnamed-Fields.html`&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;anonymous structs&lt;/a&gt;)的一个联合体(union)。这样使用就是为了方便。&lt;/p&gt;
&lt;p&gt;使用了自定义打印格式，前后对比效果如下：&lt;br&gt;&lt;img src=&quot;https://raw.githubusercontent.com/yf92/yf92.github.io/master/images/gdb/gdb-pretty-printing.png&quot; alt=&quot;前后对比&quot;&gt;&lt;/p&gt;
&lt;p&gt;自定义的格式的源码如下：&lt;/p&gt;
&lt;figure class=&quot;highlight c&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;class&lt;/span&gt; MPEMatrixPrinter:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;string&quot;&gt;&quot;&quot;&lt;/span&gt;&lt;span class=&quot;string&quot;&gt;&quot;Print a 4x4 matrix.&quot;&lt;/span&gt;&lt;span class=&quot;string&quot;&gt;&quot;&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  def __init__(self, val, size):&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    self.val = val&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    self.size = &lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt;(size)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  def to_string(self):&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; (&lt;span class=&quot;string&quot;&gt;&quot;\n\t[ %3g %3g %3g %3g ]&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;string&quot;&gt;&quot;\n\t[ %3g %3g %3g %3g ]&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;string&quot;&gt;&quot;\n\t[ %3g %3g %3g %3g ]&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;string&quot;&gt;&quot;\n\t[ %3g %3g %3g %3g ]&quot;&lt;/span&gt;) % \&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                (&lt;span class=&quot;keyword&quot;&gt;float&lt;/span&gt;(self.val[&lt;span class=&quot;string&quot;&gt;&quot;flat&quot;&lt;/span&gt;][&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;]), &lt;span class=&quot;keyword&quot;&gt;float&lt;/span&gt;(self.val[&lt;span class=&quot;string&quot;&gt;&quot;flat&quot;&lt;/span&gt;][&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;]), &lt;span class=&quot;keyword&quot;&gt;float&lt;/span&gt;(self.val[&lt;span class=&quot;string&quot;&gt;&quot;flat&quot;&lt;/span&gt;][&lt;span class=&quot;number&quot;&gt;2&lt;/span&gt;]), &lt;span class=&quot;keyword&quot;&gt;float&lt;/span&gt;(self.val[&lt;span class=&quot;string&quot;&gt;&quot;flat&quot;&lt;/span&gt;][&lt;span class=&quot;number&quot;&gt;3&lt;/span&gt;]),&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                &lt;span class=&quot;keyword&quot;&gt;float&lt;/span&gt;(self.val[&lt;span class=&quot;string&quot;&gt;&quot;flat&quot;&lt;/span&gt;][&lt;span class=&quot;number&quot;&gt;4&lt;/span&gt;]), &lt;span class=&quot;keyword&quot;&gt;float&lt;/span&gt;(self.val[&lt;span class=&quot;string&quot;&gt;&quot;flat&quot;&lt;/span&gt;][&lt;span class=&quot;number&quot;&gt;5&lt;/span&gt;]), &lt;span class=&quot;keyword&quot;&gt;float&lt;/span&gt;(self.val[&lt;span class=&quot;string&quot;&gt;&quot;flat&quot;&lt;/span&gt;][&lt;span class=&quot;number&quot;&gt;6&lt;/span&gt;]), &lt;span class=&quot;keyword&quot;&gt;float&lt;/span&gt;(self.val[&lt;span class=&quot;string&quot;&gt;&quot;flat&quot;&lt;/span&gt;][&lt;span class=&quot;number&quot;&gt;7&lt;/span&gt;]),&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                &lt;span class=&quot;keyword&quot;&gt;float&lt;/span&gt;(self.val[&lt;span class=&quot;string&quot;&gt;&quot;flat&quot;&lt;/span&gt;][&lt;span class=&quot;number&quot;&gt;8&lt;/span&gt;]), &lt;span class=&quot;keyword&quot;&gt;float&lt;/span&gt;(self.val[&lt;span class=&quot;string&quot;&gt;&quot;flat&quot;&lt;/span&gt;][&lt;span class=&quot;number&quot;&gt;9&lt;/span&gt;]), &lt;span class=&quot;keyword&quot;&gt;float&lt;/span&gt;(self.val[&lt;span class=&quot;string&quot;&gt;&quot;flat&quot;&lt;/span&gt;][&lt;span class=&quot;number&quot;&gt;10&lt;/span&gt;]), &lt;span class=&quot;keyword&quot;&gt;float&lt;/span&gt;(self.val[&lt;span class=&quot;string&quot;&gt;&quot;flat&quot;&lt;/span&gt;][&lt;span class=&quot;number&quot;&gt;11&lt;/span&gt;]),&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                &lt;span class=&quot;keyword&quot;&gt;float&lt;/span&gt;(self.val[&lt;span class=&quot;string&quot;&gt;&quot;flat&quot;&lt;/span&gt;][&lt;span class=&quot;number&quot;&gt;12&lt;/span&gt;]), &lt;span class=&quot;keyword&quot;&gt;float&lt;/span&gt;(self.val[&lt;span class=&quot;string&quot;&gt;&quot;flat&quot;&lt;/span&gt;][&lt;span class=&quot;number&quot;&gt;13&lt;/span&gt;]), &lt;span class=&quot;keyword&quot;&gt;float&lt;/span&gt;(self.val[&lt;span class=&quot;string&quot;&gt;&quot;flat&quot;&lt;/span&gt;][&lt;span class=&quot;number&quot;&gt;14&lt;/span&gt;]), &lt;span class=&quot;keyword&quot;&gt;float&lt;/span&gt;(self.val[&lt;span class=&quot;string&quot;&gt;&quot;flat&quot;&lt;/span&gt;][&lt;span class=&quot;number&quot;&gt;15&lt;/span&gt;]))&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;def project_type_lookups(val):&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  lookup_tag = val.type.tag&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; lookup_tag == None:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; None&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  match = re.match(r&lt;span class=&quot;string&quot;&gt;&quot;^MPEMatrix(\d)$&quot;&lt;/span&gt;, lookup_tag)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; match:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; MPEMatrixPrinter(val, match.group(&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;))&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;gdb.pretty_printers.append(project_type_lookups)&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h2 id=&quot;建议四：Use-aliases&quot;&gt;&lt;a href=&quot;#建议四：Use-aliases&quot; class=&quot;headerlink&quot; title=&quot;建议四：Use aliases&quot;&gt;&lt;/a&gt;建议四：Use aliases&lt;/h2&gt;&lt;p&gt;别名能够非常有效地提高调试的效率，在&lt;code&gt;.gdbinit&lt;/code&gt;文件这样设置：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;alias -a w = dashboard expression watch&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h2 id=&quot;建议五：Use-automatic-variables&quot;&gt;&lt;a href=&quot;#建议五：Use-automatic-variables&quot; class=&quot;headerlink&quot; title=&quot;建议五：Use automatic $ variables&quot;&gt;&lt;/a&gt;建议五：Use automatic &lt;code&gt;$&lt;/code&gt; variables&lt;/h2&gt;&lt;p&gt;不管什么时候，使用&lt;code&gt;print&lt;/code&gt;命令检查某些东西，gdb会像这样在一个变量里自动存储结果：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&amp;gt;&amp;gt;&amp;gt; print Identity&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$1 = &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        [   1   0   0   0 ]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        [   0   1   0   0 ]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        [   0   0   1   0 ]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        [   0   0   0   1 ]&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&lt;code&gt;$1&lt;/code&gt;是自动生成的变量，在后面也可这样提取他：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&amp;gt;&amp;gt;&amp;gt; print $1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$2 = &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        [   1   0   0   0 ]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        [   0   1   0   0 ]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        [   0   0   1   0 ]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        [   0   0   0   1 ]&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h2 id=&quot;建议六：Inspect-array-pointers&quot;&gt;&lt;a href=&quot;#建议六：Inspect-array-pointers&quot; class=&quot;headerlink&quot; title=&quot;建议六：Inspect array pointers&quot;&gt;&lt;/a&gt;建议六：Inspect array pointers&lt;/h2&gt;&lt;p&gt;在一个数组里面使用C-style的指针，可以使用下面的命令：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&amp;gt;&amp;gt;&amp;gt; print *Array@10&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;将会打印Array中的10个元素。&lt;/p&gt;
&lt;h2 id=&quot;建议七：Enable-command-history&quot;&gt;&lt;a href=&quot;#建议七：Enable-command-history&quot; class=&quot;headerlink&quot; title=&quot;建议七：Enable command history&quot;&gt;&lt;/a&gt;建议七：Enable command history&lt;/h2&gt;&lt;p&gt;设置命令历史记录，在&lt;code&gt;.gdbinit&lt;/code&gt;文件中设置：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;set history save on&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;在当前目录下默认保存的历史文件(&lt;code&gt;.gdb_history&lt;/code&gt;)，但是可以设定输出文件名：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;set history filename &amp;lt;fname&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h2 id=&quot;建议八：Detect-if-the-debugger-is-running&quot;&gt;&lt;a href=&quot;#建议八：Detect-if-the-debugger-is-running&quot; class=&quot;headerlink&quot; title=&quot;建议八：Detect if the debugger is running&quot;&gt;&lt;/a&gt;建议八：Detect if the debugger is running&lt;/h2&gt;&lt;p&gt;这个其实不是关于gdb调试，但是非常的有用。&lt;/p&gt;
&lt;p&gt;在windows系统里可以使用&lt;code&gt;IsDebuggerPresent&lt;/code&gt;(&lt;a href=&quot;https://msdn.microsoft.com/en-us/library/windows/desktop/ms680345(v=vs.85).aspx)函数来判断debugger是否在运行。&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;https://msdn.microsoft.com/en-us/library/windows/desktop/ms680345(v=vs.85).aspx)函数来判断debugger是否在运行。&lt;/a&gt;&lt;br&gt;在Unix系统也是可以这样使用的：&lt;/p&gt;
&lt;figure class=&quot;highlight c&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;meta&quot;&gt;#&lt;span class=&quot;meta-keyword&quot;&gt;ifndef&lt;/span&gt; _WIN32&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;meta&quot;&gt;#&lt;span class=&quot;meta-keyword&quot;&gt;include&lt;/span&gt; &lt;span class=&quot;meta-string&quot;&gt;&amp;lt;sys/ptrace.h&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;IsDebuggerPresent&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;()&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt; Detected;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt; RunningUnderDebugger;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (!Detected)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    Detected = &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    RunningUnderDebugger = ptrace(PTRACE_TRACEME, &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;) == &lt;span class=&quot;number&quot;&gt;-1&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; RunningUnderDebugger;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;meta&quot;&gt;#&lt;span class=&quot;meta-keyword&quot;&gt;endif&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;今天来翻译一篇文章，是关于高效使用GDB调试的。&lt;/p&gt;
&lt;h2 id=&quot;建议一：Try-GDB-Dashboard&quot;&gt;&lt;a href=&quot;#建议一：Try-GDB-Dashboard&quot; class=&quot;headerlink&quot; title=&quot;建议一：Try GDB Dashbo
    
    </summary>
    
    
      <category term="GDB" scheme="http://www.dyike.com/tags/GDB/"/>
    
  </entry>
  
  <entry>
    <title>PHP单元测试的学习整理</title>
    <link href="http://www.dyike.com/2016/09/12/php-unint-test/"/>
    <id>http://www.dyike.com/2016/09/12/php-unint-test/</id>
    <published>2016-09-12T08:05:52.000Z</published>
    <updated>2016-09-12T08:38:50.000Z</updated>
    
    <content type="html">&lt;p&gt;最近学习了一点PHP单元测试的东西，这里做一个简单的整理。&lt;/p&gt;
&lt;h2 id=&quot;什么是单元测试？&quot;&gt;&lt;a href=&quot;#什么是单元测试？&quot; class=&quot;headerlink&quot; title=&quot;什么是单元测试？&quot;&gt;&lt;/a&gt;什么是单元测试？&lt;/h2&gt;&lt;p&gt;单元测试将你的程序代码进行隔离并证明这个单个部件是正确的。通常情况下，单元测试是非常小、快并且简短的代码片段——比如一个方法。&lt;/p&gt;
&lt;h2 id=&quot;这样做有什么好处？&quot;&gt;&lt;a href=&quot;#这样做有什么好处？&quot; class=&quot;headerlink&quot; title=&quot;这样做有什么好处？&quot;&gt;&lt;/a&gt;这样做有什么好处？&lt;/h2&gt;&lt;p&gt;可以保证代码的简洁，增强代码的可读性，同时还有利于编写更多有意义的代码，能减少代码的bug数量等等好处。&lt;/p&gt;
&lt;h4 id=&quot;从手动测试到单元测试&quot;&gt;&lt;a href=&quot;#从手动测试到单元测试&quot; class=&quot;headerlink&quot; title=&quot;从手动测试到单元测试:&quot;&gt;&lt;/a&gt;从手动测试到单元测试:&lt;/h4&gt;&lt;p&gt;之前测试(调试)代码的时候基本是这样的：编写代码——&amp;gt;打开浏览器——&amp;gt;给定不同的输入条件——&amp;gt;看输出的结果是否符合预期的结果。对，这个就是手动测试，是对功能设计的测试，不是对我们的代码进行测试。&lt;/p&gt;
&lt;p&gt;现在我们想要做的是自动测试，不再像上面说的那样死板的东西。有两种主要的方法可以达到如此效果——TDD(test-driven development)测试驱动开发 和 BDD(behavior-driven development)行为驱动开发。&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;TDD是非常简短的，在编写业务代码之前编写测试用例，这种方式依赖于单元测试。正如前面提到的，单元测试是简短的、容易编写的代码片段，也就是说你的业务代码要确保被单元测试的代码所覆盖。TDD的大概流程是针对于每个功能点抽象出接口代码——&amp;gt;编写单元测试的代码——&amp;gt;实现接口——&amp;gt;运行单元测试代码，循环此过程，直到整个单元测试都通过。这样做的好处是：减少代码逻辑的错误，尽可能减少项目中的bug。当然不是所有的项目都适合TDD这个方式。那使用TDD都是在什么情景下呢？&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;(1) 对项目的需求足够的了解 &lt;/li&gt;
&lt;li&gt;(2)项目本身的复杂度和依赖性，如果一个项目极其复杂，模块之间又是相互依赖，这种情况下，TDD反正会增大拆分接口和编写测试用例的工作量。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;BDD,另一种单元测试的方式，就必须要对某些行为要有具体的期望，这样测试才会有意义！&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&quot;一些讨论&quot;&gt;&lt;a href=&quot;#一些讨论&quot; class=&quot;headerlink&quot; title=&quot;一些讨论&quot;&gt;&lt;/a&gt;一些讨论&lt;/h2&gt;&lt;p&gt;写到这里，对每样东西每个人的看法都是不一样，对单元测试也是这样。也有人反对单元测试，每个东西不会是十全十美，当然了我写这篇文章肯定要夸单元测试的好处。现在不妨来讨论讨论。&lt;/p&gt;
&lt;h4 id=&quot;编写测试用例浪费很多时间？&quot;&gt;&lt;a href=&quot;#编写测试用例浪费很多时间？&quot; class=&quot;headerlink&quot; title=&quot;编写测试用例浪费很多时间？&quot;&gt;&lt;/a&gt;编写测试用例浪费很多时间？&lt;/h4&gt;&lt;p&gt;首先需要说明的是，编写测试用例代码(额外的代码)显而易见是需要花时间的。对的，这个不只是花费时间的唯一因素。当我们编写完一个项目的业务逻辑的代码，过了好几个月，回过头来去看我们自己的代码，就要花费很长时间去理解我当初为什么要这样编写而不那样编写。也有可能是花费时间去理解别人的代码。fix bug的时候也需要花费时间在自己的代码中穿行。如果我们使用第三方的一些库，库被修改，我们也需要花很多时间review我们的代码……这些时间加起来是不是要比编写测试用例的代码还要多得多。&lt;br&gt;甚至还有人抱怨说，“我编写了测试用例的代码，并没有找到bug，这不是浪费时间？是什么？”既然你编写了测试用例，当你修改了某个部分的代码时，就可以帮你检查出来。至少这样你不需要手动测试你哪些修改过的代码。&lt;/p&gt;
&lt;h4 id=&quot;我的代码，我了解，我不需要测试？&quot;&gt;&lt;a href=&quot;#我的代码，我了解，我不需要测试？&quot; class=&quot;headerlink&quot; title=&quot;我的代码，我了解，我不需要测试？&quot;&gt;&lt;/a&gt;我的代码，我了解，我不需要测试？&lt;/h4&gt;&lt;p&gt;有的时候，我们第一次编写业务逻辑代码是非常清晰的，但过了一段时间我们总要花费一点时间来理解当初编写业务逻辑的代码。我们写的测试用例的方法通常有五六行代码组成，但这些方法可用于不同的服务器、不同版本的脚本语言环境。&lt;/p&gt;
&lt;h4 id=&quot;不可能测试所有的差异？&quot;&gt;&lt;a href=&quot;#不可能测试所有的差异？&quot; class=&quot;headerlink&quot; title=&quot;不可能测试所有的差异？&quot;&gt;&lt;/a&gt;不可能测试所有的差异？&lt;/h4&gt;&lt;p&gt;这个答案是肯定的，不可能测试所有的差异。但一个单元能够帮你展示你所能覆盖测试的差异。如果你能够根据非单元测试覆盖测试出的差异来保证应用的正常运行，你可以扩展你的测试范围。举个栗子，当你用某个确定的整数作为输入条件成功跑通了程序，你可以扩展这个测试范围，用0、非整数或者其他作为输入条件进行测试。&lt;/p&gt;
&lt;h4 id=&quot;编写测试用例难？&quot;&gt;&lt;a href=&quot;#编写测试用例难？&quot; class=&quot;headerlink&quot; title=&quot;编写测试用例难？&quot;&gt;&lt;/a&gt;编写测试用例难？&lt;/h4&gt;&lt;p&gt;编写测试用例很简单，编写nice的测试用例难。这需要一个实践的过程！&lt;/p&gt;
&lt;p&gt;总之，学习单元测试是需要花费时间的。即便你是第一次使用单元测试，但这个学习曲线很短而且是有回报的。何乐而不为呢？&lt;/p&gt;
&lt;h3 id=&quot;补充几点：&quot;&gt;&lt;a href=&quot;#补充几点：&quot; class=&quot;headerlink&quot; title=&quot;补充几点：&quot;&gt;&lt;/a&gt;补充几点：&lt;/h3&gt;&lt;h4 id=&quot;测试功能&quot;&gt;&lt;a href=&quot;#测试功能&quot; class=&quot;headerlink&quot; title=&quot;测试功能&quot;&gt;&lt;/a&gt;测试功能&lt;/h4&gt;&lt;p&gt;编写代码的时候，&lt;code&gt;print_r()&lt;/code&gt;和&lt;code&gt;var_dump()&lt;/code&gt;确实是一个非常友好的测试，但是没有真正达到测试的目的。手动测试也是比较花费时间、无聊的。当你因为某个功能要修改的旧代码、或因为某个bug要修改某块代码的时候，此时你需要一些东西来测试你的代码是否还有你想要的功能。手动测试前，通常要列出所有输入值（如：负数、0、字符串等等）如果某次测试你忘记了测试字符串的情况就将代码部署到生产环境了。单元测试，不会发生这种事情。&lt;/p&gt;
&lt;h4 id=&quot;重构&quot;&gt;&lt;a href=&quot;#重构&quot; class=&quot;headerlink&quot; title=&quot;重构&quot;&gt;&lt;/a&gt;重构&lt;/h4&gt;&lt;p&gt;对变量、方法重命名以增强代码的可读性，此时要小心重命名会不会带来新的bug和冲突。有的时候，有些代码跟目标功能一点关联都没有，显然，可以删除这样的代码，但你需要检查剩余的代码还是能够正常工作的。&lt;/p&gt;
&lt;h4 id=&quot;代码质量&quot;&gt;&lt;a href=&quot;#代码质量&quot; class=&quot;headerlink&quot; title=&quot;代码质量&quot;&gt;&lt;/a&gt;代码质量&lt;/h4&gt;&lt;p&gt;测试运行是隔离的。进行测试就是在证明当前代码片段不依赖其他代码块。&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;最近学习了一点PHP单元测试的东西，这里做一个简单的整理。&lt;/p&gt;
&lt;h2 id=&quot;什么是单元测试？&quot;&gt;&lt;a href=&quot;#什么是单元测试？&quot; class=&quot;headerlink&quot; title=&quot;什么是单元测试？&quot;&gt;&lt;/a&gt;什么是单元测试？&lt;/h2&gt;&lt;p&gt;单元测试将你的程序
    
    </summary>
    
    
      <category term="php" scheme="http://www.dyike.com/tags/php/"/>
    
  </entry>
  
  <entry>
    <title>来杭州入职一个月了，记录点啥呢？</title>
    <link href="http://www.dyike.com/2016/09/01/hang-zhou-one-month/"/>
    <id>http://www.dyike.com/2016/09/01/hang-zhou-one-month/</id>
    <published>2016-09-01T14:34:43.000Z</published>
    <updated>2016-09-01T15:33:36.000Z</updated>
    
    <content type="html">&lt;p&gt;不知道不觉，来杭州一个月零两天，入职一个月了，上个月1号入职的，还是挺好记的。来杭州一个的时间，还感觉是在梦里一样。没想到我就来到杭州了，从毕业前到毕业后的半个多月里，我都没有想到过我会回到南方。可能是之前感觉一切都太顺利了，自己成功地避开了一些弯路。其实那样对自己的成长来说是不利的，最后自己还是走上应该要走的路径，这可能就是来杭州的原因了。&lt;/p&gt;
&lt;p&gt;杭州对我来说，虽然离家很近，三个多小时的车程就能到家，但给我的感觉还是挺陌生的，在这个城市没有什么亲人，没有什么朋友，没有什么同学。说同学的话也就公司有一个初中同学，还是她帮我内推的简历呢。北京待久了，习惯了那里的一切，认识的朋友也都在那里，感觉那里就是很好的。其实这样认为是不对的，年轻人要敢于适应新的环境，至少我现在发现了杭州的水要北京的水好很多很多很多，还有他们说的很多漂亮妹子（虽然我没有见过）。&lt;/p&gt;
&lt;p&gt;还记得三月份的时候，去新浪面试。现在看来那个面试，那个时候的我真的是啥都不会，面试也很糟糕，记得当时胡波问郝明“你是不是把人家问怕了？”，后来胡波说了一句“年轻人这点儿就怕了？要敢于挑战”。在微博的三个月里，对自己的成长挺大的，给了一个机会，让我真正操练起PHP，还见识了靠谱的正超、士博、胡波、周老大……（太多了，不一一说了）还有那个张健，恭喜一下现在是超级奶爸。谢谢你们给了我很大的帮助，你们教的东西，现在好多用上了。嘿嘿&lt;/p&gt;
&lt;h2 id=&quot;生活&quot;&gt;&lt;a href=&quot;#生活&quot; class=&quot;headerlink&quot; title=&quot;生活&quot;&gt;&lt;/a&gt;生活&lt;/h2&gt;&lt;p&gt;来杭州后，再也没有自己做过饭了，是因为自己变懒了吗？差不多也是，再这样下去，好像连熬粥都不会了，更别说烧什么红烧排骨，写到这儿都想吃排骨了😭早餐也不怎么吃了，过得挺没规律的，这个得批评一下自己。生活上其他也没什么了，基本没有什么大的变化，依然爱干净、有轻微洁癖。去超市也不怎么买零食，也就买水果和啤酒。&lt;/p&gt;
&lt;h2 id=&quot;工作&quot;&gt;&lt;a href=&quot;#工作&quot; class=&quot;headerlink&quot; title=&quot;工作&quot;&gt;&lt;/a&gt;工作&lt;/h2&gt;&lt;p&gt;一个月时间，项目也熟悉得差不多了。对zend框架的学习还需要进一步深入（虽然我到现在都没有看文档就胡乱写起了，虽然不太喜欢这个框架，但还是有值得学习的东西）。对于业余时间，就写点前端的东西或者go语言的beego框架。总之，在技术上，要对自己要制定一个目标计划，不能尽瞎搞，什么都搞，什么都不精。工作上的其他就不说了。&lt;/p&gt;
&lt;h2 id=&quot;其他&quot;&gt;&lt;a href=&quot;#其他&quot; class=&quot;headerlink&quot; title=&quot;其他&quot;&gt;&lt;/a&gt;其他&lt;/h2&gt;&lt;p&gt;来杭州还狠心地买下了Dell的4K屏，虽然最近在吃土，写代码啥的真的很舒服，以至于我现在都后悔把显示器从公司搬回来，早知道就应该放在公司，我每天在公司用的显示器的时间比在家的时间多多了，工作日都要有一个很糟糕的切换——4K-&amp;gt;1080P-&amp;gt;4K。&lt;/p&gt;
&lt;p&gt;用的笔记本是去年暑假自己买的13寸的中配MacBook Pro，到现在使用了一年多了，体验还好。最近发现电池像是不经用啊，貌似是跟我两三个月没关机有关。这个东西，早买早体验。&lt;/p&gt;
&lt;p&gt;从北京到杭州托运行李，整理的行李的时候，发现之前的玩的硬件又好久没完了，这一个月里拿出来完了一次，有时间还是要多折腾，感觉这些东西还很有意思的。&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;不知道不觉，来杭州一个月零两天，入职一个月了，上个月1号入职的，还是挺好记的。来杭州一个的时间，还感觉是在梦里一样。没想到我就来到杭州了，从毕业前到毕业后的半个多月里，我都没有想到过我会回到南方。可能是之前感觉一切都太顺利了，自己成功地避开了一些弯路。其实那样对自己的成长来
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>我是这样理解PHP中trait</title>
    <link href="http://www.dyike.com/2016/08/25/php-trait/"/>
    <id>http://www.dyike.com/2016/08/25/php-trait/</id>
    <published>2016-08-25T07:50:22.000Z</published>
    <updated>2016-08-25T09:01:16.000Z</updated>
    
    <content type="html">&lt;p&gt;有这样一天，我要去找工作了，虽然我是从三月份开始接触PHP，到现在也就四五个月的样子，面试的时候【才接触三个多月】只要不是那种傻叉的面试官，基本不回你过深的PHP知识，也就是围绕你学过的C/C++啥的问问。&lt;/p&gt;
&lt;p&gt;一共面了三家，三家都问了同样的一个问题：&lt;code&gt;说说你理解中的C++中的封装、继承、多态。&lt;/code&gt; 这个问题吧，你怎么答都行，毕竟是你自己理解的。第一次吱吱呜呜说了一些，最后感觉自己都不知道自己在说什么。后来就自己总结，看到网上有一个从生物学的角度解释了一番，感觉还可以至少通俗易懂。后来又继续深入总结，在继承这一块，发现PHP虽然是单继承的语言，但还有一个比较特殊的东西，就是trait。这个翻译成中文还有比较奇葩的翻译——性状。一般我们都叫特性，或者直接叫trait。&lt;/p&gt;
&lt;p&gt;可能好多人跟我一样有一个困惑：之前我接触PHP的时候，至少我在项目中没有发现使用过这个。后来也就是在毕设中，看到laravel的源码就使用了这个，那个时候也没有深入了解这个东西，看着像一个class。其实trait并不是一个很新的东西，在PHP5.4中加入的一种代码复用的语法，只是很少被关注而已。trait让PHP突破单继承的限制。&lt;/p&gt;
&lt;p&gt;下面就看看一个简单的例子：&lt;/p&gt;
&lt;figure class=&quot;highlight php&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;32&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;meta&quot;&gt;&amp;lt;?php&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;trait&lt;/span&gt; Hello &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;getHello&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;()&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&quot;Hello&quot;&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;trait&lt;/span&gt; World &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;getWorld&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;()&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&quot;World&quot;&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;class&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;HelloWorld&lt;/span&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;use&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;Hello&lt;/span&gt;, &lt;span class=&quot;title&quot;&gt;World&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;sayHelloWorld&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;()&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&quot;!&quot;&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$hw = &lt;span class=&quot;keyword&quot;&gt;new&lt;/span&gt; HelloWorld();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$hw-&amp;gt;getHello();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$hw-&amp;gt;getWorld();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$hw-&amp;gt;sayHelloWorld();&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;上面的例子可以看出，trait像一个class,可以在写各种属性和方法，然后通过use关键字声明列出trait。由于PHP是单继承的语言，如果你想要继承多个基类，这个时候就需要将这些基类组合，而且这种组合是层叠，最终的效果就是一个树状的结构，但有了trait，就可以随意组合，结构简单。是不是很方便？我们在编写自己的代码前，我们可以把一些属性进行合理的划分，放在一个trait，让代码片段复用，耦合性低，代码清晰可读。&lt;/p&gt;
&lt;p&gt;当然了还有一些需要注意的是，什么叫代码合理拆分，而不是将三两个相同的代码片段放到trait中，而是根据自己的需求来决定。&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;有这样一天，我要去找工作了，虽然我是从三月份开始接触PHP，到现在也就四五个月的样子，面试的时候【才接触三个多月】只要不是那种傻叉的面试官，基本不回你过深的PHP知识，也就是围绕你学过的C/C++啥的问问。&lt;/p&gt;
&lt;p&gt;一共面了三家，三家都问了同样的一个问题：&lt;code&gt;
    
    </summary>
    
    
      <category term="PHP" scheme="http://www.dyike.com/tags/PHP/"/>
    
  </entry>
  
  <entry>
    <title>聊聊PHP中的组件开发</title>
    <link href="http://www.dyike.com/2016/08/21/php-components-development/"/>
    <id>http://www.dyike.com/2016/08/21/php-components-development/</id>
    <published>2016-08-21T04:10:43.000Z</published>
    <updated>2016-08-21T08:44:30.000Z</updated>
    
    <content type="html">&lt;p&gt;曾经有这样一个故事：&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;小李：超哥啊，我想要写个脚本去注册域名，按照汉字组词拼音来注册域名，发现市面上的汉字词组转拼音的工具不好用啊，都TM是个什么烂鬼。&lt;br&gt;超哥：恩，我去看了一下，确实都不好用啊。放心吧，这下我又可以造轮子了。&lt;br&gt;……&lt;br&gt;几天后，超哥什么话也没有说，向小李抛了一个包，你拿去用吧。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;当我们开始一个新的项目，首先我们需要考虑如何进行开发？&lt;br&gt;通常情况下，可能的方式有：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;手动创建&lt;/li&gt;
&lt;li&gt;选择合适的框架(比如说Laravel)&lt;/li&gt;
&lt;li&gt;组件式开发（Components Development）?&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;靠，what is component？&lt;br&gt;严格地说，PHP组件就是一系列相关的类、接口和特性(trait)来解决某个特定的问题。组件中的类、接口和特性通常是放在同一个命名空间中。&lt;/p&gt;
&lt;p&gt;可能你又会想，为什么我要使用PHP组件？这个问题问得不错！&lt;/p&gt;
&lt;p&gt;我们使用组件开发是为了不重新实现已经实现了的功能，这样就可以把时间花在未实现功能上的开发。使用组件开发，可能是因为时代不一样了，现代的PHP已经很少使用庞大的框架，而是使用具有相互操作性的组件制定解决方案。有的时候，框架不一定能满足我们的需求，这个时候我们通常去自己开发一个新的功能，框架也很难集成第三方的库或者自定义的库，因为他们之间没有使用相同的接口。现在我们可以不受限于框架的束缚，如果想快速完成一个应用的开发，不使用组件自己去重新发明轮子，是不是有点傻呢？&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;这里想说明的是框架和组件的一些对比。&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;前面也提到了，框架虽然很强大，给我们提供了很多工具，但总会出现框架解决不了我们现有的需求问题，这个时候我们通常的做法就是自己开发功能，我们自定义的库又很难集成到框架中。一个好框架需要花费大量的投入时间来维护，我们在选择一个框架的时候要着眼框架的未来。（这么说，PHP组件是不是要比框架好呢？其实也不能这样说，PHP组件也有可能会终止开发的可能，尤其是只有一个核心开发者，万一坚持不下去呢？）&lt;/p&gt;
&lt;p&gt;那是不是框架一无是处呢？其实框架并不是一无是处。像laravel这样的现代流行的PHP框架，代码很优雅。（虽然laravel没有使用PSR-2社区标准，但仍然是一个相当出色的框架）还有一些古老的框架也在向现代PHP转变，比如内容管理框架Drupal。之前的Drupal7还是使用过程式PHP代码编写，代码还在全局命名空间中，舍弃了现代PHP，支持陈旧的代码根基。但是到了Drupal8使用不同的PHP组件构建了一个现代化的内容管理平台，向现代PHP靠拢！这个对Drupal8点个赞（我入职第一周看Drupal7的项目，看了两天的代码，一脸的懵逼，后来放弃了！）。&lt;/p&gt;
&lt;p&gt;在菜市场买菜，菜有好的跟不好的区分，PHP组件也是这样的。所以说，我们不能认为只要是PHP组件的开发都是好的！下面还是说说好的PHP组件长得是什么样子：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;PHP组件的代码小巧玲珑，短小精悍，解决某个问题却使用很少的代码。一个PHP组件可以是一个类，也可以是多个类，分别放在不同子命名的空间里。组件中类没有限定数量，根据自己的解决问题的需求。&lt;/li&gt;
&lt;li&gt;PHP组件的功能单一。我们常说单一功能职责化，代码模块化。组件不是万能的，而是讲究术业有专攻，就是解决特定问题。&lt;/li&gt;
&lt;li&gt;PHP组件之间的相互协调性，一个组件解决一个问题，一个项目解决多个问题。所以PHP组件代码放在自己的命名空间，防止与其他组件冲突。&lt;/li&gt;
&lt;li&gt;PHP组件的测试良好，因为短小精悍，所以测试比较简单。最好本身提供测试，并且有充足的覆盖度。&lt;/li&gt;
&lt;li&gt;有完善的文档，有完善的文档，有完善的文档。组件要让使用者，易于安装，理解和使用。所以说写一个好的README文档真的很重要。要想提高的自己开发的组件的知名度，首先，组件确实好；其次，就是提供相当nice的README文档【这个要去学一下】。还有源码中也要有详细的注释，为组件中的类、属性和方法添加行内容文档块，说明参数、返回值和可能抛出的异常。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;关于最后的选择，究竟我是选择使用组件式开发还是框架开发？&lt;/p&gt;
&lt;p&gt;这个答案就是根据自己的需求来选择。其实现代的PHP框架就是在构建一些小型PHP组件上的一系列的约定。如果能通过一些PHP组件就能解决实际问题的项目就使用组件开发。组件开发能够让代码保持轻量级和灵活性，很容易将一个组件变成另外一个项目的组件。&lt;/p&gt;
&lt;p&gt;如果是大型的项目，能够从框架的一些约定、标准和结构中受益的话，那就使用框架。因为框架能帮我们决定好多事情。但框架的灵活性较低一点，框架提供了一些拿来就用的工具，这样看来，框架也是一个很好的选择。&lt;/p&gt;
&lt;p&gt;总之，根据自己的需求来选择适合自己的东西！&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;曾经有这样一个故事：&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;小李：超哥啊，我想要写个脚本去注册域名，按照汉字组词拼音来注册域名，发现市面上的汉字词组转拼音的工具不好用啊，都TM是个什么烂鬼。&lt;br&gt;超哥：恩，我去看了一下，确实都不好用啊。放心吧，这下我又可以造轮子了。&lt;b
    
    </summary>
    
    
      <category term="PHP组件" scheme="http://www.dyike.com/tags/PHP%E7%BB%84%E4%BB%B6/"/>
    
  </entry>
  
  <entry>
    <title>GDB调试器的学习</title>
    <link href="http://www.dyike.com/2016/08/13/the-gdb-on-ubuntu/"/>
    <id>http://www.dyike.com/2016/08/13/the-gdb-on-ubuntu/</id>
    <published>2016-08-13T15:37:58.000Z</published>
    <updated>2016-08-14T06:09:18.000Z</updated>
    
    <content type="html">&lt;blockquote&gt;
&lt;p&gt;关于GDB是什么，我就不多介绍了，这个不了解可以去谷歌一下。反正就是一个很强大的程序调试的工具。&lt;br&gt;为什么要学习这个？之前学习C语言不是在Linux下编程，后来发现之前折腾的跟现实还是有点出入的，所以现在有的时候还是挺懵逼的，每次都为调试代码这件事而苦恼。&lt;br&gt;还有就是学习Golang的都知道，go语言是支持GDB调试的。Go语言作为一门静态语言，当然可以通过Println之类的打印，但每次修改都需要重新编译。&lt;br&gt;这么看来，既然有这么一个强大的工具，有什么理由不掌握它呢？这里我从网上收集的，整理了一下，希望对你的学习也有帮助。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;GDB能做的事情如下几个方面：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;启动程序，根据自己的想法来运行程序&lt;/li&gt;
&lt;li&gt;让程序在指定的断点出停住，断点可以是条件表达式&lt;/li&gt;
&lt;li&gt;在断点处，查看上下文&lt;/li&gt;
&lt;li&gt;动态的改变程序的执行环境&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;先说说安装吧，在ubuntu下安装也不是一件很难的事，这个自行谷歌。最好尝试编译安装，国内下载可能非常非常的慢。我这里给一个我之前下载好的，放在&lt;a href=&quot;https://pan.baidu.com/s/1qYtOIio&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;百度云盘&lt;/a&gt;中, &lt;strong&gt;密码: 3drw&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;下面直接切入学习吧！&lt;/p&gt;
&lt;p&gt;我们来编写一个简单的C程序：example.c&lt;/p&gt;
&lt;figure class=&quot;highlight c&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;meta&quot;&gt;#&lt;span class=&quot;meta-keyword&quot;&gt;include&lt;/span&gt; &lt;span class=&quot;meta-string&quot;&gt;&amp;lt;stdio.h&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;add&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(&lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt; a, &lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt; b)&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; a+b;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;main&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;()&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt; sum[&lt;span class=&quot;number&quot;&gt;5&lt;/span&gt;] = &amp;#123;&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;&amp;#125;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt; i;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt; array1[&lt;span class=&quot;number&quot;&gt;5&lt;/span&gt;] = &amp;#123;&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;2&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;3&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;4&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;5&lt;/span&gt;&amp;#125;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt; array2[&lt;span class=&quot;number&quot;&gt;5&lt;/span&gt;] = &amp;#123;&lt;span class=&quot;number&quot;&gt;2&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;4&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;6&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;8&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;10&lt;/span&gt;&amp;#125;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; (i = &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;; i &amp;lt; &lt;span class=&quot;number&quot;&gt;5&lt;/span&gt;; i++)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        sum[i] = add(array1[i], array2[i]);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;编译：&lt;code&gt;gcc -g example.c -o example&lt;/code&gt;,得到一个二进制文件example,执行&lt;code&gt;gdb example&lt;/code&gt;命令进入调试状态。&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;注意这里的编译命令，想想为什么要带上-g参数。如果没有-g参数，就看不到程序的函数名、变量名，所替代的全是运行时的内存地址。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;你将看到的是：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;root@ityike:/vagrant/cproject/learngdb  # gdb example&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;GNU gdb (GDB) 7.11.1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Copyright (C) 2016 Free Software Foundation, Inc.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;License GPLv3+: GNU GPL version 3 or later &amp;lt;http://gnu.org/licenses/gpl.html&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;This is free software: you are free to change and redistribute it.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;There is NO WARRANTY, to the extent permitted by law.  Type &amp;quot;show copying&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;and &amp;quot;show warranty&amp;quot; for details.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;This GDB was configured as &amp;quot;x86_64-pc-linux-gnu&amp;quot;.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Type &amp;quot;show configuration&amp;quot; for configuration details.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;For bug reporting instructions, please see:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;lt;http://www.gnu.org/software/gdb/bugs/&amp;gt;.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Find the GDB manual and other documentation resources online at:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;lt;http://www.gnu.org/software/gdb/documentation/&amp;gt;.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;For help, type &amp;quot;help&amp;quot;.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Type &amp;quot;apropos word&amp;quot; to search for commands related to &amp;quot;word&amp;quot;...&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Reading symbols from example...done.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;(gdb)&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;启动GDB的方法有：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;gdb &amp;lt;program&amp;gt;&lt;/code&gt;      | program也就是你的执行文件，一般在当前目录下。&lt;/li&gt;
&lt;li&gt;&lt;code&gt;gdb &amp;lt;program&amp;gt; core&lt;/code&gt;  | 用gdb同时调试一个运行程序和core文件，core是程序非法执行后core dump后产生的文件。&lt;/li&gt;
&lt;li&gt;&lt;code&gt;gdb &amp;lt;program&amp;gt; &amp;lt;PID&amp;gt;&lt;/code&gt;  | 可以指定这个服务程序运行时的进程ID，gdb会自动attach上去，并调试他。（一般用于调试已经在运行的程序）&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;常用命令&quot;&gt;&lt;a href=&quot;#常用命令&quot; class=&quot;headerlink&quot; title=&quot;常用命令&quot;&gt;&lt;/a&gt;常用命令&lt;/h2&gt;&lt;h3 id=&quot;1、list【缩写：l】&quot;&gt;&lt;a href=&quot;#1、list【缩写：l】&quot; class=&quot;headerlink&quot; title=&quot;1、list【缩写：l】&quot;&gt;&lt;/a&gt;1、list【缩写：l】&lt;/h3&gt;&lt;p&gt; list命令后面可以带的参数：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;&amp;lt;linenum&amp;gt;&lt;/code&gt; 行号&lt;/li&gt;
&lt;li&gt;&lt;code&gt;&amp;lt;+offset&amp;gt;&lt;/code&gt; 当前行号的正偏移量&lt;/li&gt;
&lt;li&gt;&lt;code&gt;&amp;lt;-offset&amp;gt;&lt;/code&gt; 当前行号的负偏移量&lt;/li&gt;
&lt;li&gt;&lt;code&gt;&amp;lt;filename:linenum&amp;gt;&lt;/code&gt; 哪个文件的哪一行&lt;/li&gt;
&lt;li&gt;&lt;code&gt;&amp;lt;function&amp;gt;&lt;/code&gt; 函数名&lt;/li&gt;
&lt;li&gt;&lt;code&gt;&amp;lt;filename:function&amp;gt;&lt;/code&gt; 哪个文件的哪个函数&lt;/li&gt;
&lt;li&gt;&lt;code&gt;&amp;lt;*address&amp;gt;&lt;/code&gt; 程序运行时语句在内存中的地址&lt;/li&gt;
&lt;/ul&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;list &amp;lt;linenum&amp;gt;&lt;/code&gt;,显示第linenum行附近的源程序。&lt;/li&gt;
&lt;li&gt;&lt;code&gt;list &amp;lt;function&amp;gt;&lt;/code&gt;,显示函数名为function函数上下的源程序。&lt;/li&gt;
&lt;li&gt;&lt;code&gt;list&lt;/code&gt; ,显示当前行后面的源程序。&lt;/li&gt;
&lt;li&gt;&lt;code&gt;list -&lt;/code&gt;,显示当前行前面的源程序。&lt;br&gt;一般默认显示行数是10，也可以设置自己的行数。&lt;/li&gt;
&lt;li&gt;&lt;code&gt;show listsize&lt;/code&gt;,查看当前设置的list行数。&lt;/li&gt;
&lt;li&gt;&lt;code&gt;set listsize &amp;lt;count&amp;gt;&lt;/code&gt;,设置自己的一次显示的行数。&lt;br&gt;其他常用的list命令：&lt;/li&gt;
&lt;li&gt;&lt;code&gt;list &amp;lt;first&amp;gt;,&amp;lt;last&amp;gt;&lt;/code&gt;  显示从first到last行之间的代码。&lt;/li&gt;
&lt;li&gt;&lt;code&gt;list ,&amp;lt;last&amp;gt;&lt;/code&gt;  显示从当前行到last行之间的代码。&lt;/li&gt;
&lt;li&gt;&lt;code&gt;list +&lt;/code&gt;  往后显示源代码。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;看到这里，不难发现，list就是一个显示内容的命令，是不是没啥呢？其实GDB还提供了代码搜索的命令。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;forward-search &amp;lt;regexp&amp;gt;&lt;/code&gt; | &lt;code&gt;search &amp;lt;regexp&amp;gt;&lt;/code&gt; 向前搜索&lt;/li&gt;
&lt;li&gt;&lt;code&gt;reverse-search &amp;lt;regexp&amp;gt;&lt;/code&gt; 全部搜索&lt;blockquote&gt;
&lt;p&gt;&lt;code&gt;&amp;lt;regexp&amp;gt;&lt;/code&gt;是正则表达式，你是不是跟我一样还要去学习正则表达式，没有啥怕的！&lt;/p&gt;
&lt;/blockquote&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;2、run【缩写-r】&quot;&gt;&lt;a href=&quot;#2、run【缩写-r】&quot; class=&quot;headerlink&quot; title=&quot;2、run【缩写:r】&quot;&gt;&lt;/a&gt;2、run【缩写:r】&lt;/h3&gt;&lt;p&gt; 程序的运行，你有可能需要设置下面四方面的事:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;程序运行参数&lt;blockquote&gt;
&lt;p&gt;&lt;code&gt;set args&lt;/code&gt; 指定运行时的参数。（set args 1,2,3,4,5)&lt;br&gt;&lt;code&gt;show args&lt;/code&gt; 查看当前设置好的运行参数。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;/li&gt;
&lt;li&gt;运行环境&lt;blockquote&gt;
&lt;p&gt;&lt;code&gt;show paths&lt;/code&gt; 查看程序的运行路径。&lt;br&gt;&lt;code&gt;path &amp;lt;dir&amp;gt;&lt;/code&gt; 设定程序的运行路径。&lt;br&gt;&lt;code&gt;set enviroment varname[=value]&lt;/code&gt; 设置环境变量。（set env USER=ityike)&lt;br&gt;&lt;code&gt;show enviroment [varname]&lt;/code&gt; 查看环境变量。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;/li&gt;
&lt;li&gt;工作目录&lt;blockquote&gt;
&lt;p&gt;&lt;code&gt;cd &amp;lt;dir&amp;gt;&lt;/code&gt;相当于shell的cd命令。&lt;br&gt;&lt;code&gt;pwd&lt;/code&gt; 显示当前的所在目录。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;/li&gt;
&lt;li&gt;程序的输入输出&lt;blockquote&gt;
&lt;p&gt;&lt;code&gt;info terminal&lt;/code&gt; 显示你程序用到的终端的模式。&lt;br&gt;使用重定向控制程序输出。如：&lt;code&gt;run &amp;gt; outfile&lt;/code&gt;&lt;br&gt;tty命令可以指写输入输出的终端设备。如：&lt;code&gt;tty /dev/ttyb&lt;/code&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;3、break【缩写-b】&quot;&gt;&lt;a href=&quot;#3、break【缩写-b】&quot; class=&quot;headerlink&quot; title=&quot;3、break【缩写:b】&quot;&gt;&lt;/a&gt;3、break【缩写:b】&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;code&gt;break &amp;lt;function&amp;gt;&lt;/code&gt; 进入指定函数时停住。在C++中使用class::function或者function(type,type)格式来指定函数名。&lt;/li&gt;
&lt;li&gt;&lt;code&gt;break &amp;lt;linenum&amp;gt;&lt;/code&gt; 在指定行停住。&lt;/li&gt;
&lt;li&gt;&lt;code&gt;break +offset / break -offset&lt;/code&gt;在当前行号的前面或后面的offset行停住。&lt;/li&gt;
&lt;li&gt;&lt;code&gt;break filename:linenum&lt;/code&gt;在filename文件的linenum行停住。&lt;/li&gt;
&lt;li&gt;&lt;code&gt;break filename:function&lt;/code&gt;在filename文件的function函数的入口处停住。&lt;/li&gt;
&lt;li&gt;&lt;code&gt;break *address&lt;/code&gt;在程序运行的内存地址处停住。&lt;/li&gt;
&lt;li&gt;&lt;code&gt;break&lt;/code&gt;不带参数表示在下一条指令处停住。&lt;/li&gt;
&lt;li&gt;在上面的带有参数的命令后面，还可以带有condition表示条件。&lt;code&gt;break ... if &amp;lt;condition&amp;gt;&lt;/code&gt;，条件成立的时候停住。&lt;/li&gt;
&lt;li&gt;查看断点，可使用info命令，如&lt;code&gt;info breakpoints [n]&lt;/code&gt;、&lt;code&gt;info break [n]&lt;/code&gt;（n表示断点号）。&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;4、单步命令&quot;&gt;&lt;a href=&quot;#4、单步命令&quot; class=&quot;headerlink&quot; title=&quot;4、单步命令&quot;&gt;&lt;/a&gt;4、单步命令&lt;/h3&gt;&lt;p&gt;next命令可以用于单步执行，但是next不会进入函数的内部，那怎么办呢？还有一个命令step【缩写:s】会进入函数的内部。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;step &amp;lt;count&amp;gt;&lt;/code&gt; step后面不加count表示一条条地执行，加表示执行后面的count条指令，然后再停住。&lt;/li&gt;
&lt;li&gt;&lt;code&gt;next &amp;lt;count&amp;gt;&lt;/code&gt;next后面不加count表示一条条地执行，加表示执行后面的count条指令，然后再停住。&lt;/li&gt;
&lt;li&gt;&lt;code&gt;set step-mode&lt;/code&gt; &lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote&gt;
&lt;p&gt;set step-mode on用于打开step-mode模式，这样，在进行单步跟踪时，程序不会因为没有debug信息而不停住，这个参数的设置可便于查看机器码。&lt;br&gt;set step-mod off用于关闭step-mode模式。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;finish&lt;/code&gt; 运行程序，直到当前函数完成返回，并打印函数返回时的堆栈地址和返回值及参数值等信息。&lt;/li&gt;
&lt;li&gt;&lt;code&gt;until&lt;/code&gt;【缩写:u】一直在循环体内执行单步，退不出来是一件令人烦恼的事情，until命令可以运行程序直到退出循环体。&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;5、continue【缩写-c】&quot;&gt;&lt;a href=&quot;#5、continue【缩写-c】&quot; class=&quot;headerlink&quot; title=&quot;5、continue【缩写:c】&quot;&gt;&lt;/a&gt;5、continue【缩写:c】&lt;/h3&gt;&lt;p&gt;当程序被停住后，可以使用continue恢复程序的运行知道程序结束，或达到下一个端点。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;continue [ignore-count]&lt;/code&gt;  ignore-count表示忽略其后多少次断点。&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;6、print-【缩写-p】&quot;&gt;&lt;a href=&quot;#6、print-【缩写-p】&quot; class=&quot;headerlink&quot; title=&quot;6、print 【缩写:p】&quot;&gt;&lt;/a&gt;6、print 【缩写:p】&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;code&gt;print &amp;lt;expr&amp;gt;&lt;/code&gt;  &lt;expr&gt;是表达式，是被调试的程序中的表达式。&lt;/expr&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;code&gt;print /&amp;lt;f&amp;gt; &amp;lt;expr&amp;gt;&lt;/code&gt;   &lt;f&gt;是输出的格式，如果要把表达式按16进制的格式输出，那么就是/x。&lt;/f&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;“@”是一个和数组有关的操作符，“::”指定一个在文件或是函数中的变量，“{&lt;type&gt;} &lt;addr&gt;”表示一个指向内存地址&lt;addr&gt;的类型为type的一个对象。&lt;/addr&gt;&lt;/addr&gt;&lt;/type&gt;&lt;/p&gt;
&lt;p&gt;x 按十六进制格式显示变量。&lt;br&gt;d 按十进制格式显示变量。&lt;br&gt;u 按十六进制格式显示无符号整型。&lt;br&gt;o 按八进制格式显示变量。&lt;br&gt;t 按二进制格式显示变量。&lt;br&gt;a 按十六进制格式显示变量。&lt;br&gt;c 按字符格式显示变量。&lt;br&gt;f 按浮点数格式显示变量。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;下面我们演示一下sum[]的数组变化过程：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;(gdb) b 14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Breakpoint 1 at 0x400584: file example.c, line 14.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;(gdb) r&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Starting program: /vagrant/cproject/learngdb/example&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Breakpoint 1, main () at example.c:14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14          sum[i] = add(array1[i], array2[i]);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;(gdb) p sum&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$1 = &amp;#123;0, 0, 0, 0, 0&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;(gdb) n&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12      for (i = 0; i &amp;lt; 5; i++)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;(gdb) n&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Breakpoint 1, main () at example.c:14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14          sum[i] = add(array1[i], array2[i]);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;(gdb) p sum&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$2 = &amp;#123;3, 0, 0, 0, 0&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;(gdb) n&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12      for (i = 0; i &amp;lt; 5; i++)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;(gdb) p sum&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$3 = &amp;#123;3, 6, 0, 0, 0&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;(gdb) n&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Breakpoint 1, main () at example.c:14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14          sum[i] = add(array1[i], array2[i]);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;(gdb) p sum&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$4 = &amp;#123;3, 6, 0, 0, 0&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;(gdb) n&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12      for (i = 0; i &amp;lt; 5; i++)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;(gdb) p sum&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$5 = &amp;#123;3, 6, 9, 0, 0&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;如果要修改变量，如x的值，可使用命令：&lt;code&gt;print x=4&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;还有关于数组，有时需要查看一段连续内存空间的值，比如数组的一段，或者是动态分配的数据大小。可以使用“@”操作符。“@”左边是一个内存的地址的值，“@”右边是你查看内存的长度。比如：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;(gdb) p sum&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$7 = &amp;#123;3, 6, 9, 12, 0&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;(gdb) p *sum@5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$8 = &amp;#123;3, 6, 9, 12, 0&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;(gdb) p *sum@2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$9 = &amp;#123;3, 6&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;7、watch命令&quot;&gt;&lt;a href=&quot;#7、watch命令&quot; class=&quot;headerlink&quot; title=&quot;7、watch命令&quot;&gt;&lt;/a&gt;7、watch命令&lt;/h3&gt;&lt;p&gt;watch一般来观察某个表达式（变量也是一种表达式）的值是否有变化了，如果有变化，马上停住程序。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;watch &amp;lt;expr&amp;gt;&lt;/code&gt;：为表达式（变量）expr设置一个观察点。&lt;/li&gt;
&lt;li&gt;&lt;code&gt;rwatch &amp;lt;expr&amp;gt;&lt;/code&gt;：当表达式（变量）expr被读时，停住程序。&lt;/li&gt;
&lt;li&gt;&lt;code&gt;awatch &amp;lt;expr&amp;gt;&lt;/code&gt;：当表达式（变量）的值被读或被写时，停住程序。&lt;/li&gt;
&lt;li&gt;&lt;code&gt;info watchpoints&lt;/code&gt;：列出当前所设置了的所有观察点。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;看看i在连续运行next时一旦发现i变化，i值就会显示出来。&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;(gdb) watch i&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Hardware watchpoint 2: i&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;(gdb) next&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Hardware watchpoint 2: i&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Old value = 2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;New value = 3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;0x00000000004005ae in main () at example.c:12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12      for (i = 0; i &amp;lt; 5; i++)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;(gdb) n&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Breakpoint 1, main () at example.c:14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14          sum[i] = add(array1[i], array2[i]);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;(gdb) n&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12      for (i = 0; i &amp;lt; 5; i++)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;(gdb) n&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Hardware watchpoint 2: i&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Old value = 3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;New value = 4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;0x00000000004005ae in main () at example.c:12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12      for (i = 0; i &amp;lt; 5; i++)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;(gdb) info watchpoints&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Num     Type           Disp Enb Address            What&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2       hw watchpoint  keep y                      i&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    breakpoint already hit 2 times&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&lt;strong&gt;下面这一部分结合上面的break命令&lt;/strong&gt;&lt;/p&gt;
&lt;h4 id=&quot;设置捕捉点（CatchPoint）&quot;&gt;&lt;a href=&quot;#设置捕捉点（CatchPoint）&quot; class=&quot;headerlink&quot; title=&quot;设置捕捉点（CatchPoint）&quot;&gt;&lt;/a&gt;设置捕捉点（CatchPoint）&lt;/h4&gt;&lt;p&gt;你可设置捕捉点来捕捉程序运行时的一些事件。如：载入共享库（动态链接库）或是C++的异常。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;catch &lt;event&gt;&lt;/event&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;当event发生时，停住程序。event可以是下面的内容：&lt;br&gt;1、throw 一个C++抛出的异常。（throw为关键字）&lt;br&gt;2、catch 一个C++捕捉到的异常。（catch为关键字）&lt;br&gt;3、exec 调用系统调用exec时。（exec为关键字，目前此功能只在HP-UX下有用）&lt;br&gt;4、fork 调用系统调用fork时。（fork为关键字，目前此功能只在HP-UX下有用）&lt;br&gt;5、vfork 调用系统调用vfork时。（vfork为关键字，目前此功能只在HP-UX下有用）&lt;br&gt;6、load 或 load &lt;libname&gt; 载入共享库（动态链接库）时。（load为关键字，目前此功能只在HP-UX下有用）&lt;br&gt;unload 或 unload &lt;libname&gt; 卸载共享库（动态链接库）时。（unload为关键字，目前此功能只在HP-UX下有用）&lt;/libname&gt;&lt;/libname&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;tcatch &lt;event&gt;&lt;br&gt;只设置一次捕捉点，当程序停住以后，该点被自动删除。&lt;/event&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&quot;维护停止点&quot;&gt;&lt;a href=&quot;#维护停止点&quot; class=&quot;headerlink&quot; title=&quot;维护停止点&quot;&gt;&lt;/a&gt;维护停止点&lt;/h4&gt;&lt;p&gt;GDB中的停止点也就是断点、观察点、捕捉点。如果你觉得停止点没有用了，可以使delete、clear、disable、enable来进行维护。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;clear&lt;/code&gt;    清除所有的已定义的停止点。&lt;/li&gt;
&lt;li&gt;&lt;code&gt;clear &amp;lt;function&amp;gt; /clear &amp;lt;filename：function&amp;gt;&lt;/code&gt; 清除所有设置在函数上的停止点。&lt;/li&gt;
&lt;li&gt;&lt;code&gt;clear &amp;lt;linenum&amp;gt; / clear &amp;lt;filename：linenum&amp;gt;&lt;/code&gt;  清除所有设置在指定行上的停止点。&lt;/li&gt;
&lt;li&gt;&lt;code&gt;delete [breakpoints] [range...]&lt;/code&gt;   删除指定的断点，breakpoints为断点号。如果不指定断点号，则表示删除所有的断点。range 表示断点号的范围（如：3-7）。简写:d&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;比删除更好的一种方法是disable停止点，disable了的停止点，GDB不会删除，当你还需要时，enable即可，就好像回收站一样。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;disable [breakpoints] [range...]&lt;/code&gt; disable所指定的停止点，breakpoints为停止点号。如果什么都不指定，表示disable所有的停止点。简写:dis。&lt;/li&gt;
&lt;li&gt;&lt;code&gt;enable [breakpoints] [range...]&lt;/code&gt; enable所指定的停止点，breakpoints为停止点号。&lt;/li&gt;
&lt;li&gt;&lt;code&gt;enable [breakpoints] once range...&lt;/code&gt; enable所指定的停止点一次，当程序停止后，该停止点马上被GDB自动disable。&lt;/li&gt;
&lt;li&gt;&lt;code&gt;enable [breakpoints] delete range...&lt;/code&gt; enable所指定的停止点一次，当程序停止后，该停止点马上被GDB自动删除。&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&quot;停止条件的维护&quot;&gt;&lt;a href=&quot;#停止条件的维护&quot; class=&quot;headerlink&quot; title=&quot;停止条件的维护&quot;&gt;&lt;/a&gt;停止条件的维护&lt;/h4&gt;&lt;p&gt;前面我们说到的设置断点时，可以设置一个条件，当条件成立时，程序会自动停止。这个的条件的相关维护命令，为断点设置一个条件，使用if关键字，后面加上断点条件。条件设置好，我们可以使用condition命令来修改断点的条件。（只有break和watch命令支持if，catch目前暂不支持if）&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;condition &amp;lt;bnum&amp;gt; &amp;lt;expression&amp;gt;&lt;/code&gt; 修改断点号为bnum的停止条件为expression。&lt;/li&gt;
&lt;li&gt;&lt;code&gt;condition &amp;lt;bnum&amp;gt;&lt;/code&gt; 清除断点号为bnum的停止条件。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;还有一个特殊的命令ignore&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;ignore &amp;lt;bnum&amp;gt; &amp;lt;count&amp;gt;&lt;/code&gt;  表示忽略断点号为bnum的停止条件count次。&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&quot;为停止点设定运行的命令&quot;&gt;&lt;a href=&quot;#为停止点设定运行的命令&quot; class=&quot;headerlink&quot; title=&quot;为停止点设定运行的命令&quot;&gt;&lt;/a&gt;为停止点设定运行的命令&lt;/h4&gt;&lt;p&gt;为断点号bnum指写一个命令列表。当程序被该断点停住时，gdb会依次运行命令列表中的命令。格式如下：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;commands [bnum]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;... command-list ...&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;end&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;例如：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;break add if sum&amp;gt;0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;commands&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;printf &amp;quot;sum is %d\n&amp;quot;,sum&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;continue&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;end&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;断点设置在函数add中，断点条件为sum》0，一旦sum的值大于0，就会自动打印sum的值，并继续运行程序。&lt;br&gt;如果要清除断点上的命令序列，那么只要简单的执行一下commands命令，并直接再打个end就行了。&lt;/p&gt;
&lt;h3 id=&quot;8、Signals&quot;&gt;&lt;a href=&quot;#8、Signals&quot; class=&quot;headerlink&quot; title=&quot;8、Signals&quot;&gt;&lt;/a&gt;8、Signals&lt;/h3&gt;&lt;p&gt;信号是一种软中断，是一种处理异步事件的方法。一般来说，操作系统都支持许多信号。UNIX定义了许多信号，比如SIGINT表示中断字符信号，也就是Ctrl+C的信号，SIGBUS表示硬件故障的信号；SIGCHLD表示子进程状态改变信号；SIGKILL表示终止程序运行的信号，等等。&lt;br&gt;GDB的handle命令可以完成这个调试，格式如下：&lt;br&gt;&lt;code&gt;handle &amp;lt;signal&amp;gt; &amp;lt;keywords...&amp;gt;&lt;/code&gt;&lt;br&gt;信号&lt;signal&gt;可以以SIG开头或不以SIG开头，可以用定义一个要处理信号的范围（如：SIGIO- SIGKILL，表示处理从SIGIO信号到SIGKILL的信号，其中包括SIGIO，SIGIOT，SIGKILL三个信号），也可以使用关键字 all来标明要处理所有的信号。一旦被调试的程序接收到信号，运行程序马上会被GDB停住，以供调试。其&lt;keywords&gt;可以是以下几种关键字的一个或多个。&lt;/keywords&gt;&lt;/signal&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;nostop&lt;/code&gt; 当被调试的程序收到信号时，GDB不会停住程序的运行，但会打出消息告诉你收到这种信号。&lt;/li&gt;
&lt;li&gt;&lt;code&gt;stop&lt;/code&gt; 当被调试的程序收到信号时，GDB会停住你的程序。&lt;/li&gt;
&lt;li&gt;&lt;code&gt;print&lt;/code&gt; 当被调试的程序收到信号时，GDB会显示出一条信息。&lt;/li&gt;
&lt;li&gt;&lt;code&gt;noprint&lt;/code&gt; 当被调试的程序收到信号时，GDB不会告诉你收到信号的信息。&lt;/li&gt;
&lt;li&gt;&lt;code&gt;pass | noignore&lt;/code&gt; 当被调试的程序收到信号时，GDB不处理信号。这表示，GDB会把这个信号交给被调试程序处理。&lt;/li&gt;
&lt;li&gt;&lt;code&gt;nopass | ignore&lt;/code&gt;   当被调试的程序收到信号时，GDB不会让被调试程序来处理这个信号。&lt;/li&gt;
&lt;li&gt;&lt;code&gt;info signals | info handle&lt;/code&gt;  查看有哪些信号在被GDB检测中。&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;9、线程&quot;&gt;&lt;a href=&quot;#9、线程&quot; class=&quot;headerlink&quot; title=&quot;9、线程&quot;&gt;&lt;/a&gt;9、线程&lt;/h3&gt;&lt;p&gt;很多时间会涉及到多线程，那么断点是不是要打在所有的线程或者某个特定的线程上，GDB可以出色的完成这一项，这也是它强大的原因。&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;break &amp;lt;linespec&amp;gt; thread &amp;lt;threadno&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;break &amp;lt;linespec&amp;gt; thread &amp;lt;threadno&amp;gt; if ...&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;linespec指定了断点设置在的源程序的行号。threadno指定了线程的ID&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;这个ID是GDB分配的，你可以通过&lt;code&gt;info threads&lt;/code&gt;命令来查看正在运行程序中的线程信息.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;如果你不指定thread &lt;threadno&gt;则表示你的断点设在所有线程上面。还可以为某线程指定断点的条件。当你的程序被GDB停住时，所有的运行线程都会被停住。这方便你查看运行程序的总体情况。而在你恢复程序运行时，所有的线程也会被恢复运行。哪怕是主进程在被单步调试时。&lt;/threadno&gt;&lt;/p&gt;
&lt;h4 id=&quot;查看栈信息&quot;&gt;&lt;a href=&quot;#查看栈信息&quot; class=&quot;headerlink&quot; title=&quot;查看栈信息&quot;&gt;&lt;/a&gt;查看栈信息&lt;/h4&gt;&lt;p&gt;如果程序被停住了，此刻需要做的第一件事就是查看程序是在哪儿停住的。当你的程序调用了一个函数，函数的地址，参数，函数内部的局部变量都会被压入栈中。这时你又可以发现GDB的强大之处了。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;命令backtrace 【缩写:bt】&lt;/code&gt;可以打印当前函数调用栈的所有信息。&lt;/li&gt;
&lt;li&gt;&lt;code&gt;bt &amp;lt;n&amp;gt;&lt;/code&gt; n是一个正整数，表示只打印栈顶上n层的栈信息。&lt;/li&gt;
&lt;li&gt;&lt;code&gt;bt &amp;lt;-n&amp;gt;&lt;/code&gt; -n表一个负整数，表示只打印栈底下n层的栈信息。&lt;br&gt;如果你要查看某一层的信息，你需要切换当前栈，一般来说，程序停止时，最顶层的栈就是当前栈，如果你需要查看栈下面层的详细信息，你需要做的就是切换当前栈。&lt;/li&gt;
&lt;li&gt;&lt;code&gt;frame &amp;lt;n&amp;gt; | f &amp;lt;n&amp;gt;&lt;/code&gt; n是一个从0开始的整数，是栈中的层编号。比如：frame 0，表示栈顶，frame 1，表示栈的第二层。&lt;/li&gt;
&lt;li&gt;&lt;code&gt;up &amp;lt;n&amp;gt;&lt;/code&gt;  表示向栈的上面移动n层，可以不打n，表示向上移动一层。&lt;/li&gt;
&lt;li&gt;&lt;code&gt;down &amp;lt;n&amp;gt;&lt;/code&gt;  表示向栈的下面移动n层，可以不打n，表示向下移动一层。&lt;br&gt;上面这三条命令都会打印栈层的信息，如果不想打印其信息，可以使用这三条命令：&lt;/li&gt;
&lt;/ul&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;select-frame &amp;lt;n&amp;gt; 对应于 frame 命令。&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;up-silently &amp;lt;n&amp;gt; 对应于 up 命令。&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;down-silently &amp;lt;n&amp;gt; 对应于 down 命令。&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;10、info命令&quot;&gt;&lt;a href=&quot;#10、info命令&quot; class=&quot;headerlink&quot; title=&quot;10、info命令&quot;&gt;&lt;/a&gt;10、info命令&lt;/h3&gt;&lt;p&gt;info命令可以在调试时用来查看寄存器、断点、观察点和信号等信息。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;info registers&lt;/code&gt; 查看除了浮点寄存器以外的寄存器&lt;/li&gt;
&lt;li&gt;&lt;code&gt;info all-registers&lt;/code&gt; 查看所有寄存器，包括浮点寄存器&lt;/li&gt;
&lt;li&gt;&lt;code&gt;info registers &amp;lt;regname ...&amp;gt;&lt;/code&gt;  查看所指定的寄存器&lt;/li&gt;
&lt;li&gt;&lt;code&gt;info break&lt;/code&gt;  列出当前所设置的所有观察点 &lt;/li&gt;
&lt;li&gt;&lt;code&gt;info frame | info f&lt;/code&gt; 打印出更为详细的当前栈层的信息，只不过，大多数都是运行时的内存地址。比如：函数地址，调用函数的地址，被调用函数的地址，目前的函数是由什么样的程序语言写成的、函数参数地址及值、局部变量的地址等等。&lt;/li&gt;
&lt;li&gt;&lt;code&gt;info args&lt;/code&gt;    打印出当前函数的参数名及其值。&lt;/li&gt;
&lt;li&gt;&lt;code&gt;info locals&lt;/code&gt;  打印出当前函数中所有局部变量及其值。&lt;/li&gt;
&lt;li&gt;&lt;code&gt;info catch&lt;/code&gt;   打印出当前的函数中的异常处理信息。 &lt;/li&gt;
&lt;li&gt;&lt;code&gt;info source&lt;/code&gt;  查看当前文件的程序语言。&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;11、jump命令&quot;&gt;&lt;a href=&quot;#11、jump命令&quot; class=&quot;headerlink&quot; title=&quot;11、jump命令&quot;&gt;&lt;/a&gt;11、jump命令&lt;/h3&gt;&lt;p&gt;一般情况程序都是顺序执行的，现在想要乱序执行怎么办呢？GDB也是可以修改程序的执行顺序，让程序随意跳转。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;jump &amp;lt;linespec&amp;gt;&lt;/code&gt; 来指定下一条语句的运行点。&lt;linespec&gt;可以是文件的行号，可以是file:line格式，也可以是+num这种偏移量格式，表示下一条运行语句从哪里开始。&lt;/linespec&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;jump &amp;lt;address&amp;gt;&lt;/code&gt; 这里的&lt;address&gt;是代码行的内存地址。&lt;/address&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote&gt;
&lt;p&gt;jump命令不会改变当前的程序栈中的内容，所以，如果使用jump从一个函数跳转到另一个函数，当跳转到的函数运行完返回，进行出栈操作时必然会发生错误，这可能导致意想不到的结果，所以最好只用jump在同一个函数中进行跳转。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id=&quot;12、强制函数返回-return&quot;&gt;&lt;a href=&quot;#12、强制函数返回-return&quot; class=&quot;headerlink&quot; title=&quot;12、强制函数返回 return&quot;&gt;&lt;/a&gt;12、强制函数返回 return&lt;/h3&gt;&lt;p&gt;&lt;code&gt;return&lt;/code&gt;&lt;br&gt;&lt;code&gt;return &amp;lt;expression&amp;gt;&lt;/code&gt; 使用return命令取消当前函数的执行，并立即返回，如果指定了&lt;expression&gt;，那么该表达式的值会被认作函数的返回值。&lt;/expression&gt;&lt;/p&gt;
&lt;h3 id=&quot;13、强制调用某函数-call&quot;&gt;&lt;a href=&quot;#13、强制调用某函数-call&quot; class=&quot;headerlink&quot; title=&quot;13、强制调用某函数 call&quot;&gt;&lt;/a&gt;13、强制调用某函数 call&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;code&gt;call &amp;lt;expr&amp;gt;&lt;/code&gt; 表达式中可以一是函数，以此达到强制调用函数的目的，它会显示函数的返回值（如果函数返回值不是void）&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;14、set命令&quot;&gt;&lt;a href=&quot;#14、set命令&quot; class=&quot;headerlink&quot; title=&quot;14、set命令&quot;&gt;&lt;/a&gt;14、set命令&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;code&gt;set print address on/off&lt;/code&gt;   打开/关闭地址输出，当程序显示函数信息时，GDB会显出函数的参数地址。&lt;/li&gt;
&lt;li&gt;&lt;code&gt;set print array on/off&lt;/code&gt;    打开/关闭 数组显示。&lt;/li&gt;
&lt;li&gt;&lt;code&gt;set print elements &amp;lt;number-of-elements&amp;gt;&lt;/code&gt;   设置数组的长度，，如果长度太长，超过了就不再往下显示了。&lt;/li&gt;
&lt;li&gt;&lt;code&gt;set print null-stop &amp;lt;on/off&amp;gt;&lt;/code&gt;  打开了这个选项，那么当显示字符串时，遇到结束符则停止显示。这个选项默认为off。&lt;/li&gt;
&lt;li&gt;&lt;code&gt;set print pretty on&lt;/code&gt;   GDB显示结构体时会比较漂亮。&lt;/li&gt;
&lt;li&gt;&lt;code&gt;set print sevenbit-strings &amp;lt;on/off&amp;gt;&lt;/code&gt;   设置字符显示，是否按“\nnn”的格式显示，如果打开，则字符串或字符数据按\nnn显示，如“\065”。&lt;/li&gt;
&lt;li&gt;&lt;code&gt;set print union &amp;lt;on/off&amp;gt;&lt;/code&gt;   设置显示结构体时，是否显式其内的联合体数据。&lt;/li&gt;
&lt;li&gt;&lt;code&gt;set scheduler-locking off|on|step&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote&gt;
&lt;p&gt;off 不锁定任何线程，也就是所有线程都执行，这是默认值。&lt;br&gt;on 只有当前被调试程序会执行。&lt;br&gt;step 在单步的时候，除了next过一个函数的情况以外，只有当前线程会执行。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ul&gt;
&lt;li&gt;还有其他的。比如修改寄存器，修改内存&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;15、自动显示-display&quot;&gt;&lt;a href=&quot;#15、自动显示-display&quot; class=&quot;headerlink&quot; title=&quot;15、自动显示 display&quot;&gt;&lt;/a&gt;15、自动显示 display&lt;/h3&gt;&lt;p&gt;expr是一个表达式，fmt表示显示的格式，addr表示内存地址，当你用display设定好了一个或多个表达式后，只要你的程序被停下来，GDB会自动显示你所设置的这些表达式的值。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;display &amp;lt;expr&amp;gt;&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;display/&amp;lt;fmt&amp;gt; &amp;lt;expr&amp;gt;&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;display/&amp;lt;fmt&amp;gt; &amp;lt;addr&amp;gt;&lt;/code&gt;&lt;br&gt;格式i和s同样被display支持，一个非常有用的命令是：&lt;code&gt;display/i $pc&lt;/code&gt;&lt;br&gt;$pc是GDB的环境变量，表示着指令的地址，/i则表示输出格式为机器指令码，也就是汇编。于是当程序停下后，就会出现源代码和机器指令码相对应的情形，这是一个很有意思的功能。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;删除自动显示：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;disable display &amp;lt;dnums...&amp;gt;&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;enable display &amp;lt;dnums...&amp;gt;&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;———end—-有错误欢迎指定!———–&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;关于GDB是什么，我就不多介绍了，这个不了解可以去谷歌一下。反正就是一个很强大的程序调试的工具。&lt;br&gt;为什么要学习这个？之前学习C语言不是在Linux下编程，后来发现之前折腾的跟现实还是有点出入的，所以现在有的时候还是挺懵逼的，每次都为调试代码这
    
    </summary>
    
    
      <category term="GDB,C,Golang" scheme="http://www.dyike.com/tags/GDB-C-Golang/"/>
    
  </entry>
  
  <entry>
    <title>面试总结分享</title>
    <link href="http://www.dyike.com/2016/07/31/mianshi-zongjie-fenxiang/"/>
    <id>http://www.dyike.com/2016/07/31/mianshi-zongjie-fenxiang/</id>
    <published>2016-07-31T12:23:59.000Z</published>
    <updated>2016-07-31T13:05:34.000Z</updated>
    
    <content type="html">&lt;p&gt;明天就要开始工作了，之前也没有什么面试的经验，我找工作也是通过社交性找的工作。在我找到PHP开发的这份工作之前我面过两三家，问过我的东西，当然了不会很全，但我每面一家都会做一个总结。希望这个能给找PHP开发的你带来些许帮助，或许一点卵用都没有。&lt;/p&gt;
&lt;p&gt;我先说一下我自己接触PHP的经历吧，听说有这门世界上最好的语言是我在大二的时候，那个时候在网上找了一个教程把代码敲了一遍，做了一个简单的音乐盒子，能够播放管理音乐。后来正真接触PHP是我在今年三月份去渣浪微博实习的三个月里接触了这门语言，后来自己的毕设用Laravel框架做了一个在线学习的网站。总的来说，我真正接触这门语言时间也不算很长，很多东西还不是很深入，比如常用的函数啥我有的时候还需要查阅文档……下面还是来做总结吧：&lt;/p&gt;
&lt;p&gt;学习PHP也就是那一套嘛——LNPM。也就是说Linux、Nginx、PHP、MySQL。&lt;/p&gt;
&lt;h2 id=&quot;Linux这一块&quot;&gt;&lt;a href=&quot;#Linux这一块&quot; class=&quot;headerlink&quot; title=&quot;Linux这一块&quot;&gt;&lt;/a&gt;Linux这一块&lt;/h2&gt;&lt;p&gt;我问的比较多的问题就是会不会写一些shell脚本，然后还有就是常用的命令，还有一些不常见的就是：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;读取文件的最后100行，并复制到的新的文件中 &lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote&gt;
&lt;p&gt;tail -n 100 &amp;gt;&amp;gt;bbb.txt&lt;br&gt;这个里面稍微引申一下就是参数【-c】就是统计字节数&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ul&gt;
&lt;li&gt;删除某个文件夹所有内容，要求删除后停止1秒&lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote&gt;
&lt;p&gt;rm -r -f ./ &amp;amp;&amp;amp;  sleep 1&lt;br&gt;像这个里面需要注意的是句点，想想这个可不可以少掉。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ul&gt;
&lt;li&gt;find、grep的使用以及管道符“|”&lt;/li&gt;
&lt;li&gt;等等其他的，最好系统学习一下Linux的操作，像鸟哥的私房菜。&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;PHP这一块&quot;&gt;&lt;a href=&quot;#PHP这一块&quot; class=&quot;headerlink&quot; title=&quot;PHP这一块&quot;&gt;&lt;/a&gt;PHP这一块&lt;/h2&gt;&lt;p&gt;这一块内容比较多，面试的话，也是各个面试官有自己的问法风格，这个时候需要察言观色。我就记录点我遇到的问题吧：&lt;/p&gt;
&lt;h4 id=&quot;问题1：&quot;&gt;&lt;a href=&quot;#问题1：&quot; class=&quot;headerlink&quot; title=&quot;问题1：&quot;&gt;&lt;/a&gt;问题1：&lt;/h4&gt;&lt;figure class=&quot;highlight php&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$a = &lt;span class=&quot;keyword&quot;&gt;array&lt;/span&gt;();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$a[&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;] = &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$a[&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;] = &lt;span class=&quot;number&quot;&gt;2&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$a[&lt;span class=&quot;number&quot;&gt;3&lt;/span&gt;] = &lt;span class=&quot;number&quot;&gt;3&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$a[&lt;span class=&quot;number&quot;&gt;4&lt;/span&gt;] = &lt;span class=&quot;number&quot;&gt;4&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$a[&lt;span class=&quot;number&quot;&gt;2&lt;/span&gt;] = &lt;span class=&quot;number&quot;&gt;5&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;foreach&lt;/span&gt;($a &lt;span class=&quot;keyword&quot;&gt;as&lt;/span&gt; $v)&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;echo&lt;/span&gt; $v;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;请问上面的遍历输出的值是什么？&lt;/p&gt;
&lt;h4 id=&quot;问题2：（这个是简单的概括）&quot;&gt;&lt;a href=&quot;#问题2：（这个是简单的概括）&quot; class=&quot;headerlink&quot; title=&quot;问题2：（这个是简单的概括）&quot;&gt;&lt;/a&gt;问题2：（这个是简单的概括）&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;PHP的字符串翻转，不用自带的函数。&lt;/li&gt;
&lt;li&gt;从一个数组中取出第一个元素有几种方式？分别是什么？&lt;/li&gt;
&lt;li&gt;PHP中的传引用、传值、传地址。&lt;/li&gt;
&lt;li&gt;单引号和双引号的区别。&lt;/li&gt;
&lt;li&gt;PHP时间相关的函数，时间格式。&lt;/li&gt;
&lt;li&gt;给定两个时间，计算相差的天数，diff&lt;/li&gt;
&lt;li&gt;你使用的PHP版本是什么？如果是PHP7，你要知道一些PHP7的新特性。&lt;/li&gt;
&lt;li&gt;PHP字符串截取含有中文的字符，且保证不乱码&lt;/li&gt;
&lt;li&gt;想起了就再补充……（我打算在一年的时间把PHP常用的函数熟练掌握）&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&quot;问题3：curl请求处理方式&quot;&gt;&lt;a href=&quot;#问题3：curl请求处理方式&quot; class=&quot;headerlink&quot; title=&quot;问题3：curl请求处理方式&quot;&gt;&lt;/a&gt;问题3：curl请求处理方式&lt;/h4&gt;&lt;figure class=&quot;highlight php&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;meta&quot;&gt;&amp;lt;?php&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//cURL的具体实现方法&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$url = &lt;span class=&quot;string&quot;&gt;&quot;http://www.php.net/&quot;&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//1初始化&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ch = curl_init();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//2设置选项,包括URL&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;curl_setopt($ch,CURLOPT_URL,$url);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;curl_setopt($ch,CURLOPT_RETURNTRANSFER,&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;);   &lt;span class=&quot;comment&quot;&gt;//将curl_exec()获取的信息以文件流的形式返回&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                                              &lt;span class=&quot;comment&quot;&gt;//而不是输出&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                                              &lt;span class=&quot;comment&quot;&gt;//启用时将头文件的信息作为数据流输出&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;curl_setopt($ch,CURLOPT_HEADER,&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//3执行并获取内容&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$output = curl_exec($ch);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//4释放cURL句柄&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;curl_close($ch);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;echo&lt;/span&gt; $output;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;我自己引申：有的时候偷懒用 file_get_content()函数，知道其中的区别。&lt;/p&gt;
&lt;h2 id=&quot;Nginx&quot;&gt;&lt;a href=&quot;#Nginx&quot; class=&quot;headerlink&quot; title=&quot;Nginx&quot;&gt;&lt;/a&gt;Nginx&lt;/h2&gt;&lt;p&gt;刚入门PHP，最好要知道简单的配置，知道每个配置选项的意思，能折腾就尽量折腾吧，最好是自己编译安装nginx。这个我现在也没有想说的，自己也整得不是很明白。哈哈哈&lt;/p&gt;
&lt;h2 id=&quot;MySQL方面&quot;&gt;&lt;a href=&quot;#MySQL方面&quot; class=&quot;headerlink&quot; title=&quot;MySQL方面&quot;&gt;&lt;/a&gt;MySQL方面&lt;/h2&gt;&lt;p&gt;这一块显然要问的，不问的话怎么叫面试呢？之前对这个挺害怕的，因为这一块是自己的弱项。总要去面对，害怕是没有用的。之前我被问过的。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;MySQL的架构是什么样的？也就是说三层架构，或者说两层，就看你怎么解释，我觉得这个问题就是想问一下你有没有深入了解过MySQL。&lt;/li&gt;
&lt;li&gt;MySQL常用的存储引擎，知道他们之间的区别，也就是问InnoDB和MyISAM的区别，都是问常用，其他的了解了解。&lt;/li&gt;
&lt;li&gt;关联表的查询join  on的用法 【注意哟：这儿有个坑，mysql不支持full join。这是我面试完后总结发现的】&lt;/li&gt;
&lt;li&gt;sql查询的优化的方法，你需要知道从哪些方面入手。&lt;/li&gt;
&lt;li&gt;MySQL使用的数据结构，其实就是在问B+/B- tree，深入了解MySQL还是需要的。&lt;/li&gt;
&lt;li&gt;问来问去也差不多就是这些了，还有的话我再补充。&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;其他&quot;&gt;&lt;a href=&quot;#其他&quot; class=&quot;headerlink&quot; title=&quot;其他&quot;&gt;&lt;/a&gt;其他&lt;/h2&gt;&lt;h4 id=&quot;数据结构和算法&quot;&gt;&lt;a href=&quot;#数据结构和算法&quot; class=&quot;headerlink&quot; title=&quot;数据结构和算法&quot;&gt;&lt;/a&gt;数据结构和算法&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;PHP常用的四个排序算法，冒泡、选择、插入、快排，其实问的比较多的就是冒泡和快排【不是你只掌握这两个应付面试】，如果还有兴趣，归并排序。反正这几个我都自己撸了一遍，现在也常拿出来看看，毕竟不用的话就容易忘记。&lt;/li&gt;
&lt;li&gt;队列和栈的区别，怎么初始化他们，然后他们的操作要熟悉，常问的就是插入和删除操作。还有会问双向链表。&lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote&gt;
&lt;p&gt;双链表结点中有两个指针prior和next，分别指向其前驱结点和后继结点.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;figure class=&quot;highlight c&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;typedef&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;struct&lt;/span&gt; DNode &amp;#123;  &lt;span class=&quot;comment&quot;&gt;//定义双链表结点类型&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    ElemType data;  &lt;span class=&quot;comment&quot;&gt;//数据域&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;struct&lt;/span&gt; DNode *prior, *next;  &lt;span class=&quot;comment&quot;&gt;//前驱和后继指针&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;DNode, *DLinklist;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;ul&gt;
&lt;li&gt;还有数据结构的树那一块，没被问太多，估计是我这一块薄弱吧，面试官就合理避开。【这样的面试官才是好面试，至少他了解你的基础，也有傻×的面试官，明明你表现了不会，他还一个人自high问个不停】&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&quot;操作系统&quot;&gt;&lt;a href=&quot;#操作系统&quot; class=&quot;headerlink&quot; title=&quot;操作系统&quot;&gt;&lt;/a&gt;操作系统&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;线程和进程的区别&lt;/li&gt;
&lt;li&gt;还有忘了，以后想起了补充&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&quot;计算机网络&quot;&gt;&lt;a href=&quot;#计算机网络&quot; class=&quot;headerlink&quot; title=&quot;计算机网络&quot;&gt;&lt;/a&gt;计算机网络&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;各种状态码都要熟悉，常问的301、304和500&lt;/li&gt;
&lt;li&gt;tcp和udp的区别&lt;/li&gt;
&lt;li&gt;TCP/IP的协议还是要清楚&lt;/li&gt;
&lt;li&gt;三次握手，四次挥手的状态分析&lt;/li&gt;
&lt;li&gt;SESSION和COOKIE的区别，多台web服务器怎么共享SESSION？【经典问题，每家必问】&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&quot;有事没事的时候还是要学好C语言&quot;&gt;&lt;a href=&quot;#有事没事的时候还是要学好C语言&quot; class=&quot;headerlink&quot; title=&quot;有事没事的时候还是要学好C语言&quot;&gt;&lt;/a&gt;有事没事的时候还是要学好C语言&lt;/h4&gt;&lt;p&gt;目前我被问到：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;文件读取&lt;/li&gt;
&lt;li&gt;字符串复制strcp是怎么实现的，用自己的方式实现字符串的复制。&lt;/li&gt;
&lt;li&gt;函数参数有两个以上的，参数入栈的顺序&lt;/li&gt;
&lt;li&gt;想起再补充。&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&quot;其他-1&quot;&gt;&lt;a href=&quot;#其他-1&quot; class=&quot;headerlink&quot; title=&quot;其他&quot;&gt;&lt;/a&gt;其他&lt;/h4&gt;&lt;p&gt;面向对象编程的封装、继承和多态&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;1、面向对象是一种基于结构分析的、以数据为中心的程序设计思想。面向过程语言是一种基于功能分析的、以算法为中心的程序设计方法。&lt;br&gt;2、封装就是隐藏对象实现的细节，在外界通过公共的方法来访问。比如，在C语言中，我们需要关注每一个细节、过程，在面向对象的程序语言中，我们就不用关注每个对象的细节，只要关注功能的实现就行，根据提供好的接口，然后面向接口编程。&lt;br&gt;3、继承就是子类能够继承父类的公共属性和方法，无法继承父类的私有属性和方法。在java|C#|PHP等面向对象语言中，是不允许多重继承的。【但php trait是个例外，可以多层继承】&lt;br&gt;4、多态，就是同一个接口，对不同的实例而执行不同的操作。同属一个基类的不同派生类也可以有自己不同于其他类的属性和方法。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;以上就是我面了三家的一些总结，有的很简单我就没有总结出来，有的总结出来对你来说也许很简单。最后我现在工作在杭州，欢迎面基！也希望大牛们求带！&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;明天就要开始工作了，之前也没有什么面试的经验，我找工作也是通过社交性找的工作。在我找到PHP开发的这份工作之前我面过两三家，问过我的东西，当然了不会很全，但我每面一家都会做一个总结。希望这个能给找PHP开发的你带来些许帮助，或许一点卵用都没有。&lt;/p&gt;
&lt;p&gt;我先说一下我自
    
    </summary>
    
    
      <category term="面试，PHP" scheme="http://www.dyike.com/tags/%E9%9D%A2%E8%AF%95%EF%BC%8CPHP/"/>
    
  </entry>
  
  <entry>
    <title>高性能JavaScript学习笔记——DOM编程</title>
    <link href="http://www.dyike.com/2016/06/30/learn-dom-scripting-of-js/"/>
    <id>http://www.dyike.com/2016/06/30/learn-dom-scripting-of-js/</id>
    <published>2016-06-30T06:07:19.000Z</published>
    <updated>2016-06-30T14:20:36.000Z</updated>
    
    <content type="html">&lt;p&gt;DOM是文档对象模型，用于操作XML和HTML文档的程序接口。DOM是JavaScript编码中一个重要的部分。&lt;/p&gt;
&lt;h3 id=&quot;DOM的修改与访问&quot;&gt;&lt;a href=&quot;#DOM的修改与访问&quot; class=&quot;headerlink&quot; title=&quot;DOM的修改与访问&quot;&gt;&lt;/a&gt;DOM的修改与访问&lt;/h3&gt;&lt;p&gt;访问DOM元素是具有代价的，修改DOM元素的代价更大，因为它会导致浏览器重新计算页面的几何变化。&lt;/p&gt;
&lt;p&gt;最快的情况就是在循环中修改或者访问元素，尤其对HTML元素结合循环操作。先看一个简单的例子：&lt;/p&gt;
&lt;figure class=&quot;highlight javascript&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;innerHTMLLoop&lt;/span&gt;(&lt;span class=&quot;params&quot;&gt;&lt;/span&gt;) &lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;keyword&quot;&gt;var&lt;/span&gt; count = &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;; count &amp;lt; &lt;span class=&quot;number&quot;&gt;100&lt;/span&gt; ; count++) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;built_in&quot;&gt;document&lt;/span&gt;.getElementById(&lt;span class=&quot;string&quot;&gt;&#39;here&#39;&lt;/span&gt;).innerHTML += &lt;span class=&quot;string&quot;&gt;&#39;a&#39;&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;这个函数就是修改页面元素的内容，那性能问题出现在哪儿？每次循环迭代，该元素都会被访问两次：第一次是读取innerHTML的属性值，第二次就是重写它。&lt;/p&gt;
&lt;p&gt;那换一种局部变量的存储方式修改其中的内容，在循环体结束之后一次性写入，是不是效率要更高效呢？&lt;/p&gt;
&lt;figure class=&quot;highlight javascript&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;innerHTMLLoop2&lt;/span&gt;(&lt;span class=&quot;params&quot;&gt;&lt;/span&gt;) &lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;var&lt;/span&gt; content = &lt;span class=&quot;string&quot;&gt;&#39;&#39;&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;keyword&quot;&gt;var&lt;/span&gt; count = &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;; count &amp;lt; &lt;span class=&quot;number&quot;&gt;100&lt;/span&gt; ; count++) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        content += &lt;span class=&quot;string&quot;&gt;&#39;a&#39;&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;document&lt;/span&gt;.getElementById(&lt;span class=&quot;string&quot;&gt;&#39;here&#39;&lt;/span&gt;).innerHTML += content;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;很明显修改后的代码运行速度更快了。访问DOM的次数越多，代码的运行速度越慢。因此，常用的经验法则：减少访问DOM的次数，把运行尽量留在ECMAScript处理。&lt;/p&gt;
&lt;h3 id=&quot;innerHTML-对比-DOM方法&quot;&gt;&lt;a href=&quot;#innerHTML-对比-DOM方法&quot; class=&quot;headerlink&quot; title=&quot;innerHTML 对比 DOM方法&quot;&gt;&lt;/a&gt;innerHTML 对比 DOM方法&lt;/h3&gt;&lt;p&gt;首先带着一个问题：修改页面区域的最佳方案是用非标准但支持良好的innerHTML属性？还是只用类似document.createElement()的原声DOM方法？如果不考虑web标准，他们的性能都差不多，但是在出开最新版的webkit内核之外的浏览器中，innerHTML会更快一点。&lt;br&gt;这儿省略一个例子：两种方式创建一个1000行的表格。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;合并HTML字符，然后更新DOM的innerHTML属性。&lt;/li&gt;
&lt;li&gt;只用标准的DOM方法，比如document.createElement()和document.createTextNode().&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;最终的结果怎么样？最终选择哪种方法取决你的用户使用的浏览器以及你的编码习惯。如果你的需求是在一个对性能有着苛刻的要求操作中更新一大段HTML，推荐使用innerHTML，在大部分的浏览器中，这个运行速度都要快！&lt;/p&gt;
&lt;h3 id=&quot;节点克隆&quot;&gt;&lt;a href=&quot;#节点克隆&quot; class=&quot;headerlink&quot; title=&quot;节点克隆&quot;&gt;&lt;/a&gt;节点克隆&lt;/h3&gt;&lt;p&gt;使用DOM方法是更新页面的内容的另外一个途径就是克隆已有元素。就是使用element.cloneNode()(element表示已有节点)替代document.createElement().&lt;br&gt;看个例子吧：用element.cloneNode()生成表格。&lt;/p&gt;
&lt;figure class=&quot;highlight javascript&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;tableClonedDOM&lt;/span&gt;(&lt;span class=&quot;params&quot;&gt;&lt;/span&gt;)&lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;var&lt;/span&gt; i,table,thead,tbody,tr,th,td,a,ul,li,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        oth = &lt;span class=&quot;built_in&quot;&gt;document&lt;/span&gt;.createElement(&lt;span class=&quot;string&quot;&gt;&#39;th&#39;&lt;/span&gt;),&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        otd = &lt;span class=&quot;built_in&quot;&gt;document&lt;/span&gt;.createElement(&lt;span class=&quot;string&quot;&gt;&#39;td&#39;&lt;/span&gt;),&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        otr = &lt;span class=&quot;built_in&quot;&gt;document&lt;/span&gt;.createElement(&lt;span class=&quot;string&quot;&gt;&#39;tr&#39;&lt;/span&gt;),&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        oa = &lt;span class=&quot;built_in&quot;&gt;document&lt;/span&gt;.createElement(&lt;span class=&quot;string&quot;&gt;&#39;a&#39;&lt;/span&gt;),&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        oli = &lt;span class=&quot;built_in&quot;&gt;document&lt;/span&gt;.createElement(&lt;span class=&quot;string&quot;&gt;&#39;li&#39;&lt;/span&gt;),&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        oul = &lt;span class=&quot;built_in&quot;&gt;document&lt;/span&gt;.createElement(&lt;span class=&quot;string&quot;&gt;&#39;ul&#39;&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    tbody = &lt;span class=&quot;built_in&quot;&gt;document&lt;/span&gt;.createElement(&lt;span class=&quot;string&quot;&gt;&#39;tbody&#39;&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt;(i = &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;; i &amp;lt;= &lt;span class=&quot;number&quot;&gt;100&lt;/span&gt;; i++)&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        tr = otr.cloneNode(&lt;span class=&quot;literal&quot;&gt;false&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        td = otd.cloneNode(&lt;span class=&quot;literal&quot;&gt;false&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        td.appendChild(&lt;span class=&quot;built_in&quot;&gt;document&lt;/span&gt;.createTextNode((i % &lt;span class=&quot;number&quot;&gt;2&lt;/span&gt;) ? &lt;span class=&quot;string&quot;&gt;&#39;yes&#39;&lt;/span&gt; : &lt;span class=&quot;string&quot;&gt;&#39;no&#39;&lt;/span&gt;));&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        tr.appendChild(td);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        td = otd.cloneNode(&lt;span class=&quot;literal&quot;&gt;false&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        td.appendChild(&lt;span class=&quot;built_in&quot;&gt;document&lt;/span&gt;.createTextNode(i));&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        tr.appendChile(td);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        td = otd.cloneNode(&lt;span class=&quot;literal&quot;&gt;false&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        td.appendChild(&lt;span class=&quot;built_in&quot;&gt;document&lt;/span&gt;.createTextNode(&lt;span class=&quot;string&quot;&gt;&#39;my name is #&#39;&lt;/span&gt; + i));&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        tr.appendChild(td);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;// ....&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;// ....&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;HTML集合&quot;&gt;&lt;a href=&quot;#HTML集合&quot; class=&quot;headerlink&quot; title=&quot;HTML集合&quot;&gt;&lt;/a&gt;HTML集合&lt;/h3&gt;&lt;p&gt;html集合是包含了DOM节点引用的类数组对象。以下方法就是返回值就是一个集合：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;document.getElementsByName()&lt;/li&gt;
&lt;li&gt;document.getElementsByClassName()&lt;/li&gt;
&lt;li&gt;document.getElementsByTagName()&lt;br&gt;下面的属性同样是返回HTML集合：&lt;/li&gt;
&lt;li&gt;document.images 页面所有img元素&lt;/li&gt;
&lt;li&gt;document.links 页面所有a元素&lt;/li&gt;
&lt;li&gt;document.forms 页面所有表单元素&lt;/li&gt;
&lt;li&gt;document.forms[0].elements 页面中第一个表单所有的字段&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&quot;访问集合元素使用局部变量&quot;&gt;&lt;a href=&quot;#访问集合元素使用局部变量&quot; class=&quot;headerlink&quot; title=&quot;访问集合元素使用局部变量&quot;&gt;&lt;/a&gt;访问集合元素使用局部变量&lt;/h4&gt;&lt;p&gt;对于任何类型的DOM访问，需要多次访问同一个DOM属性或者方法需要多次访问，最好使用一个局部变量缓存此成员，前面文章开头也谈到了原因了。遍历一个集合是，第一个优化原则是把集合存储到局部变量中，并把length存储在循环外部，然后使用局部变量替代这些需要多次读取的元素。&lt;br&gt;看例子是最好的学习方法：&lt;/p&gt;
&lt;figure class=&quot;highlight javascript&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;35&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;36&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;37&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;38&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;39&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;40&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//较慢&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;collectionGlobal&lt;/span&gt;(&lt;span class=&quot;params&quot;&gt;&lt;/span&gt;)&lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;var&lt;/span&gt; coll = &lt;span class=&quot;built_in&quot;&gt;document&lt;/span&gt;.getElementsByTagName(&lt;span class=&quot;string&quot;&gt;&#39;div&#39;&lt;/span&gt;),&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        len = coll.length,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        name = &lt;span class=&quot;string&quot;&gt;&#39;&#39;&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt;(&lt;span class=&quot;keyword&quot;&gt;var&lt;/span&gt; count = &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;; count &amp;lt; len; count++)&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        name = &lt;span class=&quot;built_in&quot;&gt;document&lt;/span&gt;.getElementsByTagName(&lt;span class=&quot;string&quot;&gt;&#39;div&#39;&lt;/span&gt;)[count].nodeName;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        name = &lt;span class=&quot;built_in&quot;&gt;document&lt;/span&gt;.getElementsByTagName(&lt;span class=&quot;string&quot;&gt;&#39;div&#39;&lt;/span&gt;)[count].nodeType;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        name = &lt;span class=&quot;built_in&quot;&gt;document&lt;/span&gt;.getElementsByTagName(&lt;span class=&quot;string&quot;&gt;&#39;div&#39;&lt;/span&gt;)[count].tagName;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; name;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//较快&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;collectionLocal&lt;/span&gt;(&lt;span class=&quot;params&quot;&gt;&lt;/span&gt;) &lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;var&lt;/span&gt; coll = &lt;span class=&quot;built_in&quot;&gt;document&lt;/span&gt;.getElementsByTagName(&lt;span class=&quot;string&quot;&gt;&#39;div&#39;&lt;/span&gt;),&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        len = coll.length,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        name = &lt;span class=&quot;string&quot;&gt;&#39;&#39;&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt;(&lt;span class=&quot;keyword&quot;&gt;var&lt;/span&gt; count = &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;; count&amp;lt;len; count++)&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        name = coll[count].nodeName;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        name = coll[count].nodeType;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        name = coll[count].tagName;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; name;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//最快&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;collectionNodeLocal&lt;/span&gt;(&lt;span class=&quot;params&quot;&gt;&lt;/span&gt;)&lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;var&lt;/span&gt; coll = &lt;span class=&quot;built_in&quot;&gt;document&lt;/span&gt;.getElementsByTagName(&lt;span class=&quot;string&quot;&gt;&#39;div&#39;&lt;/span&gt;),&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        len = coll.length,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        name = &lt;span class=&quot;string&quot;&gt;&#39;&#39;&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        el = &lt;span class=&quot;literal&quot;&gt;null&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt;(&lt;span class=&quot;keyword&quot;&gt;var&lt;/span&gt; count = &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;; count&amp;lt;len; count++)&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        el = coll[count];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        name = el.nodeName;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        name = el.nodeType;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        name = el.tagName;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; name;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;遍历DOM&quot;&gt;&lt;a href=&quot;#遍历DOM&quot; class=&quot;headerlink&quot; title=&quot;遍历DOM&quot;&gt;&lt;/a&gt;遍历DOM&lt;/h3&gt;&lt;h4 id=&quot;获取DOM元素&quot;&gt;&lt;a href=&quot;#获取DOM元素&quot; class=&quot;headerlink&quot; title=&quot;获取DOM元素&quot;&gt;&lt;/a&gt;获取DOM元素&lt;/h4&gt;&lt;p&gt;有这样一个场景就是你需要从某一个DOM元素开始，操作周围的元素，或者递归查找所有子节点。可以使用childNodes得到元素集合，或者用nextSibling来获取每个相邻的元素。&lt;/p&gt;
&lt;p&gt;两个等价的例子：&lt;/p&gt;
&lt;figure class=&quot;highlight javascript&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;testNextSibling&lt;/span&gt;(&lt;span class=&quot;params&quot;&gt;&lt;/span&gt;)&lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;var&lt;/span&gt; el = &lt;span class=&quot;built_in&quot;&gt;document&lt;/span&gt;.getElementById(&lt;span class=&quot;string&quot;&gt;&#39;mydiv&#39;&lt;/span&gt;),&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        ch = el.firstChild,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        name = &lt;span class=&quot;string&quot;&gt;&#39;&#39;&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;do&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        name = ch.nodeName;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;span class=&quot;keyword&quot;&gt;while&lt;/span&gt;(ch = ch.nextSibling);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; name;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;testChildNodes&lt;/span&gt;(&lt;span class=&quot;params&quot;&gt;&lt;/span&gt;)&lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;var&lt;/span&gt; el = &lt;span class=&quot;built_in&quot;&gt;document&lt;/span&gt;.getElementById(&lt;span class=&quot;string&quot;&gt;&#39;mydiv&#39;&lt;/span&gt;),&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        ch = el.childNodes,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        len = el.length,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        name = &lt;span class=&quot;string&quot;&gt;&#39;&#39;&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt;(&lt;span class=&quot;keyword&quot;&gt;var&lt;/span&gt; count = &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;; count&amp;lt;len; count++)&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        name = ch[count].nodeName;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; name;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//需要注意的是childNodes是一个元素集合，在循环体中，缓存length属性以避免在每次迭代中更新。&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h4 id=&quot;节点元素&quot;&gt;&lt;a href=&quot;#节点元素&quot; class=&quot;headerlink&quot; title=&quot;节点元素&quot;&gt;&lt;/a&gt;节点元素&lt;/h4&gt;&lt;p&gt;DOM元素属性诸如，childNodes,firstChild和nextSibling并不区分元素节点和其他类型节点，比如注释和文本节点。在某些情况下只需要访问元素节点，因此在循环中很可能需要检查返回节点类型并过滤掉非元素节点。&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;DOM是文档对象模型，用于操作XML和HTML文档的程序接口。DOM是JavaScript编码中一个重要的部分。&lt;/p&gt;
&lt;h3 id=&quot;DOM的修改与访问&quot;&gt;&lt;a href=&quot;#DOM的修改与访问&quot; class=&quot;headerlink&quot; title=&quot;DOM的修改与访问&quot;
    
    </summary>
    
    
      <category term="JavaScript" scheme="http://www.dyike.com/tags/JavaScript/"/>
    
  </entry>
  
  <entry>
    <title>高性能JavaScript的学习笔记——加载和执行</title>
    <link href="http://www.dyike.com/2016/06/29/learn-loading-and-execution-of-js/"/>
    <id>http://www.dyike.com/2016/06/29/learn-loading-and-execution-of-js/</id>
    <published>2016-06-29T04:00:55.000Z</published>
    <updated>2016-06-29T08:20:40.000Z</updated>
    
    <content type="html">&lt;p&gt;作为一个web开发者来说，在开发的过程需要考虑性能的问题。JavaScript在浏览器中的性能，可能就是可用性的问题，这个问题因JavaScript的阻塞特性变得复杂，说白了就是当浏览器在执行JavaScript的时候，浏览器不能同时做其他的事情。js的执行时间越长，浏览器的响应时间就会越长。&amp;lt;script&amp;gt;标签出现的时候，就会让页面等待脚本的解析和执行，不管JavaScript的代码是内嵌还是包含的在外链的文件中，页面的下载和渲染都必须要停下来等待脚本的执行完毕。&lt;/p&gt;
&lt;h3 id=&quot;脚本的位置&quot;&gt;&lt;a href=&quot;#脚本的位置&quot; class=&quot;headerlink&quot; title=&quot;脚本的位置&quot;&gt;&lt;/a&gt;脚本的位置&lt;/h3&gt;&lt;p&gt;在HTML4规范中指出&amp;lt;script&amp;gt;标签可以放在html文档中&amp;lt;head&amp;gt;或&amp;lt;body&amp;gt;的标签中。通常情况是这样的：&amp;lt;script&amp;gt;标签用来加载出现在&amp;lt;head&amp;gt;中外链的js文件，挨着&amp;lt;link&amp;gt;标签用来加载外部的css文件或其他页面元信息。&lt;/p&gt;
&lt;p&gt;先看下面的一段代码：&lt;/p&gt;
&lt;figure class=&quot;highlight html&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;html&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;head&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;title&lt;/span&gt;&amp;gt;&lt;/span&gt;js学习例子&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;title&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;script&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;type&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;text/javascript&quot;&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;src&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;file1.js&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;undefined&quot;&gt;&lt;/span&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;script&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;script&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;type&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;text/javascript&quot;&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;src&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;file2.js&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;undefined&quot;&gt;&lt;/span&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;script&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;script&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;type&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;text/javascript&quot;&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;src&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;file3.js&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;undefined&quot;&gt;&lt;/span&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;script&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;link&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;rel&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;stylesheet&quot;&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;type&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;text/css&quot;&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;href&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;styles.css&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;head&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;body&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;p&lt;/span&gt;&amp;gt;&lt;/span&gt;你好，世界！&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;p&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;body&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;html&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;上面的代码需要注意的是：在浏览器解析到&amp;lt;body&amp;gt;标签之前，不会渲染页面的其他的内容。所以说把脚本放在页面的顶部会导致明显的延迟，表现出页面空白，没有内容信息。执行过程差不多就是这样的：&lt;br&gt;&lt;img src=&quot;https://raw.githubusercontent.com/yf92/yf92.github.io/master/images/jslearning/jslearning1.png&quot; alt=&quot;js执行过程&quot;&gt;&lt;/p&gt;
&lt;p&gt;从上图可以清晰的看到，第一个js文件下载的同时阻塞了页面其他文件的下载，以此类推！&lt;/p&gt;
&lt;p&gt;面对这样的原因，可以适当的调整js代码的位置是不是更合理呢？&lt;/p&gt;
&lt;figure class=&quot;highlight html&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;html&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;head&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;title&lt;/span&gt;&amp;gt;&lt;/span&gt;js学习例子&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;title&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;link&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;rel&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;stylesheet&quot;&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;type&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;text/css&quot;&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;href&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;styles.css&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;head&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;body&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;p&lt;/span&gt;&amp;gt;&lt;/span&gt;你好，世界！&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;p&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;script&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;type&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;text/javascript&quot;&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;src&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;file1.js&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;undefined&quot;&gt;&lt;/span&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;script&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;script&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;type&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;text/javascript&quot;&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;src&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;file2.js&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;undefined&quot;&gt;&lt;/span&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;script&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;script&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;type&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;text/javascript&quot;&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;src&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;file3.js&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;undefined&quot;&gt;&lt;/span&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;script&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;body&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;html&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;推荐是将所有的&amp;lt;script&amp;gt;标签尽可能的放在&amp;lt;body&amp;gt;标签的底部，尽量减少对整个页面的影响。记住：优化JavaScript代码的首要规范：将代码放在底部！&lt;/p&gt;
&lt;p&gt;上面谈到的原因也差不多明白，在组织脚本的时候，我们尽量减少&amp;lt;script&amp;gt;标签的个数，这不仅仅是针对外链，内嵌也是一样的。考虑HTTP请求会带来额外的性能开销，下载一个100kb的文件要比下载4个25kb的文件更快！这样我们就应该考虑文件的合并，可以通过离线打包工具等等，后面继续讲！&lt;/p&gt;
&lt;p&gt;下面说明两种脚本：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;无阻塞的脚本就是，在页面加载完成后才加载JavaScript代码，专业的就是说法就是在window对象的load事件触发后再下载脚本。&lt;/li&gt;
&lt;li&gt;延迟的脚本就是，在&amp;lt;script&amp;gt;标签中定义了一个扩展属性：defer。致命本元素所含的脚本不会修改DOM，这样代码就会安全的延迟执行。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;需要说明的是：目前主流的浏览器已经实现对defer属性的支持，W3C的html5规范，当且仅当src属性声明时生效。&lt;/p&gt;
&lt;p&gt;还有一种无阻塞加载脚本的方法是使用XMLHttpRequest(XHR)对象获取脚本并注入页面中。先创建一个XHR对象，然后用它去下载JavaScript文件，最后通过创建动态的&amp;lt;script&amp;gt;元素将代码注入到页面中。代码示例：&lt;/p&gt;
&lt;figure class=&quot;highlight javascript&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;var&lt;/span&gt; xhr = &lt;span class=&quot;keyword&quot;&gt;new&lt;/span&gt; XMLHttpRequest();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;xhr.open(&lt;span class=&quot;string&quot;&gt;&quot;get&quot;&lt;/span&gt;,&lt;span class=&quot;string&quot;&gt;&quot;file1.js&quot;&lt;/span&gt;,&lt;span class=&quot;literal&quot;&gt;true&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;xhr.onreadystatechange = &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;params&quot;&gt;&lt;/span&gt;)&lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt;(xhr.readyState == &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;)&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt;(xhr.status &amp;gt;=&lt;span class=&quot;number&quot;&gt;200&lt;/span&gt; &amp;amp;&amp;amp; xhr.status &amp;lt;&lt;span class=&quot;number&quot;&gt;300&lt;/span&gt; || xhr.status == &lt;span class=&quot;number&quot;&gt;304&lt;/span&gt;)&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;keyword&quot;&gt;var&lt;/span&gt; script = &lt;span class=&quot;built_in&quot;&gt;document&lt;/span&gt;.createElement(&lt;span class=&quot;string&quot;&gt;&quot;script&quot;&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            script.type = &lt;span class=&quot;string&quot;&gt;&quot;text/javascript&quot;&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            script.text = xhr.responseText;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;built_in&quot;&gt;document&lt;/span&gt;.body.appendChild(script);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;xhr.send(&lt;span class=&quot;literal&quot;&gt;null&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;发送一个GET请求获取file1.js文件。事件处理函数onreadystatechange检查readyState的状态是否为1，同时还要校验http的状态码，如果满足条件，创建一个&amp;lt;script&amp;gt;元素。这样做的好处就是，可以先去下载一个JavaScript代码，但可以先不去执行。但也有局限性：JavaScript文件必须与请求的页面处与相同的域，也就是说不能从CDN上下载JavaScript文件，这种方法不用于大型web应用。&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;作为一个web开发者来说，在开发的过程需要考虑性能的问题。JavaScript在浏览器中的性能，可能就是可用性的问题，这个问题因JavaScript的阻塞特性变得复杂，说白了就是当浏览器在执行JavaScript的时候，浏览器不能同时做其他的事情。js的执行时间越长，浏览器
    
    </summary>
    
    
      <category term="JavaScript" scheme="http://www.dyike.com/tags/JavaScript/"/>
    
  </entry>
  
  <entry>
    <title>2016年，我的毕业感想</title>
    <link href="http://www.dyike.com/2016/06/26/the-feelings-of-graduation-2016/"/>
    <id>http://www.dyike.com/2016/06/26/the-feelings-of-graduation-2016/</id>
    <published>2016-06-26T02:33:13.000Z</published>
    <updated>2016-06-26T05:26:06.000Z</updated>
    
    <content type="html">&lt;p&gt;去年的我写了一篇文章谈了谈了自己对毕业的感想，由于去年我才大三没有真正的那种体验，唯一的感觉就是数字的冲击——2015年毕业生746万，然而今年就不一样了，自己毕业了，面临的事很多——要找工作，要租房，要自己养活自己……&lt;/p&gt;
&lt;p&gt;前一段时间在微博上看到了一篇关于2016年毕业生薪酬数据的报告，我不知道这个数据的来源是不是多么的准确，但至少能说明一些问题，从数据的冲击上来看确实可以看出现在大学毕业生的就业现状——相当残酷！很庆幸的是在前100名看到了我的母校。其实对于一个刚毕业的学生来说，先是找到一份适合自己的工作，再去关注薪资，然后让自己在工作逐渐成长起来。就算给你一份很丰厚的薪资，然而你没有那个实力，你敢去吗？谁刚毕业都有一段那些能让自己难忘的经历。&lt;/p&gt;
&lt;p&gt;然后我就顺着去查了一下2016年的毕业生人数，只能这样说：“2016年高校毕业生人数创历史新高——765万！”足足比去年多了19万，再加上现今的经济下行的压力相当大，各种行业都不是很景气，所以说就业压力还是很艰难的。&lt;/p&gt;
&lt;h3 id=&quot;选择就业&quot;&gt;&lt;a href=&quot;#选择就业&quot; class=&quot;headerlink&quot; title=&quot;选择就业&quot;&gt;&lt;/a&gt;选择就业&lt;/h3&gt;&lt;p&gt;在大学四年，能想到自己的就业问题，也差不多在大三吧。在大三的时候，大家都会有自己的目标去奋斗了，有的准备考研，有的在外面找实习就干起来，有的选择自主创业，还有选择考公、事业单位……这当中有成功也有失败，我还记得当初自己也选择了考研，考研可以说是对就业的一种短暂的逃避，是可以这样说，但不完全是！现在想想挺后悔当初的考研的决定，当初也就是在同学面前随口一说我要考研，然后就入坑了，说白了就是自己都不知道自己考研的真正目的是什么。其实后悔也是没有用的，毕竟都是自己选择的路，再怎么难走含着泪也要走完，至少那一年里，也是一种尝试一种体验。为什么说我自己后悔当初的决定的呢？在今年三月份我找到了一份比较体面的实习，在这三个月的实习里，我的感触就是三个月很充实，学到的东西很多，对自己很有帮助，性价比很高，如果去年一年我就开始去找一份实习，可能对自己的长进更有帮助，当然这过程可能会走一些弯路，但也是值得吧！&lt;/p&gt;
&lt;h3 id=&quot;选择行业&quot;&gt;&lt;a href=&quot;#选择行业&quot; class=&quot;headerlink&quot; title=&quot;选择行业&quot;&gt;&lt;/a&gt;选择行业&lt;/h3&gt;&lt;p&gt;这个要回到当初大学填报志愿的时候，那个时候就听说互联网IT行业比较吃香，而且赚的也比较多，所以当初在选择专业上就选择了一个跟IT有关的专业。确实是这样的，互联网这几年特别火，不管什么样的创业项目都要跟互联网挂钩就显得特别高大上，我也不明白为什么那些创业者都这样。在大学四年，从大二的时候就开始折腾互联网相关的实习参与创业团队，后来明白自己不能这样胡来，自己终究要靠手艺吃饭，大三的时候开始拾起书本搞学习准备考研，毕业之后要靠技术养活自己，带着一颗“有了技术到哪儿都有饭吃”的心态。好像折腾得并不怎么样，可能是自己的姿势不对吧，反正跟实习的经历比起来，不真正地参与到项目中的折腾都是瞎折腾。很庆幸自己选择的行业，现在也算能养活自己了，一切都慢慢来吧！与此同时，互联网行业的压力也不小，再加之自己是搞技术的，需要保持学习的热情。&lt;/p&gt;
&lt;h3 id=&quot;选择城市&quot;&gt;&lt;a href=&quot;#选择城市&quot; class=&quot;headerlink&quot; title=&quot;选择城市&quot;&gt;&lt;/a&gt;选择城市&lt;/h3&gt;&lt;p&gt;毕业了，大家的选择也是不一样的，有人选择回家，有人选择留下，还有人选择去别的地方。四年前，高考结束填报志愿的时候，第一选择的不是选择专业、学校，而是选择城市，在我眼里，选择城市还是挺重要的，而且当初自己的选择也没有错，自己选择到大城市，让自己的眼界变得开阔了，自己认识朋友也变多了。大城市有大城市的好处，比如就业机会多、交流接触的人群也多元化，但是大城市也有一些问题，比如住房、交通的压力，消费水平也高，虽然赚得多但消费也高。反正现在先这样吧，刚毕业要把目光放得长远一点，更应该着眼于平台而不是薪资，找一份工作能养活自己，然后让自己积累更多的经验。&lt;/p&gt;
&lt;h3 id=&quot;大学四年&quot;&gt;&lt;a href=&quot;#大学四年&quot; class=&quot;headerlink&quot; title=&quot;大学四年&quot;&gt;&lt;/a&gt;大学四年&lt;/h3&gt;&lt;p&gt;大学四年过的真的很快，一眨眼的功夫，四年就结束了。坦率地讲，这四年真的没有的学到什么，在大学也没指望学校能教给我什么，其实四年能学会怎么玩就行了，让自己的情商不降低就行！四年应该给你的不是你会解微分方程、会计算行列式，而是你要学会思考问题的方式，这个很重要的。。。四年结束了，我发现自己还不是很会“玩”！！！&lt;/p&gt;
&lt;h3 id=&quot;对即将走上工作的自己说的几句话&quot;&gt;&lt;a href=&quot;#对即将走上工作的自己说的几句话&quot; class=&quot;headerlink&quot; title=&quot;对即将走上工作的自己说的几句话&quot;&gt;&lt;/a&gt;对即将走上工作的自己说的几句话&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;年轻的时候应该多折腾折腾，想做的事，在考虑清楚了之后就去做，不要拖！&lt;/li&gt;
&lt;li&gt;对自己接下来的工作的三年五年作一个详细计划，不能盲目地工作，那样会失去动力的，清楚自己应该做什么不应该做什么。&lt;/li&gt;
&lt;li&gt;锻炼身体哟！锻炼身体哟！锻炼身体哟！身体是自己的，金钱换不回身体！&lt;/li&gt;
&lt;li&gt;该认认真真诚诚恳恳地撩个妹子咯！&lt;/li&gt;
&lt;/ul&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;去年的我写了一篇文章谈了谈了自己对毕业的感想，由于去年我才大三没有真正的那种体验，唯一的感觉就是数字的冲击——2015年毕业生746万，然而今年就不一样了，自己毕业了，面临的事很多——要找工作，要租房，要自己养活自己……&lt;/p&gt;
&lt;p&gt;前一段时间在微博上看到了一篇关于201
    
    </summary>
    
    
      <category term="毕业" scheme="http://www.dyike.com/tags/%E6%AF%95%E4%B8%9A/"/>
    
  </entry>
  
  <entry>
    <title>在这三个月里，我学到的那些事</title>
    <link href="http://www.dyike.com/2016/06/23/write-after-practice/"/>
    <id>http://www.dyike.com/2016/06/23/write-after-practice/</id>
    <published>2016-06-23T14:32:59.000Z</published>
    <updated>2016-06-23T15:47:59.000Z</updated>
    
    <content type="html">&lt;p&gt;三个月的时间过得真的很快，还记得过完年，在家过完寒假来北京第一件事就是面试，记得当初面试完的感觉真的很差，确实很差，知道自己是多么的差劲。那天下午去中关村面试，当初在理想国际八层的大厅，面我的是那个郝明，一个高高的哥儿，一听话音就是东北人了。面试整个过程也比较简单粗暴，没有想象中那样先做题，然后再问你一些乱七八糟的事情。还记得面试的前一天晚上，我还把之前自己的笔记翻了翻，看了看一些关于数据库的东西，偏偏没有面试的时候没触及到。面试就问了三个问题，也就是问那种考问题解决思路的，在我看来这就是考逻辑的东西。&lt;/p&gt;
&lt;p&gt;后来，我认识的大牛，现在也算是我的师哥，过来问了我一些简单的问题，问了我常见的网络请求都有哪些？当初我也就知道get、post，还有啥也就不知道了。结果师哥一口气说了七八个，我一听那叫一脸的懵逼。&lt;/p&gt;
&lt;p&gt;那天晚上回来了，我跟胡大大说了两句：“感觉今天的面试很糟糕”。后来也没说啥，只是回复了两句“你先来实习吧”、“年轻人要有信心”差不多就是这样的。等了半个月，终于在三个月前的今天，来到了sina weibo实习了，开启了我的实习生活。&lt;/p&gt;
&lt;p&gt;刚来的那会儿，真的是啥也不会，都是从别人的代码中学习，第一天先被安排有人带。人带这事，其实就是让你迁出项目的代码，然后自己看看代码，有啥不懂的就问。顶多开始的时候交代一下怎么看代码。差不多这样看了两个礼拜，也就给你两礼拜，那个时候还是有点压力的，如果真的两个礼拜之后还是啥都不会的话，这张脸真的没地方放啊！这个时候也只能靠自己勤问，多动手！在大公司有一个好处就是，遇到问题可以随便问各种人，前期真的是没人觉得你是最笨的，大家都乐于帮助你，所以这个时候的脸皮真的不能薄。现在想想，脸皮厚起来，差不多就是从这个时候开始的吧。&lt;/p&gt;
&lt;p&gt;说几点吧：&lt;br&gt;第一：我实习呆的组，版本控制用的svn，之前自己折腾的时候是git，自己也有一点git的基础，当用svn的，各种不习惯，感觉这个东西怎么这么难用，甚至有想法“为什么现在还用svn这个东西，难道就不能换git吗？”第一天就直说了，没接触过svn了。没一会儿功夫，带我的weiwei就找一篇blog链接给我，让我先学习，认认真真看完顶多一个小时，再稍微理解一下操作一下，差不多两个小时，后来发现这个东西不是很难，而且跟git也有很多相似的，所以说用起来更不是什么难事。就一个感想：稍微耐点心，认真一下，没有什么很难的。&lt;br&gt;第二：关于工具的使用，选择一个适合自己的工具真的特别重要，常说工欲善其事必先利其器，差不多就是这个道理吧，之前没有什么实战的项目，即便有点，也都是野路子，可以说不规范，从这个时候我也逐渐开始规范自己。比如编辑器的配置使用、网络请求的调试工具等等，有了前人的知道，这些都让我在今后的开发之路少走了一些弯路。成长或许就是这样一点一点地积累起来的。&lt;/p&gt;
&lt;p&gt;实习完全是看自己，因为这段时间有很多时间是属于自己。差不多实习快一个月的时候，需求不是很多，确实有很多时间是空闲，这个时候就开始忙于自己的毕设。毕设的项目就是基于laravel开发的在线学习的平台。之前也没有接触过laravel框架，可能环境配置，安装laravel就让我卡住了一段时间。虽然有师哥，但师哥好像还挺严厉的，每每咨询的时候，都会先说“你的问题是什么”然后再抛出一句“请看文档”。现在毕设都已经做完，回想这些事，都是非常在理的。说实话，自己的毕设做了差不多有两个礼拜吧，那段时间里，自己文档真的看得不是很仔细，为什么这么说呢？因为我的问题在文档里都有过解释说明。后来我总结的原因是，看文档的时候一定要动手试试里面的例子。这个很重要，有的东西过一遍大脑，过两天就可能忘了。反正在毕设的路上，师哥帮忙解决了几个坑，其次就是跟我苦口婆心的说了n遍的“看文档”。【写到这里，万一师哥看到了，会怎样呢？】&lt;/p&gt;
&lt;p&gt;接触最重要的一个项目就是项目sla了，这个我最熟练的应该是前台部分，后台的那个现在还不是很熟练。这个环节，搞得最多的就是写接口了。然后是前端用js处理渲染，这里，这里，这里，我有一个硬伤，这个过程写js真的写很痛苦，主要是自己的真的还不是很熟悉js，自己写的那点东西，我自己都看不下去了。现如今一直在补，还有关于php代码的事，这里有一个我自己不知道是好还是不好的东西：由于项目比较庞大，有一些业务处理是相似的，然后我在我开发的过程中总结了一部分，就一言不合封装函数。后来也发一个问题，过了两个周自己再去看的时候似乎又有点看不懂自己当初是怎么写的，不知道我这样是好还是不好。关于php数组处理的，我还特地整理了一篇文章，今后需要多消化学习。&lt;/p&gt;
&lt;p&gt;今后要做的事，以及对自己的规划：&lt;br&gt;第一：学习跟产品沟通好，首先知道是干什么的，需要把话想清楚说清楚，这样跟产品沟通起来才会顺利。这是今后工作中必不可少的一关。&lt;br&gt;第二：继续巩固php的基础知识，常用的两百多个函数一定要做到滚瓜烂熟，知道参数的意义。【听说有的时候面试，就奇葩的问，某某函数的第二个参数是干嘛的，能不能去掉】、【还有有的时候参数的顺序不同，然后出现的结果就不一样了，自己还找不出原因】&lt;br&gt;第三：学好C语言吧，基础！&lt;br&gt;第四：查漏补缺，比如js的学习，http协议、tcp/Ip协议的详解，还有就是linux的操作&lt;br&gt;第五：有事没事多学习，多写blog，然后专注撩(专)妹！！！&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;三个月的时间过得真的很快，还记得过完年，在家过完寒假来北京第一件事就是面试，记得当初面试完的感觉真的很差，确实很差，知道自己是多么的差劲。那天下午去中关村面试，当初在理想国际八层的大厅，面我的是那个郝明，一个高高的哥儿，一听话音就是东北人了。面试整个过程也比较简单粗暴，没有
    
    </summary>
    
    
      <category term="实习" scheme="http://www.dyike.com/tags/%E5%AE%9E%E4%B9%A0/"/>
    
  </entry>
  
  <entry>
    <title>PHP数组的“合并相加”</title>
    <link href="http://www.dyike.com/2016/06/08/php-array-combine-with-array/"/>
    <id>http://www.dyike.com/2016/06/08/php-array-combine-with-array/</id>
    <published>2016-06-08T02:31:24.000Z</published>
    <updated>2016-06-08T09:02:33.000Z</updated>
    
    <content type="html">&lt;blockquote&gt;
&lt;p&gt;情况大概是这样的，一个刚入门PHP程序狗，某天接到了一个需求，需要从两个表里获取数据，这两张表的字段是相同的，但记录的类型不同，现在需要将两个类型合并了，不建新表。大概就是把相同字段值的记录中其他某个字段值相加这个意思(可能说的不清楚看下面的例子就知道是什么意思了)。当时第一个反应就是写sql语句，拼啊拼，也不是不行，写了一个sql语句，等了n分钟重要出结果，要是这样就上线了，那不得被吊起来打。可能还是自己的原因，自己数据库学得特别烂，不会写sql语句，只能在原有的程序上，照葫芦画瓢儿，各自从每个表中去取数据，然后处理数组。也不知道这样是不是可行的。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id=&quot;情形一：先来一个简单的相加，很简单的&quot;&gt;&lt;a href=&quot;#情形一：先来一个简单的相加，很简单的&quot; class=&quot;headerlink&quot; title=&quot;情形一：先来一个简单的相加，很简单的&quot;&gt;&lt;/a&gt;情形一：先来一个简单的相加，很简单的&lt;/h3&gt;&lt;p&gt;数组1:&lt;/p&gt;
&lt;figure class=&quot;highlight php&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;Array&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;(&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;string&quot;&gt;&#39;0&#39;&lt;/span&gt; =&amp;gt; &lt;span class=&quot;number&quot;&gt;20&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;string&quot;&gt;&#39;1&#39;&lt;/span&gt; =&amp;gt; &lt;span class=&quot;number&quot;&gt;10&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;string&quot;&gt;&#39;2&#39;&lt;/span&gt; =&amp;gt; &lt;span class=&quot;number&quot;&gt;23&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;string&quot;&gt;&#39;3&#39;&lt;/span&gt; =&amp;gt; &lt;span class=&quot;number&quot;&gt;12&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;)&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;数组2：&lt;/p&gt;
&lt;figure class=&quot;highlight php&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;Array&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;(&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;string&quot;&gt;&#39;0&#39;&lt;/span&gt; =&amp;gt; &lt;span class=&quot;number&quot;&gt;10&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;string&quot;&gt;&#39;1&#39;&lt;/span&gt; =&amp;gt; &lt;span class=&quot;number&quot;&gt;5&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;string&quot;&gt;&#39;2&#39;&lt;/span&gt; =&amp;gt; &lt;span class=&quot;number&quot;&gt;12&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;)&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;应该得到的结果是：&lt;/p&gt;
&lt;figure class=&quot;highlight php&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;Array&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;(&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;string&quot;&gt;&#39;0&#39;&lt;/span&gt; =&amp;gt; &lt;span class=&quot;number&quot;&gt;30&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;string&quot;&gt;&#39;1&#39;&lt;/span&gt; =&amp;gt; &lt;span class=&quot;number&quot;&gt;15&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;string&quot;&gt;&#39;2&#39;&lt;/span&gt; =&amp;gt; &lt;span class=&quot;number&quot;&gt;35&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;string&quot;&gt;&#39;3&#39;&lt;/span&gt; =&amp;gt; &lt;span class=&quot;number&quot;&gt;12&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;)&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;处理函数如下：&lt;/p&gt;
&lt;figure class=&quot;highlight php&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;array_add&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;($arr1,$arr2)&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;//根据键名获取两个数组的交集&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    $arr=array_intersect_key($arr1, $arr2);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;//遍历第二个数组，如果键名不存在与第一个数组，将数组元素增加到第一个数组&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;foreach&lt;/span&gt;($arr2 &lt;span class=&quot;keyword&quot;&gt;as&lt;/span&gt; $key =&amp;gt; $value)&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt;(!array_key_exists($key, $arr1))&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            $arr1[$key] = $value;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;//计算键名相同的数组元素的和，并且替换原数组中相同键名所对应的元素值&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;foreach&lt;/span&gt;($arr &lt;span class=&quot;keyword&quot;&gt;as&lt;/span&gt; $key =&amp;gt; $value)&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        $arr1[$key] = $arr1[$key] + $arr2[$key];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;//返回相加后的数组&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; $arr1;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;情形二：比如有有两个数组&quot;&gt;&lt;a href=&quot;#情形二：比如有有两个数组&quot; class=&quot;headerlink&quot; title=&quot;情形二：比如有有两个数组&quot;&gt;&lt;/a&gt;情形二：比如有有两个数组&lt;/h3&gt;&lt;p&gt;数组1:&lt;/p&gt;
&lt;figure class=&quot;highlight php&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;array&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;(&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;string&quot;&gt;&#39;0&#39;&lt;/span&gt;=&amp;gt;&lt;span class=&quot;keyword&quot;&gt;array&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    (&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;string&quot;&gt;&#39;type&#39;&lt;/span&gt;=&amp;gt;&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;string&quot;&gt;&#39;hits&#39;&lt;/span&gt;=&amp;gt;&lt;span class=&quot;number&quot;&gt;10&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    ),&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;string&quot;&gt;&#39;1&#39;&lt;/span&gt;=&amp;gt;&lt;span class=&quot;keyword&quot;&gt;array&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    (&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;string&quot;&gt;&#39;type&#39;&lt;/span&gt;=&amp;gt;&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;string&quot;&gt;&#39;hits&#39;&lt;/span&gt;=&amp;gt;&lt;span class=&quot;number&quot;&gt;20&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    ),&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;string&quot;&gt;&#39;2&#39;&lt;/span&gt;=&amp;gt;&lt;span class=&quot;keyword&quot;&gt;array&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    (&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;string&quot;&gt;&#39;type&#39;&lt;/span&gt;=&amp;gt;&lt;span class=&quot;number&quot;&gt;2&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;string&quot;&gt;&#39;hits&#39;&lt;/span&gt;=&amp;gt;&lt;span class=&quot;number&quot;&gt;15&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    )&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;)&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;数组2:&lt;/p&gt;
&lt;figure class=&quot;highlight php&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;array&lt;/span&gt;(&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;string&quot;&gt;&#39;0&#39;&lt;/span&gt;=&amp;gt;&lt;span class=&quot;keyword&quot;&gt;array&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    (&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;string&quot;&gt;&#39;type&#39;&lt;/span&gt;=&amp;gt;&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;string&quot;&gt;&#39;hits&#39;&lt;/span&gt;=&amp;gt;&lt;span class=&quot;number&quot;&gt;8&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    ),&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;string&quot;&gt;&#39;1&#39;&lt;/span&gt;=&amp;gt;&lt;span class=&quot;keyword&quot;&gt;array&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    (&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;string&quot;&gt;&#39;type&#39;&lt;/span&gt;=&amp;gt;&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;string&quot;&gt;&#39;hits&#39;&lt;/span&gt;=&amp;gt;&lt;span class=&quot;number&quot;&gt;12&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    ),&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;string&quot;&gt;&#39;2&#39;&lt;/span&gt;=&amp;gt;&lt;span class=&quot;keyword&quot;&gt;array&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    (&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;string&quot;&gt;&#39;type&#39;&lt;/span&gt;=&amp;gt;&lt;span class=&quot;number&quot;&gt;2&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;string&quot;&gt;&#39;hits&#39;&lt;/span&gt;=&amp;gt;&lt;span class=&quot;number&quot;&gt;14&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    )，&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;string&quot;&gt;&#39;3&#39;&lt;/span&gt;=&amp;gt;&lt;span class=&quot;keyword&quot;&gt;array&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    (&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;string&quot;&gt;&#39;type&#39;&lt;/span&gt;=&amp;gt;&lt;span class=&quot;number&quot;&gt;3&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;string&quot;&gt;&#39;hits&#39;&lt;/span&gt;=&amp;gt;&lt;span class=&quot;number&quot;&gt;11&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    )&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;)&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;按照要求后，需要得到结果是：&lt;/p&gt;
&lt;figure class=&quot;highlight php&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;array&lt;/span&gt;(&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;string&quot;&gt;&#39;0&#39;&lt;/span&gt;=&amp;gt;&lt;span class=&quot;keyword&quot;&gt;array&lt;/span&gt;(&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;string&quot;&gt;&#39;type&#39;&lt;/span&gt;=&amp;gt;&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;string&quot;&gt;&#39;hits&#39;&lt;/span&gt;=&amp;gt;&lt;span class=&quot;number&quot;&gt;18&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    ),&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;string&quot;&gt;&#39;1&#39;&lt;/span&gt;=&amp;gt;&lt;span class=&quot;keyword&quot;&gt;array&lt;/span&gt;(&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;string&quot;&gt;&#39;type&#39;&lt;/span&gt;=&amp;gt;&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;string&quot;&gt;&#39;hits&#39;&lt;/span&gt;=&amp;gt;&lt;span class=&quot;number&quot;&gt;32&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    ),&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;string&quot;&gt;&#39;2&#39;&lt;/span&gt;=&amp;gt;&lt;span class=&quot;keyword&quot;&gt;array&lt;/span&gt;(&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;string&quot;&gt;&#39;type&#39;&lt;/span&gt;=&amp;gt;&lt;span class=&quot;number&quot;&gt;2&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;string&quot;&gt;&#39;hits&#39;&lt;/span&gt;=&amp;gt;&lt;span class=&quot;number&quot;&gt;29&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    )，&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;string&quot;&gt;&#39;3&#39;&lt;/span&gt;=&amp;gt;&lt;span class=&quot;keyword&quot;&gt;array&lt;/span&gt;(&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;string&quot;&gt;&#39;type&#39;&lt;/span&gt;=&amp;gt;&lt;span class=&quot;number&quot;&gt;3&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;string&quot;&gt;&#39;hits&#39;&lt;/span&gt;=&amp;gt;&lt;span class=&quot;number&quot;&gt;11&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    )&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;)&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;处理函数：&lt;/p&gt;
&lt;figure class=&quot;highlight php&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;arrayAddArray&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;($res1,$res2,$key1,$key2)&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    $re0 = array_merge($res1,$res2);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    $tmp = &lt;span class=&quot;keyword&quot;&gt;array&lt;/span&gt;();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;foreach&lt;/span&gt;($re0 &lt;span class=&quot;keyword&quot;&gt;as&lt;/span&gt; $k =&amp;gt; $v)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;isset&lt;/span&gt;($tmp[$v[$key1]]) ? $tmp[$v[$key1]] += $v[$key2] : $tmp[$v[$key1]] = $v[$key2];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    $result = &lt;span class=&quot;keyword&quot;&gt;array&lt;/span&gt;();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;foreach&lt;/span&gt;($tmp &lt;span class=&quot;keyword&quot;&gt;as&lt;/span&gt; $k =&amp;gt; $v)&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        $result[] = &lt;span class=&quot;keyword&quot;&gt;array&lt;/span&gt;($key1=&amp;gt;$k,$key2=&amp;gt;$v);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; $result;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;情形三：处理两个数组&quot;&gt;&lt;a href=&quot;#情形三：处理两个数组&quot; class=&quot;headerlink&quot; title=&quot;情形三：处理两个数组&quot;&gt;&lt;/a&gt;情形三：处理两个数组&lt;/h3&gt;&lt;p&gt;数组1:&lt;/p&gt;
&lt;figure class=&quot;highlight php&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;array&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;(&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;string&quot;&gt;&#39;0&#39;&lt;/span&gt;=&amp;gt;&lt;span class=&quot;keyword&quot;&gt;array&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    (&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;string&quot;&gt;&#39;type&#39;&lt;/span&gt;=&amp;gt;&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;string&quot;&gt;&#39;hits&#39;&lt;/span&gt;=&amp;gt;&lt;span class=&quot;number&quot;&gt;10&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;string&quot;&gt;&#39;ttt&#39;&lt;/span&gt;=&amp;gt;&lt;span class=&quot;number&quot;&gt;0.1&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    ),&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;string&quot;&gt;&#39;1&#39;&lt;/span&gt;=&amp;gt;&lt;span class=&quot;keyword&quot;&gt;array&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    (&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;string&quot;&gt;&#39;type&#39;&lt;/span&gt;=&amp;gt;&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;string&quot;&gt;&#39;hits&#39;&lt;/span&gt;=&amp;gt;&lt;span class=&quot;number&quot;&gt;20&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;string&quot;&gt;&#39;ttt&#39;&lt;/span&gt;=&amp;gt;&lt;span class=&quot;number&quot;&gt;0.2&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    ),&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;string&quot;&gt;&#39;2&#39;&lt;/span&gt;=&amp;gt;&lt;span class=&quot;keyword&quot;&gt;array&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    (&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;string&quot;&gt;&#39;type&#39;&lt;/span&gt;=&amp;gt;&lt;span class=&quot;number&quot;&gt;2&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;string&quot;&gt;&#39;hits&#39;&lt;/span&gt;=&amp;gt;&lt;span class=&quot;number&quot;&gt;15&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;string&quot;&gt;&#39;ttt&#39;&lt;/span&gt;=&amp;gt;&lt;span class=&quot;number&quot;&gt;0.12&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    )&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;)&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;数组2:&lt;/p&gt;
&lt;figure class=&quot;highlight php&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;array&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;(&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;string&quot;&gt;&#39;0&#39;&lt;/span&gt;=&amp;gt;&lt;span class=&quot;keyword&quot;&gt;array&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    (&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;string&quot;&gt;&#39;type&#39;&lt;/span&gt;=&amp;gt;&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;string&quot;&gt;&#39;hits&#39;&lt;/span&gt;=&amp;gt;&lt;span class=&quot;number&quot;&gt;8&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;string&quot;&gt;&#39;ttt&#39;&lt;/span&gt;=&amp;gt;&lt;span class=&quot;number&quot;&gt;0.1&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    ),&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;string&quot;&gt;&#39;1&#39;&lt;/span&gt;=&amp;gt;&lt;span class=&quot;keyword&quot;&gt;array&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    (&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;string&quot;&gt;&#39;type&#39;&lt;/span&gt;=&amp;gt;&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;string&quot;&gt;&#39;hits&#39;&lt;/span&gt;=&amp;gt;&lt;span class=&quot;number&quot;&gt;12&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;string&quot;&gt;&#39;ttt&#39;&lt;/span&gt;=&amp;gt;&lt;span class=&quot;number&quot;&gt;0.12&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    ),&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;string&quot;&gt;&#39;2&#39;&lt;/span&gt;=&amp;gt;&lt;span class=&quot;keyword&quot;&gt;array&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    (&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;string&quot;&gt;&#39;type&#39;&lt;/span&gt;=&amp;gt;&lt;span class=&quot;number&quot;&gt;2&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;string&quot;&gt;&#39;hits&#39;&lt;/span&gt;=&amp;gt;&lt;span class=&quot;number&quot;&gt;14&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;string&quot;&gt;&#39;ttt&#39;&lt;/span&gt;=&amp;gt;&lt;span class=&quot;number&quot;&gt;0.2&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    ),&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;string&quot;&gt;&#39;3&#39;&lt;/span&gt;=&amp;gt;&lt;span class=&quot;keyword&quot;&gt;array&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    (&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;string&quot;&gt;&#39;type&#39;&lt;/span&gt;=&amp;gt;&lt;span class=&quot;number&quot;&gt;3&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;string&quot;&gt;&#39;hits&#39;&lt;/span&gt;=&amp;gt;&lt;span class=&quot;number&quot;&gt;11&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;string&quot;&gt;&#39;ttt&#39;&lt;/span&gt;=&amp;gt;&lt;span class=&quot;number&quot;&gt;0.12&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    )&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;)&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;按照要求后，需要得到结果是：&lt;/p&gt;
&lt;figure class=&quot;highlight php&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;array&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;(&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;string&quot;&gt;&#39;0&#39;&lt;/span&gt;=&amp;gt;&lt;span class=&quot;keyword&quot;&gt;array&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    (&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;string&quot;&gt;&#39;type&#39;&lt;/span&gt;=&amp;gt;&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;string&quot;&gt;&#39;hits&#39;&lt;/span&gt;=&amp;gt;&lt;span class=&quot;number&quot;&gt;18&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;string&quot;&gt;&#39;ttt&#39;&lt;/span&gt;=&amp;gt;&lt;span class=&quot;number&quot;&gt;0.2&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    ),&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;string&quot;&gt;&#39;1&#39;&lt;/span&gt;=&amp;gt;&lt;span class=&quot;keyword&quot;&gt;array&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    (&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;string&quot;&gt;&#39;type&#39;&lt;/span&gt;=&amp;gt;&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;string&quot;&gt;&#39;hits&#39;&lt;/span&gt;=&amp;gt;&lt;span class=&quot;number&quot;&gt;32&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;string&quot;&gt;&#39;ttt&#39;&lt;/span&gt;=&amp;gt;&lt;span class=&quot;number&quot;&gt;0.32&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    ),&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;string&quot;&gt;&#39;2&#39;&lt;/span&gt;=&amp;gt;&lt;span class=&quot;keyword&quot;&gt;array&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    (&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;string&quot;&gt;&#39;type&#39;&lt;/span&gt;=&amp;gt;&lt;span class=&quot;number&quot;&gt;2&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;string&quot;&gt;&#39;hits&#39;&lt;/span&gt;=&amp;gt;&lt;span class=&quot;number&quot;&gt;29&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;string&quot;&gt;&#39;ttt&#39;&lt;/span&gt;=&amp;gt;&lt;span class=&quot;number&quot;&gt;0.32&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    ),&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;string&quot;&gt;&#39;3&#39;&lt;/span&gt;=&amp;gt;&lt;span class=&quot;keyword&quot;&gt;array&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    (&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;string&quot;&gt;&#39;type&#39;&lt;/span&gt;=&amp;gt;&lt;span class=&quot;number&quot;&gt;3&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;string&quot;&gt;&#39;hits&#39;&lt;/span&gt;=&amp;gt;&lt;span class=&quot;number&quot;&gt;11&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;string&quot;&gt;&#39;ttt&#39;&lt;/span&gt;=&amp;gt;&lt;span class=&quot;number&quot;&gt;0.12&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    )&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;)&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;处理函数：&lt;/p&gt;
&lt;figure class=&quot;highlight php&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//里面的每个数组有三个键名，两个二维数组合并相加不再添加新的键名&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;arrayAdd3ArrayWithoutNewKey&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;($re1,$re2,$key1,$key2,$key3)&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    $res1 = arrayAddArray($re1, $re2, $key1, $key2);&lt;span class=&quot;comment&quot;&gt;//先将$key2键名对应的值相加,用到上面的函数。&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    $res2 = arrayAddArray($re1, $re2, $key1, $key3); &lt;span class=&quot;comment&quot;&gt;//将$key3键名对应的值相加&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    $res = array_merge($res1, $res2);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    $tmp = &lt;span class=&quot;keyword&quot;&gt;array&lt;/span&gt;();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;foreach&lt;/span&gt; ($res &lt;span class=&quot;keyword&quot;&gt;as&lt;/span&gt; $v) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (&lt;span class=&quot;keyword&quot;&gt;isset&lt;/span&gt;($tmp[$v[$key1]])) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;keyword&quot;&gt;empty&lt;/span&gt;($tmp[$v[$key1]][$key2]) &amp;amp;&amp;amp; $tmp[$v[$key1]][$key2] = &lt;span class=&quot;keyword&quot;&gt;isset&lt;/span&gt;($v[$key2]) ? $v[$key2] : &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;keyword&quot;&gt;empty&lt;/span&gt;($tmp[$v[$key1]][$key3]) &amp;amp;&amp;amp; $tmp[$v[$key1]][$key3] = &lt;span class=&quot;keyword&quot;&gt;isset&lt;/span&gt;($v[$key3]) ? $v[$key3] : &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125; &lt;span class=&quot;keyword&quot;&gt;else&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            $tmp[$v[$key1]] = &lt;span class=&quot;keyword&quot;&gt;array&lt;/span&gt;(&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                $key1 =&amp;gt; $v[$key1],&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                $key2 =&amp;gt; &lt;span class=&quot;keyword&quot;&gt;isset&lt;/span&gt;($v[$key2]) ? $v[$key2] : &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                $key3 =&amp;gt; &lt;span class=&quot;keyword&quot;&gt;isset&lt;/span&gt;($v[$key3]) ? $v[$key3] : &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            );&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; $tmp;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;情形四-还是两个二维数组需要合并相加，可能现在是这样的-需要增加一个键计算新的值：&quot;&gt;&lt;a href=&quot;#情形四-还是两个二维数组需要合并相加，可能现在是这样的-需要增加一个键计算新的值：&quot; class=&quot;headerlink&quot; title=&quot;情形四:还是两个二维数组需要合并相加，可能现在是这样的,需要增加一个键计算新的值：&quot;&gt;&lt;/a&gt;情形四:还是两个二维数组需要合并相加，可能现在是这样的,需要增加一个键计算新的值：&lt;/h3&gt;&lt;p&gt;数组1:&lt;/p&gt;
&lt;figure class=&quot;highlight php&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;array&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;(&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;string&quot;&gt;&#39;0&#39;&lt;/span&gt;=&amp;gt;&lt;span class=&quot;keyword&quot;&gt;array&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    (&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;string&quot;&gt;&#39;type&#39;&lt;/span&gt;=&amp;gt;&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;string&quot;&gt;&#39;hits1&#39;&lt;/span&gt;=&amp;gt;&lt;span class=&quot;number&quot;&gt;10&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;string&quot;&gt;&#39;hits2&#39;&lt;/span&gt;=&amp;gt;&lt;span class=&quot;number&quot;&gt;15&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    ),&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;string&quot;&gt;&#39;1&#39;&lt;/span&gt;=&amp;gt;&lt;span class=&quot;keyword&quot;&gt;array&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    (&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;string&quot;&gt;&#39;type&#39;&lt;/span&gt;=&amp;gt;&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;string&quot;&gt;&#39;hits1&#39;&lt;/span&gt;=&amp;gt;&lt;span class=&quot;number&quot;&gt;20&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;string&quot;&gt;&#39;hits2&#39;&lt;/span&gt;=&amp;gt;&lt;span class=&quot;number&quot;&gt;12&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    ),&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;string&quot;&gt;&#39;2&#39;&lt;/span&gt;=&amp;gt;&lt;span class=&quot;keyword&quot;&gt;array&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    (&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;string&quot;&gt;&#39;type&#39;&lt;/span&gt;=&amp;gt;&lt;span class=&quot;number&quot;&gt;2&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;string&quot;&gt;&#39;hits1&#39;&lt;/span&gt;=&amp;gt;&lt;span class=&quot;number&quot;&gt;15&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;string&quot;&gt;&#39;hits2&#39;&lt;/span&gt;=&amp;gt;&lt;span class=&quot;number&quot;&gt;18&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    )           &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;);&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;数组2:&lt;/p&gt;
&lt;figure class=&quot;highlight php&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;array&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;(&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;string&quot;&gt;&#39;0&#39;&lt;/span&gt;=&amp;gt;&lt;span class=&quot;keyword&quot;&gt;array&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    (&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;string&quot;&gt;&#39;type&#39;&lt;/span&gt;=&amp;gt;&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;string&quot;&gt;&#39;hits1&#39;&lt;/span&gt;=&amp;gt;&lt;span class=&quot;number&quot;&gt;8&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;string&quot;&gt;&#39;hits2&#39;&lt;/span&gt;=&amp;gt;&lt;span class=&quot;number&quot;&gt;12&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    ),&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;string&quot;&gt;&#39;1&#39;&lt;/span&gt;=&amp;gt;&lt;span class=&quot;keyword&quot;&gt;array&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    (&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;string&quot;&gt;&#39;type&#39;&lt;/span&gt;=&amp;gt;&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;string&quot;&gt;&#39;hits1&#39;&lt;/span&gt;=&amp;gt;&lt;span class=&quot;number&quot;&gt;12&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;string&quot;&gt;&#39;hits2&#39;&lt;/span&gt;=&amp;gt;&lt;span class=&quot;number&quot;&gt;22&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    ),&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;string&quot;&gt;&#39;2&#39;&lt;/span&gt;=&amp;gt;&lt;span class=&quot;keyword&quot;&gt;array&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    (&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;string&quot;&gt;&#39;type&#39;&lt;/span&gt;=&amp;gt;&lt;span class=&quot;number&quot;&gt;2&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;string&quot;&gt;&#39;hits1&#39;&lt;/span&gt;=&amp;gt;&lt;span class=&quot;number&quot;&gt;14&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;string&quot;&gt;&#39;hits2&#39;&lt;/span&gt;=&amp;gt;&lt;span class=&quot;number&quot;&gt;12&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    ),&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;string&quot;&gt;&#39;3&#39;&lt;/span&gt;=&amp;gt;&lt;span class=&quot;keyword&quot;&gt;array&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    (&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;string&quot;&gt;&#39;type&#39;&lt;/span&gt;=&amp;gt;&lt;span class=&quot;number&quot;&gt;3&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;string&quot;&gt;&#39;hits1&#39;&lt;/span&gt;=&amp;gt;&lt;span class=&quot;number&quot;&gt;11&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;string&quot;&gt;&#39;hits2&#39;&lt;/span&gt;=&amp;gt;&lt;span class=&quot;number&quot;&gt;10&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    )&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;)&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;按照要求后，需要得到结果是：(原先rate比率是在sql语句中就算好的，现在要得到正确的比率，就得先将’hits1’相加，’hits2’相加，相加完了再计算)&lt;/p&gt;
&lt;figure class=&quot;highlight php&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;35&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;array&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;(&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;string&quot;&gt;&#39;0&#39;&lt;/span&gt; =&amp;gt; &lt;span class=&quot;keyword&quot;&gt;array&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        (&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;string&quot;&gt;&#39;type&#39;&lt;/span&gt;=&amp;gt;&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;string&quot;&gt;&#39;hits1&#39;&lt;/span&gt;=&amp;gt;&lt;span class=&quot;number&quot;&gt;18&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;string&quot;&gt;&#39;hits2&#39;&lt;/span&gt;=&amp;gt;&lt;span class=&quot;number&quot;&gt;27&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;string&quot;&gt;&#39;rate&#39;&lt;/span&gt;=&amp;gt;&lt;span class=&quot;number&quot;&gt;0.67&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        )&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;string&quot;&gt;&#39;1&#39;&lt;/span&gt; =&amp;gt; &lt;span class=&quot;keyword&quot;&gt;array&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        (&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;string&quot;&gt;&#39;type&#39;&lt;/span&gt;=&amp;gt;&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;string&quot;&gt;&#39;hits1&#39;&lt;/span&gt;=&amp;gt;&lt;span class=&quot;number&quot;&gt;32&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;string&quot;&gt;&#39;hits2&#39;&lt;/span&gt;=&amp;gt;&lt;span class=&quot;number&quot;&gt;34&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;string&quot;&gt;&#39;rate&#39;&lt;/span&gt;=&amp;gt;&lt;span class=&quot;number&quot;&gt;0.94&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        )&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;string&quot;&gt;&#39;2&#39;&lt;/span&gt; =&amp;gt; &lt;span class=&quot;keyword&quot;&gt;array&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        (&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;string&quot;&gt;&#39;type&#39;&lt;/span&gt;=&amp;gt;&lt;span class=&quot;number&quot;&gt;2&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;string&quot;&gt;&#39;hits1&#39;&lt;/span&gt;=&amp;gt;&lt;span class=&quot;number&quot;&gt;29&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;string&quot;&gt;&#39;hits2&#39;&lt;/span&gt;=&amp;gt;&lt;span class=&quot;number&quot;&gt;30&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;string&quot;&gt;&#39;rate&#39;&lt;/span&gt;=&amp;gt;&lt;span class=&quot;number&quot;&gt;0.97&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        )&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;string&quot;&gt;&#39;3&#39;&lt;/span&gt; =&amp;gt; &lt;span class=&quot;keyword&quot;&gt;array&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        (&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;string&quot;&gt;&#39;type&#39;&lt;/span&gt;=&amp;gt;&lt;span class=&quot;number&quot;&gt;3&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;string&quot;&gt;&#39;hits1&#39;&lt;/span&gt;=&amp;gt;&lt;span class=&quot;number&quot;&gt;5&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;string&quot;&gt;&#39;hits2&#39;&lt;/span&gt;=&amp;gt;&lt;span class=&quot;number&quot;&gt;10&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;string&quot;&gt;&#39;rate&#39;&lt;/span&gt;=&amp;gt;&lt;span class=&quot;number&quot;&gt;0.50&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        )&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;)&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;处理函数：&lt;/p&gt;
&lt;figure class=&quot;highlight php&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;arrayAdd3Array&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;($re1,$re2,$key1,$key2,$key3,$key4)&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    $res1 = arrayAddArray($re1, $re2, $key1, $key2);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    $res2 = arrayAddArray($re1, $re2, $key1, $key3);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    $res = array_merge($res1, $res2);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    $tmp = &lt;span class=&quot;keyword&quot;&gt;array&lt;/span&gt;();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;foreach&lt;/span&gt; ($res &lt;span class=&quot;keyword&quot;&gt;as&lt;/span&gt; $v) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (&lt;span class=&quot;keyword&quot;&gt;isset&lt;/span&gt;($tmp[$v[$key1]])) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;keyword&quot;&gt;empty&lt;/span&gt;($tmp[$v[$key1]][$key2]) &amp;amp;&amp;amp; $tmp[$v[$key1]][$key2] = &lt;span class=&quot;keyword&quot;&gt;isset&lt;/span&gt;($v[$key2]) ? $v[$key2] : &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;keyword&quot;&gt;empty&lt;/span&gt;($tmp[$v[$key1]][$key3]) &amp;amp;&amp;amp; $tmp[$v[$key1]][$key3] = &lt;span class=&quot;keyword&quot;&gt;isset&lt;/span&gt;($v[$key3]) ? $v[$key3] : &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt;(!&lt;span class=&quot;keyword&quot;&gt;empty&lt;/span&gt;($tmp[$v[$key1]][$key2]) &amp;amp;&amp;amp; !&lt;span class=&quot;keyword&quot;&gt;empty&lt;/span&gt;($tmp[$v[$key1]][$key3]))&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                $tmp[$v[$key1]][$key4] = $tmp[$v[$key1]][$key2]/$tmp[$v[$key1]][$key3];  &lt;span class=&quot;comment&quot;&gt;//计算新添加的键值&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125; &lt;span class=&quot;keyword&quot;&gt;else&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            $tmp[$v[$key1]] = &lt;span class=&quot;keyword&quot;&gt;array&lt;/span&gt;(&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                $key1 =&amp;gt; $v[$key1],&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                $key2 =&amp;gt; &lt;span class=&quot;keyword&quot;&gt;isset&lt;/span&gt;($v[$key2]) ? $v[$key2] : &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                $key3 =&amp;gt; &lt;span class=&quot;keyword&quot;&gt;isset&lt;/span&gt;($v[$key3]) ? $v[$key3] : &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            );&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; $tmp;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;情形五：变着花样玩，现在是根据两个键判断然后在合并&quot;&gt;&lt;a href=&quot;#情形五：变着花样玩，现在是根据两个键判断然后在合并&quot; class=&quot;headerlink&quot; title=&quot;情形五：变着花样玩，现在是根据两个键判断然后在合并&quot;&gt;&lt;/a&gt;情形五：变着花样玩，现在是根据两个键判断然后在合并&lt;/h3&gt;&lt;p&gt;数组一：&lt;/p&gt;
&lt;figure class=&quot;highlight php&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;array&lt;/span&gt;(&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;string&quot;&gt;&#39;0&#39;&lt;/span&gt;=&amp;gt;&lt;span class=&quot;keyword&quot;&gt;array&lt;/span&gt;(&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;string&quot;&gt;&#39;type&#39;&lt;/span&gt;=&amp;gt;&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;string&quot;&gt;&#39;num&#39;&lt;/span&gt;=&amp;gt;&lt;span class=&quot;string&quot;&gt;&#39;500&#39;&lt;/span&gt;，&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;string&quot;&gt;&#39;hits&#39;&lt;/span&gt;=&amp;gt;&lt;span class=&quot;number&quot;&gt;12&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    ),&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;string&quot;&gt;&#39;1&#39;&lt;/span&gt;=&amp;gt;&lt;span class=&quot;keyword&quot;&gt;array&lt;/span&gt;(&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;string&quot;&gt;&#39;type&#39;&lt;/span&gt;=&amp;gt;&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;string&quot;&gt;&#39;num&#39;&lt;/span&gt;=&amp;gt;&lt;span class=&quot;string&quot;&gt;&#39;502&#39;&lt;/span&gt;，&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;string&quot;&gt;&#39;hits&#39;&lt;/span&gt;=&amp;gt;&lt;span class=&quot;number&quot;&gt;30&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    ),&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;string&quot;&gt;&#39;2&#39;&lt;/span&gt;=&amp;gt;&lt;span class=&quot;keyword&quot;&gt;array&lt;/span&gt;(&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;string&quot;&gt;&#39;type&#39;&lt;/span&gt;=&amp;gt;&lt;span class=&quot;number&quot;&gt;2&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;string&quot;&gt;&#39;num&#39;&lt;/span&gt;=&amp;gt;&lt;span class=&quot;string&quot;&gt;&#39;404&#39;&lt;/span&gt;，&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;string&quot;&gt;&#39;hits&#39;&lt;/span&gt;=&amp;gt;&lt;span class=&quot;number&quot;&gt;10&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    )，&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;string&quot;&gt;&#39;3&#39;&lt;/span&gt;=&amp;gt;&lt;span class=&quot;keyword&quot;&gt;array&lt;/span&gt;(&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;string&quot;&gt;&#39;type&#39;&lt;/span&gt;=&amp;gt;&lt;span class=&quot;number&quot;&gt;3&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;string&quot;&gt;&#39;num&#39;&lt;/span&gt;=&amp;gt;&lt;span class=&quot;string&quot;&gt;&#39;400&#39;&lt;/span&gt;，&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;string&quot;&gt;&#39;hits&#39;&lt;/span&gt;=&amp;gt;&lt;span class=&quot;number&quot;&gt;14&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    )&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;)&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;数组二：&lt;/p&gt;
&lt;figure class=&quot;highlight php&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;array&lt;/span&gt;(&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;string&quot;&gt;&#39;0&#39;&lt;/span&gt;=&amp;gt;&lt;span class=&quot;keyword&quot;&gt;array&lt;/span&gt;(&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;string&quot;&gt;&#39;type&#39;&lt;/span&gt;=&amp;gt;&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;string&quot;&gt;&#39;num&#39;&lt;/span&gt;=&amp;gt;&lt;span class=&quot;string&quot;&gt;&#39;500&#39;&lt;/span&gt;，&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;string&quot;&gt;&#39;hits&#39;&lt;/span&gt;=&amp;gt;&lt;span class=&quot;number&quot;&gt;15&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    ),&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;string&quot;&gt;&#39;1&#39;&lt;/span&gt;=&amp;gt;&lt;span class=&quot;keyword&quot;&gt;array&lt;/span&gt;(&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;string&quot;&gt;&#39;type&#39;&lt;/span&gt;=&amp;gt;&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;string&quot;&gt;&#39;num&#39;&lt;/span&gt;=&amp;gt;&lt;span class=&quot;string&quot;&gt;&#39;502&#39;&lt;/span&gt;，&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;string&quot;&gt;&#39;hits&#39;&lt;/span&gt;=&amp;gt;&lt;span class=&quot;number&quot;&gt;4&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    ),&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;string&quot;&gt;&#39;2&#39;&lt;/span&gt;=&amp;gt;&lt;span class=&quot;keyword&quot;&gt;array&lt;/span&gt;(&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;string&quot;&gt;&#39;type&#39;&lt;/span&gt;=&amp;gt;&lt;span class=&quot;number&quot;&gt;2&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;string&quot;&gt;&#39;num&#39;&lt;/span&gt;=&amp;gt;&lt;span class=&quot;string&quot;&gt;&#39;404&#39;&lt;/span&gt;，&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;string&quot;&gt;&#39;hits&#39;&lt;/span&gt;=&amp;gt;&lt;span class=&quot;number&quot;&gt;20&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    )，&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;string&quot;&gt;&#39;3&#39;&lt;/span&gt;=&amp;gt;&lt;span class=&quot;keyword&quot;&gt;array&lt;/span&gt;(&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;string&quot;&gt;&#39;type&#39;&lt;/span&gt;=&amp;gt;&lt;span class=&quot;number&quot;&gt;3&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;string&quot;&gt;&#39;num&#39;&lt;/span&gt;=&amp;gt;&lt;span class=&quot;string&quot;&gt;&#39;400&#39;&lt;/span&gt;，&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;string&quot;&gt;&#39;hits&#39;&lt;/span&gt;=&amp;gt;&lt;span class=&quot;number&quot;&gt;14&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    )&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;)&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;应该得到的结果：&lt;/p&gt;
&lt;figure class=&quot;highlight php&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;array&lt;/span&gt;(&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;string&quot;&gt;&#39;0&#39;&lt;/span&gt;=&amp;gt;&lt;span class=&quot;keyword&quot;&gt;array&lt;/span&gt;(&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;string&quot;&gt;&#39;type&#39;&lt;/span&gt;=&amp;gt;&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;string&quot;&gt;&#39;num&#39;&lt;/span&gt;=&amp;gt;&lt;span class=&quot;string&quot;&gt;&#39;500&#39;&lt;/span&gt;，&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;string&quot;&gt;&#39;hits&#39;&lt;/span&gt;=&amp;gt;&lt;span class=&quot;number&quot;&gt;27&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    ),&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;string&quot;&gt;&#39;1&#39;&lt;/span&gt;=&amp;gt;&lt;span class=&quot;keyword&quot;&gt;array&lt;/span&gt;(&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;string&quot;&gt;&#39;type&#39;&lt;/span&gt;=&amp;gt;&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;string&quot;&gt;&#39;num&#39;&lt;/span&gt;=&amp;gt;&lt;span class=&quot;string&quot;&gt;&#39;502&#39;&lt;/span&gt;，&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;string&quot;&gt;&#39;hits&#39;&lt;/span&gt;=&amp;gt;&lt;span class=&quot;number&quot;&gt;34&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    ),&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;string&quot;&gt;&#39;2&#39;&lt;/span&gt;=&amp;gt;&lt;span class=&quot;keyword&quot;&gt;array&lt;/span&gt;(&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;string&quot;&gt;&#39;type&#39;&lt;/span&gt;=&amp;gt;&lt;span class=&quot;number&quot;&gt;2&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;string&quot;&gt;&#39;num&#39;&lt;/span&gt;=&amp;gt;&lt;span class=&quot;string&quot;&gt;&#39;404&#39;&lt;/span&gt;，&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;string&quot;&gt;&#39;hits&#39;&lt;/span&gt;=&amp;gt;&lt;span class=&quot;number&quot;&gt;30&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    )，&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;string&quot;&gt;&#39;3&#39;&lt;/span&gt;=&amp;gt;&lt;span class=&quot;keyword&quot;&gt;array&lt;/span&gt;(&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;string&quot;&gt;&#39;type&#39;&lt;/span&gt;=&amp;gt;&lt;span class=&quot;number&quot;&gt;3&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;string&quot;&gt;&#39;num&#39;&lt;/span&gt;=&amp;gt;&lt;span class=&quot;string&quot;&gt;&#39;400&#39;&lt;/span&gt;，&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;string&quot;&gt;&#39;hits&#39;&lt;/span&gt;=&amp;gt;&lt;span class=&quot;number&quot;&gt;28&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    )&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;)&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;处理函数：&lt;/p&gt;
&lt;figure class=&quot;highlight php&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;arrayAddArrayByTwoKeys&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;($re1,$re2,$key1,$key2,$key3)&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    $tmp = &lt;span class=&quot;keyword&quot;&gt;array&lt;/span&gt;();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;foreach&lt;/span&gt; ($re1 &lt;span class=&quot;keyword&quot;&gt;as&lt;/span&gt; $v1) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        $tmp[$v1[$key1]][$v1[$key2]] = $v1[$key3];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;foreach&lt;/span&gt;($re2 &lt;span class=&quot;keyword&quot;&gt;as&lt;/span&gt; $v2) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt;(&lt;span class=&quot;keyword&quot;&gt;isset&lt;/span&gt;($tmp[$v2[$key1]][$v2[$key2]])) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            $tmp[$v2[$key1]][$v2[$key2]] += $v2[$key3];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;foreach&lt;/span&gt;($tmp &lt;span class=&quot;keyword&quot;&gt;as&lt;/span&gt; $kk =&amp;gt; $vv)&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        $n = count($vv);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        $k = array_keys($vv);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        $v = array_values($vv);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt;($i=&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;;$i&amp;lt;$n;$i++)&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            $result[] = &lt;span class=&quot;keyword&quot;&gt;array&lt;/span&gt;(&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                $key1=&amp;gt;$kk,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                $key2=&amp;gt;$k[$i],&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                $key3=&amp;gt;$v[$i],&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            );&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; $result;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;差不多就是这几个情形比较多吧，第一次就这么处理了数组，给我留下深深地印象。主要自己把玩数组不是很溜，不管了，先记录一点吧。&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;情况大概是这样的，一个刚入门PHP程序狗，某天接到了一个需求，需要从两个表里获取数据，这两张表的字段是相同的，但记录的类型不同，现在需要将两个类型合并了，不建新表。大概就是把相同字段值的记录中其他某个字段值相加这个意思(可能说的不清楚看下面的例子就
    
    </summary>
    
    
      <category term="PHP" scheme="http://www.dyike.com/tags/PHP/"/>
    
  </entry>
  
  <entry>
    <title>将数组转换成字符串</title>
    <link href="http://www.dyike.com/2016/04/28/array-to-string/"/>
    <id>http://www.dyike.com/2016/04/28/array-to-string/</id>
    <published>2016-04-28T07:08:32.000Z</published>
    <updated>2016-04-28T07:44:26.000Z</updated>
    
    <content type="html">&lt;hr&gt;
&lt;p&gt;##一个简单的方法：将一个二维的数组转换成字符串&lt;/p&gt;
&lt;p&gt;常常出现这样一种情况，sql语句查询出来的结果是一个二维数组，但是查询的结果还是需要用到下一条查询语句，这个时候可能需要将一个二维数组转换成字符串用于sql语句的查询。&lt;br&gt;下面是一个简单的例子：&lt;/p&gt;
&lt;figure class=&quot;highlight php&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;arr2str&lt;/span&gt; &lt;span class=&quot;params&quot;&gt;($arr)&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;foreach&lt;/span&gt; ($arr &lt;span class=&quot;keyword&quot;&gt;as&lt;/span&gt; $v)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        $v = join(&lt;span class=&quot;string&quot;&gt;&quot;,&quot;&lt;/span&gt;,$v); &lt;span class=&quot;comment&quot;&gt;//可以用implode将一维数组转换为用逗号连接的字符串&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        $temp[] = $v;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    $t=&lt;span class=&quot;string&quot;&gt;&quot;&quot;&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;foreach&lt;/span&gt;($temp &lt;span class=&quot;keyword&quot;&gt;as&lt;/span&gt; $v)&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        $t.=&lt;span class=&quot;string&quot;&gt;&quot;&#39;&quot;&lt;/span&gt;.$v.&lt;span class=&quot;string&quot;&gt;&quot;&#39;&quot;&lt;/span&gt;.&lt;span class=&quot;string&quot;&gt;&quot;,&quot;&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    $t=substr($t,&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;,&lt;span class=&quot;number&quot;&gt;-1&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; $t;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
</content>
    
    <summary type="html">
    
      &lt;hr&gt;
&lt;p&gt;##一个简单的方法：将一个二维的数组转换成字符串&lt;/p&gt;
&lt;p&gt;常常出现这样一种情况，sql语句查询出来的结果是一个二维数组，但是查询的结果还是需要用到下一条查询语句，这个时候可能需要将一个二维数组转换成字符串用于sql语句的查询。&lt;br&gt;下面是一个简单的例子：&lt;
    
    </summary>
    
    
      <category term="-php" scheme="http://www.dyike.com/tags/php/"/>
    
  </entry>
  
  <entry>
    <title>解决ssh的连接中断的问题&quot;&#39;</title>
    <link href="http://www.dyike.com/2016/03/08/solve-ssh-broken-connection/"/>
    <id>http://www.dyike.com/2016/03/08/solve-ssh-broken-connection/</id>
    <published>2016-03-08T01:23:41.000Z</published>
    <updated>2016-04-28T08:11:29.000Z</updated>
    
    <content type="html">&lt;p&gt;&lt;strong&gt;问题场景&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;服务器环境：阿里云 Linux CentOS 主机&lt;/p&gt;
&lt;p&gt;客户端：Mac OSX Terminal&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;问题现象&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;用 ssh 命令连接服务器之后，如果一段时间不操作，再次进入 Terminal 时会有一段时间没有响应，然后就出现错误提示：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;Write failed: Broken pipe&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;只能重新用 ssh 命令进行连接。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;解决方法&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;方法一：如果您有多台服务器，不想在每台服务器上设置，只需在客户端的 ~/.ssh/ 文件夹中添加 config 文件，并添加下面的配置：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;ServerAliveInterval 60&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;方法二：如果您有多个人管理服务器，不想在每个客户端进行设置，只需在服务器的 /etc/ssh/sshd_config 中添加如下的配置：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;ClientAliveInterval 60&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;方法三：如果您只想让当前的 ssh 保持连接，可以使用以下的命令：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ ssh -o ServerAliveInterval=60 user@sshserver&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;strong&gt;问题场景&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;服务器环境：阿里云 Linux CentOS 主机&lt;/p&gt;
&lt;p&gt;客户端：Mac OSX Terminal&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;问题现象&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;用 ssh 命令连接服务器之后，如果
    
    </summary>
    
    
      <category term="ssh" scheme="http://www.dyike.com/tags/ssh/"/>
    
  </entry>
  
  <entry>
    <title>php7编译出现的问题</title>
    <link href="http://www.dyike.com/2016/01/02/php7-compile-err/"/>
    <id>http://www.dyike.com/2016/01/02/php7-compile-err/</id>
    <published>2016-01-02T10:15:13.000Z</published>
    <updated>2016-04-28T07:45:26.000Z</updated>
    
    <content type="html">&lt;p&gt;在编译安装php7时日志中有如下错误记录：&lt;br&gt;virtual memory exhausted: Cannot allocate memory&lt;br&gt;make: &lt;em&gt;*&lt;/em&gt; [ext/fileinfo/libmagic/apprentice.lo] Error 1&lt;/p&gt;
&lt;p&gt;开始时的解决方法是先将很多的进程关闭，比如httpd、ftpd、sendmail等等，释放出了一部分内存后，再进行编译，仍然得到同样的编译错误。后来百度谷歌了很久才找到解决问题的方法，而且是在php.net上找到的解决方法，原文链接是：https:  //bugs.php.net/bug.php?id=48809&lt;/p&gt;
&lt;p&gt;根据这个文章的方法将php安装配置文件中加了引号中的配置（不包括引号）“- -disable-fileinfo”后终于编译通过。&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;在编译安装php7时日志中有如下错误记录：&lt;br&gt;virtual memory exhausted: Cannot allocate memory&lt;br&gt;make: &lt;em&gt;*&lt;/em&gt; [ext/fileinfo/libmagic/apprentice.lo] Error
    
    </summary>
    
    
      <category term="PHP" scheme="http://www.dyike.com/tags/PHP/"/>
    
  </entry>
  
  <entry>
    <title>2015年我的总结</title>
    <link href="http://www.dyike.com/2015/12/30/think-about-2015/"/>
    <id>http://www.dyike.com/2015/12/30/think-about-2015/</id>
    <published>2015-12-30T13:44:07.000Z</published>
    <updated>2016-04-28T08:08:03.000Z</updated>
    
    <content type="html">&lt;p&gt;写这个的时候是自己刚刚参加完研究生考试，说实话心里真的是一万个草泥马，这题也太难了，比去年的还要难。后来想想也不对，要难大家一起难嘛。再后来又听说了今年考研有政治英语泄题的事件，心里又开始不平衡了。哎，自己活得太真实……&lt;/p&gt;
&lt;p&gt;大概从什么时候开始喜欢写年度总结，这样说的话还是在上了大学之后，学了这个专业，好像就有了这个习惯，其实写文章让人记录很多事情，生活、工作、学习等等。就好像年末了这几天我就把自己机器的开发环境升级到php7，之前配置开发环境的时候，就是因为当初懒，没有记录当初踩的坑，这次也遇到了就是想不起上次怎么解决的，所以导致最后还要谷歌，重新再来一遍，这里面真的浪费很多时间。&lt;/p&gt;
&lt;p&gt;准确的说我是从什么时候有这个时间概念的，还是大二的时候，那时认识了一个名叫勾英达的小鲜肉，有一次一起在中关村那里吃饭，回去的路上，他一直计算着时间，说出来走到北大校门需要五分钟……其实这个算是一个小小的细节吧，后来我也意识到自己平时也不太注意时间这个概念，久而久之就能看出自己有拖延症的毛病。拖泥带水差不多就是这样形成。&lt;/p&gt;
&lt;p&gt;谈起2015年的计划，我打开的轻单账户，看到自己在2015年年初的写过一个list，也就只列了8条，现在对比起来一个都没有做成，想想是不是很可怕呢？也未必，这一年真的不一样，那个时候还没有做出一个决定——考研。所以导致年初的制定的计划后面六条一个都没有做成【前两个做了，没有做成功】想想都要流泪。这一年跨度大三大四，这种感觉真的不一样，感觉自己在变化，在成长。年初开学的时候，回到学校，发现了很多很多人在说考研这个事，以为他们是说着玩，当初自己也就是随口说了一嘴“我也要考”，好像记得当初学校做了一个调查，我当时还填了一个“工作”的意愿。没有过多少天发现他们不是说着玩的，后来自己也就落实了自己所说的上面，言出必行嘛【其实我一直是不看好考研这个，更何况自己是想干互联网的，所以好多需要到实践中积累，后来很多人问我“你不是不看好考研的嘛你为嘛还要考研，如果你还这样问的吧，你就自己揣摩吧，答案就在这里】。&lt;/p&gt;
&lt;h2 id=&quot;关于学习&quot;&gt;&lt;a href=&quot;#关于学习&quot; class=&quot;headerlink&quot; title=&quot;关于学习&quot;&gt;&lt;/a&gt;&lt;strong&gt;关于学习&lt;/strong&gt;&lt;/h2&gt;&lt;p&gt;这一年学习应该是最有好多想说的了，从决定考研的时候，应该可以说每天坚持学习，至于学习的效率，我真对自己有点呵呵了，发现学习最大的干扰就是手机了，后来临近考试的时候，自己也意识到这个问题，所以每天强迫自己不带手机就去图书馆，这样也确实看到了效果，至少在图书馆的时间能够充分利用到90%，这样一算的话，一天从早上八点考试学习，到晚上九点半，一共13.5小时，再除去中午晚上吃法加休息的3个小时，一天怎么也会有十个小时。哎，早知道这样坚持的话，应该肯定能考上了。说多了都是泪。&lt;/p&gt;
&lt;p&gt;学习还是要制定个一个计划，有的时候真的需要逼自己一把，只有自己逼自己，别人逼的话都是虚无缥缈的东西。还记得，四月份的时候，自己想要学习那个php开发一个电商网站，当初就只想用一个月的时间，把慕课网上的视频教程看完，给自己制定了一个计划：每天坚持一个小时学习视频，对着视频教程撸码，后来发现，真正投入的时候，自己花费上面的时间远远超过一个小时，一个月下来自己的收获真是满满的。有计划的学习，算是我的一个学习方法，后来我也用考研过程中数学和专业课的复习，虽然真的很难，用这样的方法去学习，至少不会让自己变的内心后怕，因为这样做会使得自己有条不紊地进行。&lt;/p&gt;
&lt;p&gt;其次就是学习技巧了，你每天有大把大把的时间逛各种社交网站，刷微博刷朋友圈，刷微博刷朋友圈确实能让自己得到稍微的放松，缓解自己的压力。朋友圈有各种这样的文章的分享，平时看到是鸡汤的文章我都是99.9%的跳过，自己就是自己的灵魂工程师，还需要看鸡汤，嘿嘿。对于分享的技术的文章，能看懂的当然看完，看不懂的文章会收藏起来【好的文章更要收藏了】，同时加上标签，以便以后看到查找。【注：这些功能都是微信最基本的功能，善于用起来对自己真的很有帮助】微博里也是差不多这样，现在微博里基本都是关注对自己有用的同行业的人，对他们同样进行了分组，更好的管理他们输出的价值，看到好的技术文章同样会star收藏。还有就是善于使用微博的搜索功能，虽然做得不是很好，至少这个东西能让你精准找到你遇到“坑”的原因，一般情况微博搜索能让我找到答案。【这个功能微信里面也有，关键字搜索能查到自己想要的东西。】还有微博的微盘也是很不错的，反正能找到对我有用的东西。最后想说的，&lt;strong&gt;其他东西，真的不要百度不要百度不要百度！！！谷歌哟谷歌哟谷歌哟！！！&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;最后，多写博客，这一年自己没有怎么写博客，个人觉得写博客能让自己有提升，因为自己学习的时候喜欢看别人的博客，或许我能绕开别人踩过的坑。嘿嘿。自己有所思有所想的时候就应该记录下来。反正这样对自己没有什么坏处。还有写博客算是一种价值输出吧，可能你踩过的坑对别人来说就是一点帮助吧。&lt;/p&gt;
&lt;h2 id=&quot;关于身体锻炼&quot;&gt;&lt;a href=&quot;#关于身体锻炼&quot; class=&quot;headerlink&quot; title=&quot;关于身体锻炼&quot;&gt;&lt;/a&gt;&lt;strong&gt;关于身体锻炼&lt;/strong&gt;&lt;/h2&gt;&lt;p&gt;身体是自己的，自己要懂得珍惜，锻炼身体更需坚持。这一年，自己做得不够好，坚持锻炼也就4月份坚持了整整一个月的跑步，后来都断断续续的了。不要给自己找借口，锻炼身体都能坚持得下来。&lt;/p&gt;
&lt;h2 id=&quot;关于坚持和专注&quot;&gt;&lt;a href=&quot;#关于坚持和专注&quot; class=&quot;headerlink&quot; title=&quot;关于坚持和专注&quot;&gt;&lt;/a&gt;&lt;strong&gt;关于坚持和专注&lt;/strong&gt;&lt;/h2&gt;&lt;p&gt;以前常被人说我是一个没有专注的人，做事没有三分钟的热度。今年这一年考研坐冷板凳的磨练，让我更懂得什么是坚持，什么叫专注。我坚持了到最后，我坚持从每天早上7点起床到后来6点半起床再到6点起床学习到，晚上也从9点回寝到9点回寝再到10点半回寝，我能做了这些，这些并不算心酸，至少我能坚持下来，其实别人也能坚持下来。其实这个没有神么，就是在于自己的实践，不是嘴皮子功夫，落实到行动才是关键。&lt;/p&gt;
&lt;p&gt;至于专注，怎么说，如果能找到自己的兴趣点，自己自然会去专注。像谈恋爱也应该要这样吧，专注的人才是更加迷人。真正知道专注我也是在大三的时候知道自己将来毕业了想在哪个行业混准备做什么。大学四年快要结束了，现在想来唯一的遗憾：在这样艺术气息浓厚的校园，我没有用大一大二大三的时间折腾点设计方面的东西，现在意识到这一点，或许有点晚，或许一点也不晚。&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;2015年的小失败：在9月份的时候参加腾讯的校招，当初笔试真的很糟糕。清晰地记得吃了算法的亏。后来连百度的校招都没有敢参加，真的没有那个勇气了。希望2016年能够拾起算法，对自己的技术学习有所帮助。&lt;/p&gt;
&lt;h2 id=&quot;对2016年展望&quot;&gt;&lt;a href=&quot;#对2016年展望&quot; class=&quot;headerlink&quot; title=&quot;对2016年展望&quot;&gt;&lt;/a&gt;&lt;strong&gt;对2016年展望&lt;/strong&gt;&lt;/h2&gt;&lt;p&gt;再也不用在年初制定一年的计划了，而是应该将实践目标阶段化，细节化。同时不要underestimate my capability and overestimate the difficulties。即enough！！！&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;写这个的时候是自己刚刚参加完研究生考试，说实话心里真的是一万个草泥马，这题也太难了，比去年的还要难。后来想想也不对，要难大家一起难嘛。再后来又听说了今年考研有政治英语泄题的事件，心里又开始不平衡了。哎，自己活得太真实……&lt;/p&gt;
&lt;p&gt;大概从什么时候开始喜欢写年度总结，这样
    
    </summary>
    
    
      <category term="随笔感想" scheme="http://www.dyike.com/tags/%E9%9A%8F%E7%AC%94%E6%84%9F%E6%83%B3/"/>
    
  </entry>
  
  <entry>
    <title>讨论下redis集群方案以及遇到过的坑</title>
    <link href="http://www.dyike.com/2015/10/22/talk-about-redis/"/>
    <id>http://www.dyike.com/2015/10/22/talk-about-redis/</id>
    <published>2015-10-22T14:10:54.000Z</published>
    <updated>2016-04-15T09:59:31.000Z</updated>
    
    <content type="html">&lt;p&gt;【今日话题】&lt;/p&gt;
&lt;p&gt;讨论下redis集群方案以及遇到过的坑 - 阿牛哥&lt;/p&gt;
&lt;p&gt;1. twemproxy，codis，未来的redis-cluster&lt;/p&gt;
&lt;p&gt;codis的作者出来创业了，但是一直很活跃 - hello&lt;/p&gt;
&lt;p&gt;2. Redis cluster 以后的趋势 - 如末&lt;/p&gt;
&lt;p&gt;3. 胡兰tv已经用redis cluster了 - sky&lt;/p&gt;
&lt;p&gt;4. codis组件太多了&lt;/p&gt;
&lt;p&gt;但是周边工具很配套 - hello&lt;/p&gt;
&lt;p&gt;5. 目前在用Twemproxy做集群 git上这个已经很久不更新了， Twemproxy支持的命令也有限， - hey&lt;/p&gt;
&lt;p&gt;6. 市面上最多的估计据就是它了 官方的cluster还不成熟稳定 Codis 其实也不算成熟 - 如末&lt;/p&gt;
&lt;p&gt;7. 目前的redis基于2.6自己定制的…… - tiyee&lt;/p&gt;
&lt;p&gt;8. redis集群 我自己之前的操作方法是直接利用redis_sentinel 一主多从 故障之后 选举出新的master 多个master之间利用一致性hash做分配 - lawlielt&lt;/p&gt;
&lt;p&gt;9. 偷偷抛个小炸弹：&lt;/p&gt;
&lt;p&gt;主redis做数据变更，从做数据查询，但从会产生临时中间计算器数据，这样子大家认为对主从同步是否有影响？为啥[偷笑] - 乔楚&lt;/p&gt;
&lt;p&gt;回: 万一全部同步的话 中间数据岂不是被覆盖了？&lt;/p&gt;
&lt;p&gt;如果是命令同步 竟然同步必然会涉及到一个类似于什么命令缓存偏移的问题吧 更新操作 会不会影响从库的同步点的问题&lt;/p&gt;
&lt;p&gt;主从也要考虑很多问题的 类似于故障迁移 扩展之类的 - lawlielt&lt;/p&gt;
&lt;p&gt;10. 其实很想知道有将red is cluster 官方版那个用起来的吗？&lt;/p&gt;
&lt;p&gt;我之前收到试用过几次，还挺好用。就是phpredis 扩展缺乏支持 - 如末&lt;/p&gt;
&lt;p&gt;11. 我有用过，不过被phpredis坑死了&lt;/p&gt;
&lt;p&gt;估计没有proxy不行 - Huangsir&lt;/p&gt;
&lt;p&gt;12. 确实phpredis 对集群用起来很蛋疼。昨天看了下&lt;/p&gt;
&lt;p&gt;Predis 这个代码扩展。倒是用起来很好用。但是估计效率差点 - 如末&lt;/p&gt;
&lt;p&gt;13. 豌豆荚分布式Redis的设计与实现 &lt;a href=&quot;http://www.infoq.com/cn/presentations/design-and-implementation-of-wandoujia-distributed-redis&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://www.infoq.com/cn/presentations/design-and-implementation-of-wandoujia-distributed-redis&lt;/a&gt; - 昱北&lt;/p&gt;
&lt;p&gt;【分享链接】&lt;/p&gt;
&lt;p&gt;1. 多人开发的 Git 流程 &lt;a href=&quot;http://gold.xitu.io/entry/56263cfd00b0023ca69de5ec&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://gold.xitu.io/entry/56263cfd00b0023ca69de5ec&lt;/a&gt; - ShiverySea&lt;/p&gt;
&lt;p&gt;2. 维护一个大型开源项目是怎样的体验？ &lt;a href=&quot;http://www.zhihu.com/question/36292298/answer/67049956&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://www.zhihu.com/question/36292298/answer/67049956&lt;/a&gt; - 猿蜗&lt;/p&gt;
&lt;p&gt;3. MariaDB 10.1 每秒可处理一百万查询 &lt;a href=&quot;http://mp.weixin.qq.com/s?__biz=MzA5ODM5MDU3MA==&amp;amp;mid=400055734&amp;amp;idx=1&amp;amp;sn=d04822306c80e5bf00203cecda1dfdaf&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://mp.weixin.qq.com/s?__biz=MzA5ODM5MDU3MA==&amp;amp;mid=400055734&amp;amp;idx=1&amp;amp;sn=d04822306c80e5bf00203cecda1dfdaf&lt;/a&gt; - tony&lt;/p&gt;
&lt;p&gt;4. 无线APP日志上报优化实践 &lt;a href=&quot;http://mp.weixin.qq.com/s?__biz=MjM5ODYxMDA5OQ==&amp;amp;mid=400110965&amp;amp;idx=1&amp;amp;sn=d105f59c78bfaaab943e0e0bde925d99&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://mp.weixin.qq.com/s?__biz=MjM5ODYxMDA5OQ==&amp;amp;mid=400110965&amp;amp;idx=1&amp;amp;sn=d105f59c78bfaaab943e0e0bde925d99&lt;/a&gt; - 朱政国&lt;/p&gt;
&lt;p&gt;5. 西部数据宣布190亿美元收购闪迪SanDisk &lt;a href=&quot;http://mp.weixin.qq.com/s?__biz=MjM5MzM3NjM4MA==&amp;amp;mid=400599228&amp;amp;idx=1&amp;amp;sn=43287d40a9c8421214fcf608861e90c9&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://mp.weixin.qq.com/s?__biz=MjM5MzM3NjM4MA==&amp;amp;mid=400599228&amp;amp;idx=1&amp;amp;sn=43287d40a9c8421214fcf608861e90c9&lt;/a&gt; - @理鱼&lt;/p&gt;
&lt;p&gt;6. 微服务年度总结，看完这个你应该知道如何回答别人的问题了。 &lt;a href=&quot;http://mp.weixin.qq.com/s?__biz=MzA5ODM0NjA3NA==&amp;amp;mid=400146790&amp;amp;idx=1&amp;amp;sn=5cba6e9f90db52dc6d9010c3237c1902&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://mp.weixin.qq.com/s?__biz=MzA5ODM0NjA3NA==&amp;amp;mid=400146790&amp;amp;idx=1&amp;amp;sn=5cba6e9f90db52dc6d9010c3237c1902&lt;/a&gt; - @理鱼&lt;/p&gt;
&lt;p&gt;7. PHP 性能优化 &lt;a href=&quot;http://mp.weixin.qq.com/s?__biz=MzAwNjMxMTA5Mw==&amp;amp;mid=400058189&amp;amp;idx=1&amp;amp;sn=bada7be26e1d33071af23e6765ef8a51&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://mp.weixin.qq.com/s?__biz=MzAwNjMxMTA5Mw==&amp;amp;mid=400058189&amp;amp;idx=1&amp;amp;sn=bada7be26e1d33071af23e6765ef8a51&lt;/a&gt; - 黑夜路人&lt;/p&gt;
&lt;p&gt;8. Redis数据结构与存储 &lt;a href=&quot;http://shift-alt-ctrl.iteye.com/blog/1874693&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://shift-alt-ctrl.iteye.com/blog/1874693&lt;/a&gt; - 程序员朋&lt;/p&gt;
&lt;p&gt;9. Nginx image processing server with OpenResty and Lua &lt;a href=&quot;http://leafo.net/posts/creating_an_image_server.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://leafo.net/posts/creating_an_image_server.html&lt;/a&gt; - 姚文强&lt;/p&gt;
&lt;p&gt;10. 构建高性能web之路——mysql读写分离实战 &lt;a href=&quot;http://blog.csdn.net/cutesource/article/details/5710645&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://blog.csdn.net/cutesource/article/details/5710645&lt;/a&gt; - 黑夜路人&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;【今日话题】&lt;/p&gt;
&lt;p&gt;讨论下redis集群方案以及遇到过的坑 - 阿牛哥&lt;/p&gt;
&lt;p&gt;1. twemproxy，codis，未来的redis-cluster&lt;/p&gt;
&lt;p&gt;codis的作者出来创业了，但是一直很活跃 - hello&lt;/p&gt;
&lt;p&gt;2. Redis c
    
    </summary>
    
    
      <category term="redis" scheme="http://www.dyike.com/tags/redis/"/>
    
  </entry>
  
  <entry>
    <title>用 Vagrant 管理虚拟机</title>
    <link href="http://www.dyike.com/2015/09/20/manage-virtualbox-by-vagrant/"/>
    <id>http://www.dyike.com/2015/09/20/manage-virtualbox-by-vagrant/</id>
    <published>2015-09-20T11:28:24.000Z</published>
    <updated>2016-04-28T07:40:39.000Z</updated>
    
    <content type="html">&lt;p&gt;Vagrant 可以让我们用命令直接从云上下载虚拟机的镜像，你想要什么系统都行，Centos，Ubuntu …   只需要一行命令，然后再用命令去操作虚拟机，启动，暂停，关闭，重启，你可以更方便的管理所有的在本地上电脑上的虚拟机镜像，手工去配置它们，可以再重新打包成新的镜像，方便你跟你的团队在其它的项目上重复使用。&lt;/p&gt;
&lt;h2 id=&quot;安装-Vagrant&quot;&gt;&lt;a href=&quot;#安装-Vagrant&quot; class=&quot;headerlink&quot; title=&quot;安装 Vagrant&quot;&gt;&lt;/a&gt;安装 Vagrant&lt;/h2&gt;&lt;p&gt;Vagrant 提供了一个虚拟机的管理层，虚拟机本身还是需要用到虚拟机的软件，比如 VMware，Virtualbox 等等，推荐用 Virtualbox 。使用系统的包管理工具去安装软件。&lt;/p&gt;
&lt;h3 id=&quot;Mac-上安装-Vagrant&quot;&gt;&lt;a href=&quot;#Mac-上安装-Vagrant&quot; class=&quot;headerlink&quot; title=&quot;Mac 上安装 Vagrant&quot;&gt;&lt;/a&gt;Mac 上安装 Vagrant&lt;/h3&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;brew install vagrant&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;Mac-上安装-Virtualbox&quot;&gt;&lt;a href=&quot;#Mac-上安装-Virtualbox&quot; class=&quot;headerlink&quot; title=&quot;Mac 上安装 Virtualbox&quot;&gt;&lt;/a&gt;Mac 上安装 Virtualbox&lt;/h3&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;brew install Caskroom/cask/virtualbox&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h2 id=&quot;Box&quot;&gt;&lt;a href=&quot;#Box&quot; class=&quot;headerlink&quot; title=&quot;Box&quot;&gt;&lt;/a&gt;Box&lt;/h2&gt;&lt;p&gt;Box ，你可以把它想成是一个箱子，里面装了一些东西。在用 Vagrant 创建虚拟机的时候，需要用到 Box ，它里面会包装操作系统的镜像，不同的 Box 带的操作系统可能是不一样的，比如 CentOS，Ubuntu 等等，你可以基于它们去创建自己版本的 Box，比如在虚拟机上安装一些软件，然后把它重新打包成 Box 。&lt;/p&gt;
&lt;p&gt;在 Vagrant 提供的云服务（&lt;a href=&quot;https://vagrantcloud.com/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;https://vagrantcloud.com/&lt;/a&gt;）上面可以下载到别人做好的 Box，这个云服务现在叫 Atlas，是 hashicorp 公司的一个产品，Vagrant 也是这家公司的项目。打开这个地址以后，可以去搜索想要用的 Box，可以搜索操作系统的名字，也可以搜索特定的软件的名字，比如 Laravel，Drupal …    在搜索结果上面会显示这个 Box 的下载的次数，你可以用来判断这个 Box 是否受欢迎。&lt;/p&gt;
&lt;p&gt;我们需要一个纯净的 Box，就是只包含操作系统，在系统上没有安装其它的多余的东西。注意不同发行版的 Linux 操作起来是有些区别的，我推荐先用一下 CentOS 这款操作系统。&lt;/p&gt;
&lt;h3 id=&quot;添加-Box&quot;&gt;&lt;a href=&quot;#添加-Box&quot; class=&quot;headerlink&quot; title=&quot;添加 Box&quot;&gt;&lt;/a&gt;添加 Box&lt;/h3&gt;&lt;p&gt;你要把 Box 下载到本地的电脑上，交给 Vagrant 去管理，这样在创建虚拟机的时候，Vagrant 会复制一份你指定的 Box 到你的项目里面，这样你在这个虚拟机上的操作，就不会影响到其它的项目。先确定你用的电脑上的操作系统的位数，现在一般都是 64 位的操作系统。打开命令行工具以后，执行 vagrant box add 命令去添加 Box 。&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;vagrant box add 名字&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;如果你指定的 Box 在本地电脑上不存在，Vagrant 就会到它的云上去给你下载。执行：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;vagrant box add chef/centos-6.5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;上面的 chef/centos-6.5 还有 centos-6.5-i386 就是想要添加的 Box 的名字，最前面的 chef  ，是一个命名空间，一般就是这个 Box 的作者的名字，后面的 centos-6.5 表示这个 Box 的操作系统是 CentOS ，版本是 6.5 ，i386 表示 32 位的系统。&lt;/p&gt;
&lt;h3 id=&quot;查看本地上的-Box-列表&quot;&gt;&lt;a href=&quot;#查看本地上的-Box-列表&quot; class=&quot;headerlink&quot; title=&quot;查看本地上的 Box 列表&quot;&gt;&lt;/a&gt;查看本地上的 Box 列表&lt;/h3&gt;&lt;p&gt;完成以后，可以查看一下在本地上的 Box 列表。&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;vagrant box list&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;手工下载并添加-Box-的方法&quot;&gt;&lt;a href=&quot;#手工下载并添加-Box-的方法&quot; class=&quot;headerlink&quot; title=&quot;手工下载并添加 Box 的方法&quot;&gt;&lt;/a&gt;手工下载并添加 Box 的方法&lt;/h3&gt;&lt;p&gt;在执行 Vagrant box add 添加 Box 的时候，Vagrant 会在命令行上显示 Box 的下载地址，下载的速度还有进度，如果你在国内，很可能下载的速度非常慢。你可以复制 Box 的下载地址，然后用下载工具，比如用迅雷去下载。&lt;/p&gt;
&lt;p&gt;完成以后，找到下载下来的文件，文件名里会包含 .box 这个扩展名，如果不是，你需要手工添加这个扩展名。并且重命名一下文件，比如命名为 centos_6.5.box 。然后把它放到桌面上，其它地方也行。打开命令行，进入到手工下面的 Box 文件所在的位置。比如&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;cd ~/ityike&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;然后查看一下文件列表：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;ls&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;确定 Box 文件在当前的目录的下面，再执行 vagrant box add 命令去手工添加 Box 。&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;vagrant box add 名称 路径&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;名称就是你想给这个 Box 起的名字，以后我们会用到这个名字去管理这个 Box，路径是 Box 文件所在的位置，如果你要添加的 Box 直接在你当前所在的目录的下面，可以直接使用 Box 文件的名称，像这样：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;vagrant box add centos-6.5 centos-6.5.box&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;Vagrant 会把 Box 文件复制到系统的某个特定的目录的下面，完成以后，你就可以把桌面上的 Box 文件删除掉了。&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;rm centos-6.5.box&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;再查看一下可用的 Box 列表：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;vagrant box list&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;在返回的列表里，你应该可以找到自己手工添加的 centos-6.5 这个 Box 。&lt;/p&gt;
&lt;h3 id=&quot;管理-Box&quot;&gt;&lt;a href=&quot;#管理-Box&quot; class=&quot;headerlink&quot; title=&quot;管理 Box&quot;&gt;&lt;/a&gt;管理 Box&lt;/h3&gt;&lt;p&gt;添加到本地电脑上的 Box 会放到一个特定的目录的下面。跟 Box 相关的命令，可以用 vagrant box 命令查看。使用的方法就是 vagrant box 后面再加上子相应的子命令，接着是对应的参数。常用的就是 add ，list 还有 remove。add 是添加新的 Box ，list 可以查看已有的 Box ，remove 就是从系统中删除掉 Box 。注意在创建虚拟机的时候，Vagrant 会把你指定的 Box 复制一份放到特定的目录的下面。所以，你在使用 remove 命令删除掉添加到系统中的 Box 的时候，不会影响到这些已有的虚拟机。&lt;/p&gt;
&lt;h2 id=&quot;创建虚拟机&quot;&gt;&lt;a href=&quot;#创建虚拟机&quot; class=&quot;headerlink&quot; title=&quot;创建虚拟机&quot;&gt;&lt;/a&gt;创建虚拟机&lt;/h2&gt;&lt;p&gt;添加了 Box 以后，我们就可以用 Vagrant 基于这个 Box 去创建虚拟机了。先找个地方去创建一个目录，这个目录就是你的项目所在的目录，它会自动跟虚拟机上的某个目录同步，也就是在你电脑上的这个目录里面的文件，你同样可以在虚拟机里的某个目录里面找到。比如我要在桌面上创建一个叫 ninghao-project 的目录，然后再进入到这个目录，在命令行工具下面执行：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;cd ~/ityike&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;mkdir ityike-project&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;cd ityike-project&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;初始化&quot;&gt;&lt;a href=&quot;#初始化&quot; class=&quot;headerlink&quot; title=&quot;初始化&quot;&gt;&lt;/a&gt;初始化&lt;/h3&gt;&lt;p&gt;首先要做的就是初始化一下，用 vagrant init ，后面指定一下要使用的 Box 的名字。完成以后，在你的目录下面创建一个叫 Vagrantfile 的文件。&lt;/p&gt;
&lt;p&gt;先查看一下可用的 Box&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;vagrant box list&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;如果跟着我的步骤来，你应该可以看到一个叫 centos-6.5 的 Box 。下面我们用这个 Box 去初始化一下项目。&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;vagrant init centos-6.5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;完成以后，查看一下当前目录下面的东西。&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;ls&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;你会看到一个 Vagrantfile 文件，这个文件是配置当前项目的虚拟机用的，以后我们会再回来看一下怎么样使用这个文件。&lt;/p&gt;
&lt;h3 id=&quot;启动虚拟机&quot;&gt;&lt;a href=&quot;#启动虚拟机&quot; class=&quot;headerlink&quot; title=&quot;启动虚拟机&quot;&gt;&lt;/a&gt;启动虚拟机&lt;/h3&gt;&lt;p&gt;Vagrant 提供了一些命令可以操作虚拟机，比如启动，暂停，关闭或者销毁虚拟机。启动虚拟机，执行：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;vagrant up&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;第一次启动，花的时间会长一些，因为 Vagrant 会把你为项目指定的 Box 复制到一个地方，然后再去启动它。完成以后，你可以用命令再查看一下虚拟机的状态：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;vagrant status&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;如果返回的是 running ，说明虚拟机启动成功，现在你就可以使用 ssh 连接到虚拟机，去控制它了。&lt;/p&gt;
&lt;h3 id=&quot;控制虚拟机&quot;&gt;&lt;a href=&quot;#控制虚拟机&quot; class=&quot;headerlink&quot; title=&quot;控制虚拟机&quot;&gt;&lt;/a&gt;控制虚拟机&lt;/h3&gt;&lt;p&gt;想在 Linux 系统的虚拟机上进行操作，你要用 ssh 连接到虚拟机，这跟你远程控制 Linux 的服务器是一样的。&lt;/p&gt;
&lt;h4 id=&quot;Mac&quot;&gt;&lt;a href=&quot;#Mac&quot; class=&quot;headerlink&quot; title=&quot;Mac&quot;&gt;&lt;/a&gt;Mac&lt;/h4&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;vagrant ssh&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;暂停与恢复&quot;&gt;&lt;a href=&quot;#暂停与恢复&quot; class=&quot;headerlink&quot; title=&quot;暂停与恢复&quot;&gt;&lt;/a&gt;暂停与恢复&lt;/h3&gt;&lt;p&gt;虚拟机在运行的时候会消耗你的电脑资源，比如内存，CPU 等等，在不用它的时候，可以关掉或者使用暂停，暂停虚拟机可以保存虚拟机运行时候的状态，暂停以后，除了占点硬盘空间以外，就不会消耗你的其它资源了。&lt;/p&gt;
&lt;p&gt;进入到项目所在的目录，然后可以用 vagrant status 查看一下当前的虚拟机的状态，如果是 running ，你就可以使用命令去暂停一下：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;vagrant suspend&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;重新恢复起动，执行命令：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;vagrant resume&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;想要彻底关掉虚拟机的运行，执行：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;vagrant halt&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;停止以后，要想再起动虚拟机，要执行：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;vagrant up&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;删除虚拟机&quot;&gt;&lt;a href=&quot;#删除虚拟机&quot; class=&quot;headerlink&quot; title=&quot;删除虚拟机&quot;&gt;&lt;/a&gt;删除虚拟机&lt;/h3&gt;&lt;p&gt;不打算再用的虚拟机，可以把它删除掉，直接删除项目的目录是不行的，因为为项目指定的虚拟机并不包含在这个项目的目录下面，需要使用命令去删除虚拟机。进入到项目所在目录，然后执行：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;vagrant destroy&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;hr&gt;
&lt;h3 id=&quot;配置共享目录&quot;&gt;&lt;a href=&quot;#配置共享目录&quot; class=&quot;headerlink&quot; title=&quot;配置共享目录&quot;&gt;&lt;/a&gt;配置共享目录&lt;/h3&gt;&lt;p&gt;打开 Vagrantfile ，搜索一下共享目录的配置：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;# config.vm.synced_folder&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;去掉这行代码前面的 # 符号 。这个配置后面有两个参数，第一个参数是主机上的目录，可以使用绝对的位置，也可以使用相对的位置，如果是相对位置，是相对于项目根目录的位置，也就是相对于 Vagrantfile 这个文件所在的目录的位置。两个参数之间是一个逗号，第二个参数是在虚拟机上的目录，如果你设置的目录在虚拟机上不存在，Vagrant 在启动虚拟机的时候，会自动去创建这个目录。&lt;br&gt;比如：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;config.vm.synced_folder &amp;quot;app&amp;quot;, &amp;quot;/vagrant&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h2 id=&quot;端口转发&quot;&gt;&lt;a href=&quot;#端口转发&quot; class=&quot;headerlink&quot; title=&quot;端口转发&quot;&gt;&lt;/a&gt;端口转发&lt;/h2&gt;&lt;p&gt;然后搜索：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;config.vm.network &amp;quot;forwarded_port&amp;quot;, guest: 80, host: 8080&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;去掉这行代码最前面的 # 号， 这个配置就是端口转发&lt;/p&gt;
&lt;hr&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;Vagrant 可以让我们用命令直接从云上下载虚拟机的镜像，你想要什么系统都行，Centos，Ubuntu …   只需要一行命令，然后再用命令去操作虚拟机，启动，暂停，关闭，重启，你可以更方便的管理所有的在本地上电脑上的虚拟机镜像，手工去配置它们，可以再重新打包成新的镜像
    
    </summary>
    
    
      <category term="vagrant virtualbox" scheme="http://www.dyike.com/tags/vagrant-virtualbox/"/>
    
  </entry>
  
  <entry>
    <title>由于自己的疏忽，一个低级的错误</title>
    <link href="http://www.dyike.com/2015/09/19/about-an-error/"/>
    <id>http://www.dyike.com/2015/09/19/about-an-error/</id>
    <published>2015-09-19T11:20:17.000Z</published>
    <updated>2016-04-28T07:29:19.000Z</updated>
    
    <content type="html">&lt;p&gt;PHP中continue后面的分号，疏忽掉就会出现不一样的情况。&lt;br&gt;看一个简单的例子：&lt;br&gt;&lt;figure class=&quot;highlight php&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;meta&quot;&gt;&amp;lt;?php&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; ($i = &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;; $i &amp;amp;lt; &lt;span class=&quot;number&quot;&gt;5&lt;/span&gt;; ++$i) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; ($i == &lt;span class=&quot;number&quot;&gt;2&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;continue&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;print&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&quot;$i\n&quot;&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;meta&quot;&gt;?&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;这种情况输出的结果：&lt;br&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;去掉分号后：&lt;br&gt;&lt;figure class=&quot;highlight php&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;meta&quot;&gt;&amp;lt;?php&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; ($i = &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;; $i &amp;amp;lt; &lt;span class=&quot;number&quot;&gt;5&lt;/span&gt;; ++$i) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; ($i == &lt;span class=&quot;number&quot;&gt;2&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;continue&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;print&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&quot;$i\n&quot;&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;meta&quot;&gt;?&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;在php5.4之前的版本输出的结果：&lt;br&gt;&lt;code&gt;2&lt;/code&gt;&lt;br&gt;因为整个 continue print “$i\n”; 被当做单一的表达式而求值，所以 print 函数只有在 $i == 2 为真时才被调用（print 的值被当成了上述的可选数字参数而传递给了 continue）。&lt;/p&gt;
&lt;p&gt;还有重要的，在php5.4版本中，这个情况是不能输出结果的。&lt;br&gt;&lt;code&gt;5.4.0 continue 0; 不再合法。这在之前的版本被解析为 continue 1;。&lt;/code&gt;&lt;br&gt;&lt;code&gt;5.4.0 取消变量作为参数传递（例如 $num = 2; continue $num;）。&lt;/code&gt;&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;PHP中continue后面的分号，疏忽掉就会出现不一样的情况。&lt;br&gt;看一个简单的例子：&lt;br&gt;&lt;figure class=&quot;highlight php&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/s
    
    </summary>
    
    
      <category term="-PHP" scheme="http://www.dyike.com/tags/PHP/"/>
    
  </entry>
  
</feed>
