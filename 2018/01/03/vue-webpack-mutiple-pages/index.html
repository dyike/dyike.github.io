<!DOCTYPE html><html lang="zh-Hans"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><meta property="wb:webmaster" content="70a2abf24d0ab33f"><meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests"><title>WebPack配置vue多页面 · 一刻笔记</title><meta name="description" content="WebPack配置vue多页面 - ityike"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="icon" href="/touxiang.png"><link rel="stylesheet" href="/css/apollo.css"><link rel="search" type="application/opensearchdescription+xml" href="http://www.dyike.com/atom.xml" title="一刻笔记"></head><body><div class="wrap"><header><a href="/" class="logo-link"><img src="/touxiang.png" alt="logo"></a><ul class="nav nav-list"><li class="nav-list-item"><a href="/" target="_self" class="nav-list-link">首页</a></li><li class="nav-list-item"><a href="/learn" target="_self" class="nav-list-link">充电</a></li><li class="nav-list-item"><a href="/life" target="_self" class="nav-list-link">生活</a></li><li class="nav-list-item"><a href="/archives/" target="_self" class="nav-list-link">归档</a></li><li class="nav-list-item"><a href="/about" target="_self" class="nav-list-link">关于</a></li><li class="nav-list-item"><a href="http://weibo.com/yuanfengyff" target="_blank" class="nav-list-link">微博</a></li><li class="nav-list-item"><a href="https://github.com/dyike" target="_blank" class="nav-list-link">GITHUB</a></li><li class="nav-list-item"><a href="/atom.xml" target="_self" class="nav-list-link">订阅</a></li></ul></header><main class="container"><div class="post"><article class="post-block"><h1 class="post-title">WebPack配置vue多页面</h1><div class="post-info">Jan 3, 2018</div><div class="post-content"><p>WebPack虐我千百遍，我带她如初恋。一个项目前台页面写差不多了，webpack几乎零配置，也算work起来了。现在需要编写后台管理界面，另起一个单独的项目，那是不存在的。于是网上了搜了大把大把的文章，很多都是修改了项目的结构，讨厌，vue-cli搞的那一套，干嘛要修改来修改去的。像我这种前端小萌新，webpack的配置改着就把前台部分run不起来了。。。</p>
<p>于是就有了这个笔记：</p>
<p>先看看项目的结构：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line">├── build</div><div class="line">├── config</div><div class="line">├── src</div><div class="line">│   ├── api</div><div class="line">│   ├── assets</div><div class="line">│   ├── components</div><div class="line">│   ├── pages</div><div class="line">│   ├── router</div><div class="line">│   ├── utils</div><div class="line">│   ├── vuex</div><div class="line">│   ├── App.vue</div><div class="line">│   ├── main.js</div><div class="line">│   ├── admin.js</div><div class="line">│   └── Admin.vue</div><div class="line">├── static</div><div class="line">│   └── images</div><div class="line">├── README.md</div><div class="line">├── admin.html</div><div class="line">├── index.html</div><div class="line">├── package.json</div><div class="line">└── yarn.lock</div></pre></td></tr></table></figure>
<p>我相信这样的结构大家一定很熟悉，除了<code>admin.html</code>和src文件夹下面的<code>Admin.vue</code>、<code>admin.js</code>，还有一些api，pages，vuex等文件夹，就是最常见的一个vue-cli初始化的项目结构。</p>
<p>我想要就是新增一个后台管理界面的入口admin.html，其他能够共用的还是共用，进入正题：</p>
<h2 id="修改webpack的配置文件"><a href="#修改webpack的配置文件" class="headerlink" title="修改webpack的配置文件"></a>修改webpack的配置文件</h2><h3 id="修改-webpack-base-conf-js"><a href="#修改-webpack-base-conf-js" class="headerlink" title="修改 webpack.base.conf.js"></a>修改 webpack.base.conf.js</h3><p>打开 <code>~\build\webpack.base.conf.js</code> ，找到entry，添加多入口:<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">entry: &#123;</div><div class="line">  <span class="attr">app</span>: <span class="string">'./src/main.js'</span>,</div><div class="line">  <span class="attr">admin</span>: <span class="string">'./src/admin.js'</span>   <span class="comment">//新增</span></div><div class="line">&#125;,</div></pre></td></tr></table></figure></p>
<p>这样运行编译的时候，每一个入口都会对应一个chunk。</p>
<h2 id="run-dev配置的修改"><a href="#run-dev配置的修改" class="headerlink" title="run dev配置的修改"></a>run dev配置的修改</h2><p>打开 ·~\build\webpack.dev.conf.js· ，在plugins下找到<code>HtmlWebpackPlugin</code>，在其后面添加对应的多页，并为每个页面添加Chunk配置如下:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">new</span> HtmlWebpackPlugin(&#123;</div><div class="line">  <span class="attr">filename</span>: <span class="string">'index.html'</span>, <span class="comment">//生成的html</span></div><div class="line">  template: <span class="string">'index.html'</span>, <span class="comment">//来源html</span></div><div class="line">  inject: <span class="literal">true</span>,   </div><div class="line">  <span class="attr">chunks</span>: [<span class="string">'app'</span>]<span class="comment">//需要引入的Chunk，不配置就会引入所有页面的资源</span></div><div class="line">&#125;),</div><div class="line"><span class="keyword">new</span> HtmlWebpackPlugin(&#123;</div><div class="line">  <span class="attr">filename</span>: <span class="string">'admin.html'</span>,</div><div class="line">  <span class="attr">template</span>: <span class="string">'admin.html'</span>,</div><div class="line">  <span class="attr">inject</span>: <span class="literal">true</span>,</div><div class="line">  <span class="attr">chunks</span>: [<span class="string">'admin'</span>]</div><div class="line">&#125;),</div></pre></td></tr></table></figure>
<h2 id="run-build配置的修改"><a href="#run-build配置的修改" class="headerlink" title="run build配置的修改"></a>run build配置的修改</h2><h3 id="修改config-index-js"><a href="#修改config-index-js" class="headerlink" title="修改config/index.js"></a>修改config/index.js</h3><p>打开<code>~\config\index.js</code>，找到build下的<code>index: path.resolve(__dirname, &#39;../dist/index.html&#39;)</code>，在其后添加多页:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">admin: path.resolve(__dirname, <span class="string">'../dist/admin.html'</span>),</div></pre></td></tr></table></figure>
<h3 id="修改webpack-prod-conf-js"><a href="#修改webpack-prod-conf-js" class="headerlink" title="修改webpack.prod.conf.js"></a>修改<code>webpack.prod.conf.js</code></h3><p>打开<code>~\build\webpack.prod.conf.js</code>，在plugins下找到<code>HtmlWebpackPlugin</code>，在其后面添加对应的多页，并为每个页面添加Chunk配置:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">new</span> HtmlWebpackPlugin(&#123;</div><div class="line">  <span class="attr">filename</span>: config.build.index,</div><div class="line">  <span class="attr">template</span>: <span class="string">'index.html'</span>,</div><div class="line">  <span class="attr">inject</span>: <span class="literal">true</span>,</div><div class="line">  <span class="attr">minify</span>: &#123;</div><div class="line">    <span class="attr">removeComments</span>: <span class="literal">true</span>,</div><div class="line">    <span class="attr">collapseWhitespace</span>: <span class="literal">true</span>,</div><div class="line">    <span class="attr">removeAttributeQuotes</span>: <span class="literal">true</span></div><div class="line">    <span class="comment">// more options:</span></div><div class="line">    <span class="comment">// https://github.com/kangax/html-minifier#options-quick-reference</span></div><div class="line">  &#125;,</div><div class="line">  <span class="comment">// necessary to consistently work with multiple chunks via CommonsChunkPlugin</span></div><div class="line">  chunksSortMode: <span class="string">'dependency'</span>,</div><div class="line">  <span class="attr">chunks</span>: [<span class="string">'manifest'</span>, <span class="string">'vendor'</span>, <span class="string">'app'</span>]</div><div class="line">&#125;),</div><div class="line"></div><div class="line"><span class="keyword">new</span> HtmlWebpackPlugin(&#123;</div><div class="line">  <span class="attr">filename</span>: config.build.admin,</div><div class="line">  <span class="attr">template</span>: <span class="string">'admin.html'</span>,</div><div class="line">  <span class="attr">inject</span>: <span class="literal">true</span>,</div><div class="line">  <span class="attr">minify</span>: &#123;</div><div class="line">    <span class="attr">removeComments</span>: <span class="literal">true</span>,</div><div class="line">    <span class="attr">collapseWhitespace</span>: <span class="literal">true</span>,</div><div class="line">    <span class="attr">removeAttributeQuotes</span>: <span class="literal">true</span></div><div class="line">  &#125;,</div><div class="line">  <span class="attr">chunksSortMode</span>: <span class="string">'dependency'</span>,</div><div class="line">  <span class="attr">chunks</span>: [<span class="string">'manifest'</span>, <span class="string">'vendor'</span>, <span class="string">'admin'</span>]</div><div class="line">&#125;),</div></pre></td></tr></table></figure>
<h2 id="End"><a href="#End" class="headerlink" title="End"></a>End</h2><p>恩，没有了，就不修改什么项目结构了，过程越复杂越容易出错。上面webpack的配置简单能看懂。Enjoy~~~</p>
</div></article></div></main><footer><div class="paginator"><a href="/2018/03/18/blockchain-note-001/" class="prev">上一篇</a><a href="/2017/12/31/2017-in-all/" class="next">下一篇</a></div><script type="text/javascript">(function(){
    var url = "http://widget.weibo.com/distribution/comments.php?width=0&url=auto&border=1&brandline=y&appkey=2308493083&dpc=1";
    url = url.replace("url=auto", "url=" + encodeURIComponent(document.URL));
    document.write('<iframe id="WBCommentFrame" src="' + url + '" scrolling="no" frameborder="0" style="width:100%"></iframe>');
})();</script><script src="https://tjs.sjs.sinajs.cn/open/widget/js/widget/comment.js" type="text/javascript" charset="utf-8"></script><script type="text/javascript">window.WBComment.init({
    "id": "WBCommentFrame"
});</script><div class="copyright"><p>© 2013 - 2018 <a href="http://www.dyike.com">ityike</a>.</p></div></footer></div><script async src="//cdn.bootcss.com/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML" integrity="sha384-crwIf/BuaWM9rM65iM+dWFldgQ1Un8jWZMuh3puxb8TOY9+linwLoI7ZHZT+aekW" crossorigin="anonymous"></script><script>(function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=function(){(b[l].q=b[l].q||[]).push(arguments)});b[l].l=+new Date;e=o.createElement(i);r=o.getElementsByTagName(i)[0];e.src='//www.google-analytics.com/analytics.js';r.parentNode.insertBefore(e,r)}(window,document,'script','ga'));ga('create',"UA-65933410-1",'auto');ga('send','pageview');</script></body></html>